{"dependencies":[{"name":"@babel/runtime/helpers/objectWithoutPropertiesLoose","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"HFkXuFcBAqfzGtqyPj8g62MKT0M=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/index","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"55efhPHw3gz2FoQtoN2yI1VuhbM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _objectWithoutPropertiesLoose = require(_dependencyMap[0], \"@babel/runtime/helpers/objectWithoutPropertiesLoose\");\n  const _excluded = [\"onPress\"],\n    _excluded2 = [\"onPress\"];\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.Dashboard = void 0;\n  const react_native_1 = require(_dependencyMap[1], \"react-native-web/dist/index\");\n  class Dashboard {\n    connected = false;\n    window = null;\n    onConnectCallbacks = new Set();\n    onDisconnectCallbacks = new Set();\n    stateSubscription = null;\n    buttonSubscription = null;\n    constructor(bridge, emitter) {\n      this.bridge = bridge;\n      this.emitter = emitter;\n      this.emitter.addListener('dashboardDidConnect', window => {\n        this.connected = true;\n        this.window = window;\n        this.onConnectCallbacks.forEach(callback => {\n          callback(window);\n        });\n      });\n      this.emitter.addListener('dashboardDidDisconnect', () => {\n        this.connected = false;\n        this.window = null;\n        this.onDisconnectCallbacks.forEach(callback => {\n          callback();\n        });\n      });\n      // check if already connected this will fire any 'dashboardDidDisconnect' events\n      // if a connected is already present.\n      this.bridge.checkForDashboardConnection();\n    }\n    create(config) {\n      for (const subscription of [this.stateSubscription, this.buttonSubscription]) {\n        subscription?.remove();\n      }\n      const {\n        id,\n        component,\n        shortcutButtons,\n        onStateChanged\n      } = config;\n      if (shortcutButtons.length === 0 || shortcutButtons.length > 2) {\n        throw new Error(`invalid number of dashboard shortcut buttons, got ${shortcutButtons.length} when it has to be a min of 1 and a max of 2`);\n      }\n      const dashboardConfig = {\n        shortcutButtons: []\n      };\n      if (shortcutButtons != null) {\n        for (let index = 0; index < shortcutButtons.length; index++) {\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          const _shortcutButtons$inde = shortcutButtons[index],\n            button = _objectWithoutPropertiesLoose(_shortcutButtons$inde, _excluded);\n          dashboardConfig.shortcutButtons.push(Object.assign({}, button, {\n            index,\n            image: react_native_1.Image.resolveAssetSource(button.image),\n            launchCarplayScene: button.launchCarplayScene ?? false\n          }));\n        }\n        this.buttonSubscription = this.emitter.addListener('dashboardButtonPressed', e => {\n          shortcutButtons[e.index]?.onPress?.();\n        });\n        if (onStateChanged != null) {\n          this.stateSubscription = this.emitter.addListener('dashboardStateDidChange', ({\n            isVisible\n          }) => {\n            onStateChanged(isVisible);\n          });\n        }\n      }\n      react_native_1.AppRegistry.registerComponent(id, () => component);\n      this.bridge.createDashboard(id, dashboardConfig);\n    }\n    checkForConnection() {\n      this.bridge.checkForDashboardConnection();\n    }\n    updateShortcutButtons(shortcutButtons) {\n      const config = {\n        shortcutButtons: []\n      };\n      this.buttonSubscription?.remove();\n      for (let index = 0; index < shortcutButtons.length; index++) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const _shortcutButtons$inde2 = shortcutButtons[index],\n          button = _objectWithoutPropertiesLoose(_shortcutButtons$inde2, _excluded2);\n        config.shortcutButtons.push(Object.assign({}, button, {\n          index,\n          image: react_native_1.Image.resolveAssetSource(button.image),\n          launchCarplayScene: button.launchCarplayScene ?? false\n        }));\n      }\n      this.buttonSubscription = this.emitter.addListener('dashboardButtonPressed', e => {\n        shortcutButtons[e.index]?.onPress?.();\n      });\n      this.bridge.updateDashboardShortcutButtons(config);\n    }\n    /**\n     * Fired when CarPlay is connected to the dashboard scene.\n     */\n    registerOnConnect = callback => {\n      this.onConnectCallbacks.add(callback);\n      return {\n        remove: () => this.onConnectCallbacks.delete(callback)\n      };\n    };\n    /**\n     * Fired when CarPlay is disconnected from the dashboard scene.\n     */\n    registerOnDisconnect = callback => {\n      this.onDisconnectCallbacks.add(callback);\n      return {\n        remove: () => this.onDisconnectCallbacks.delete(callback)\n      };\n    };\n  }\n  exports.Dashboard = Dashboard;\n});","lineCount":124,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_objectWithoutPropertiesLoose"],[4,35,1,13],[4,38,1,13,"require"],[4,45,1,13],[4,46,1,13,"_dependencyMap"],[4,60,1,13],[5,2,1,13],[5,8,1,13,"_excluded"],[5,17,1,13],[6,4,1,13,"_excluded2"],[6,14,1,13],[7,2,2,0,"Object"],[7,8,2,6],[7,9,2,7,"defineProperty"],[7,23,2,21],[7,24,2,22,"exports"],[7,31,2,29],[7,33,2,31],[7,45,2,43],[7,47,2,45],[8,4,2,47,"value"],[8,9,2,52],[8,11,2,54],[9,2,2,59],[9,3,2,60],[9,4,2,61],[10,2,3,0,"exports"],[10,9,3,7],[10,10,3,8,"Dashboard"],[10,19,3,17],[10,22,3,20],[10,27,3,25],[10,28,3,26],[11,2,3,27],[11,8,3,27,"react_native_1"],[11,22,3,27],[11,25,3,27,"require"],[11,32,3,27],[11,33,3,27,"_dependencyMap"],[11,47,3,27],[12,2,5,0],[12,8,5,6,"Dashboard"],[12,17,5,15],[12,18,5,16],[13,4,8,4,"connected"],[13,13,8,13],[13,16,8,16],[13,21,8,21],[14,4,9,4,"window"],[14,10,9,10],[14,13,9,13],[14,17,9,17],[15,4,10,4,"onConnectCallbacks"],[15,22,10,22],[15,25,10,25],[15,29,10,29,"Set"],[15,32,10,32],[15,33,10,33],[15,34,10,34],[16,4,11,4,"onDisconnectCallbacks"],[16,25,11,25],[16,28,11,28],[16,32,11,32,"Set"],[16,35,11,35],[16,36,11,36],[16,37,11,37],[17,4,12,4,"stateSubscription"],[17,21,12,21],[17,24,12,24],[17,28,12,28],[18,4,13,4,"buttonSubscription"],[18,22,13,22],[18,25,13,25],[18,29,13,29],[19,4,14,4,"constructor"],[19,15,14,15,"constructor"],[19,16,14,16,"bridge"],[19,22,14,22],[19,24,14,24,"emitter"],[19,31,14,31],[19,33,14,33],[20,6,15,8],[20,10,15,12],[20,11,15,13,"bridge"],[20,17,15,19],[20,20,15,22,"bridge"],[20,26,15,28],[21,6,16,8],[21,10,16,12],[21,11,16,13,"emitter"],[21,18,16,20],[21,21,16,23,"emitter"],[21,28,16,30],[22,6,17,8],[22,10,17,12],[22,11,17,13,"emitter"],[22,18,17,20],[22,19,17,21,"addListener"],[22,30,17,32],[22,31,17,33],[22,52,17,54],[22,54,17,57,"window"],[22,60,17,63],[22,64,17,68],[23,8,18,12],[23,12,18,16],[23,13,18,17,"connected"],[23,22,18,26],[23,25,18,29],[23,29,18,33],[24,8,19,12],[24,12,19,16],[24,13,19,17,"window"],[24,19,19,23],[24,22,19,26,"window"],[24,28,19,32],[25,8,20,12],[25,12,20,16],[25,13,20,17,"onConnectCallbacks"],[25,31,20,35],[25,32,20,36,"forEach"],[25,39,20,43],[25,40,20,44,"callback"],[25,48,20,52],[25,52,20,56],[26,10,21,16,"callback"],[26,18,21,24],[26,19,21,25,"window"],[26,25,21,31],[26,26,21,32],[27,8,22,12],[27,9,22,13],[27,10,22,14],[28,6,23,8],[28,7,23,9],[28,8,23,10],[29,6,24,8],[29,10,24,12],[29,11,24,13,"emitter"],[29,18,24,20],[29,19,24,21,"addListener"],[29,30,24,32],[29,31,24,33],[29,55,24,57],[29,57,24,59],[29,63,24,65],[30,8,25,12],[30,12,25,16],[30,13,25,17,"connected"],[30,22,25,26],[30,25,25,29],[30,30,25,34],[31,8,26,12],[31,12,26,16],[31,13,26,17,"window"],[31,19,26,23],[31,22,26,26],[31,26,26,30],[32,8,27,12],[32,12,27,16],[32,13,27,17,"onDisconnectCallbacks"],[32,34,27,38],[32,35,27,39,"forEach"],[32,42,27,46],[32,43,27,47,"callback"],[32,51,27,55],[32,55,27,59],[33,10,28,16,"callback"],[33,18,28,24],[33,19,28,25],[33,20,28,26],[34,8,29,12],[34,9,29,13],[34,10,29,14],[35,6,30,8],[35,7,30,9],[35,8,30,10],[36,6,31,8],[37,6,32,8],[38,6,33,8],[38,10,33,12],[38,11,33,13,"bridge"],[38,17,33,19],[38,18,33,20,"checkForDashboardConnection"],[38,45,33,47],[38,46,33,48],[38,47,33,49],[39,4,34,4],[40,4,35,4,"create"],[40,10,35,10,"create"],[40,11,35,11,"config"],[40,17,35,17],[40,19,35,19],[41,6,36,8],[41,11,36,13],[41,17,36,19,"subscription"],[41,29,36,31],[41,33,36,35],[41,34,36,36],[41,38,36,40],[41,39,36,41,"stateSubscription"],[41,56,36,58],[41,58,36,60],[41,62,36,64],[41,63,36,65,"buttonSubscription"],[41,81,36,83],[41,82,36,84],[41,84,36,86],[42,8,37,12,"subscription"],[42,20,37,24],[42,22,37,26,"remove"],[42,28,37,32],[42,29,37,33],[42,30,37,34],[43,6,38,8],[44,6,39,8],[44,12,39,14],[45,8,39,16,"id"],[45,10,39,18],[46,8,39,20,"component"],[46,17,39,29],[47,8,39,31,"shortcutButtons"],[47,23,39,46],[48,8,39,48,"onStateChanged"],[49,6,39,63],[49,7,39,64],[49,10,39,67,"config"],[49,16,39,73],[50,6,40,8],[50,10,40,12,"shortcutButtons"],[50,25,40,27],[50,26,40,28,"length"],[50,32,40,34],[50,37,40,39],[50,38,40,40],[50,42,40,44,"shortcutButtons"],[50,57,40,59],[50,58,40,60,"length"],[50,64,40,66],[50,67,40,69],[50,68,40,70],[50,70,40,72],[51,8,41,12],[51,14,41,18],[51,18,41,22,"Error"],[51,23,41,27],[51,24,41,28],[51,77,41,81,"shortcutButtons"],[51,92,41,96],[51,93,41,97,"length"],[51,99,41,103],[51,145,41,149],[51,146,41,150],[52,6,42,8],[53,6,43,8],[53,12,43,14,"dashboardConfig"],[53,27,43,29],[53,30,43,32],[54,8,44,12,"shortcutButtons"],[54,23,44,27],[54,25,44,29],[55,6,45,8],[55,7,45,9],[56,6,46,8],[56,10,46,12,"shortcutButtons"],[56,25,46,27],[56,29,46,31],[56,33,46,35],[56,35,46,37],[57,8,47,12],[57,13,47,17],[57,17,47,21,"index"],[57,22,47,26],[57,25,47,29],[57,26,47,30],[57,28,47,32,"index"],[57,33,47,37],[57,36,47,40,"shortcutButtons"],[57,51,47,55],[57,52,47,56,"length"],[57,58,47,62],[57,60,47,64,"index"],[57,65,47,69],[57,67,47,71],[57,69,47,73],[58,10,48,16],[59,10,49,16],[59,16,49,16,"_shortcutButtons$inde"],[59,37,49,16],[59,40,49,47,"shortcutButtons"],[59,55,49,62],[59,56,49,63,"index"],[59,61,49,68],[59,62,49,69],[60,12,49,36,"button"],[60,18,49,42],[60,21,49,42,"_objectWithoutPropertiesLoose"],[60,50,49,42],[60,51,49,42,"_shortcutButtons$inde"],[60,72,49,42],[60,74,49,42,"_excluded"],[60,83,49,42],[61,10,50,16,"dashboardConfig"],[61,25,50,31],[61,26,50,32,"shortcutButtons"],[61,41,50,47],[61,42,50,48,"push"],[61,46,50,52],[61,47,50,52,"Object"],[61,53,50,52],[61,54,50,52,"assign"],[61,60,50,52],[61,65,51,23,"button"],[61,71,51,29],[62,12,52,20,"index"],[62,17,52,25],[63,12,53,20,"image"],[63,17,53,25],[63,19,53,27,"react_native_1"],[63,33,53,41],[63,34,53,42,"Image"],[63,39,53,47],[63,40,53,48,"resolveAssetSource"],[63,58,53,66],[63,59,53,67,"button"],[63,65,53,73],[63,66,53,74,"image"],[63,71,53,79],[63,72,53,80],[64,12,54,20,"launchCarplayScene"],[64,30,54,38],[64,32,54,40,"button"],[64,38,54,46],[64,39,54,47,"launchCarplayScene"],[64,57,54,65],[64,61,54,69],[65,10,54,74],[65,12,55,17],[65,13,55,18],[66,8,56,12],[67,8,57,12],[67,12,57,16],[67,13,57,17,"buttonSubscription"],[67,31,57,35],[67,34,57,38],[67,38,57,42],[67,39,57,43,"emitter"],[67,46,57,50],[67,47,57,51,"addListener"],[67,58,57,62],[67,59,57,63],[67,83,57,87],[67,85,57,89,"e"],[67,86,57,90],[67,90,57,94],[68,10,58,16,"shortcutButtons"],[68,25,58,31],[68,26,58,32,"e"],[68,27,58,33],[68,28,58,34,"index"],[68,33,58,39],[68,34,58,40],[68,36,58,42,"onPress"],[68,43,58,49],[68,46,58,52],[68,47,58,53],[69,8,59,12],[69,9,59,13],[69,10,59,14],[70,8,60,12],[70,12,60,16,"onStateChanged"],[70,26,60,30],[70,30,60,34],[70,34,60,38],[70,36,60,40],[71,10,61,16],[71,14,61,20],[71,15,61,21,"stateSubscription"],[71,32,61,38],[71,35,61,41],[71,39,61,45],[71,40,61,46,"emitter"],[71,47,61,53],[71,48,61,54,"addListener"],[71,59,61,65],[71,60,61,66],[71,85,61,91],[71,87,61,93],[71,88,61,94],[72,12,61,96,"isVisible"],[73,10,61,106],[73,11,61,107],[73,16,61,112],[74,12,62,20,"onStateChanged"],[74,26,62,34],[74,27,62,35,"isVisible"],[74,36,62,44],[74,37,62,45],[75,10,63,16],[75,11,63,17],[75,12,63,18],[76,8,64,12],[77,6,65,8],[78,6,66,8,"react_native_1"],[78,20,66,22],[78,21,66,23,"AppRegistry"],[78,32,66,34],[78,33,66,35,"registerComponent"],[78,50,66,52],[78,51,66,53,"id"],[78,53,66,55],[78,55,66,57],[78,61,66,63,"component"],[78,70,66,72],[78,71,66,73],[79,6,67,8],[79,10,67,12],[79,11,67,13,"bridge"],[79,17,67,19],[79,18,67,20,"createDashboard"],[79,33,67,35],[79,34,67,36,"id"],[79,36,67,38],[79,38,67,40,"dashboardConfig"],[79,53,67,55],[79,54,67,56],[80,4,68,4],[81,4,69,4,"checkForConnection"],[81,22,69,22,"checkForConnection"],[81,23,69,22],[81,25,69,25],[82,6,70,8],[82,10,70,12],[82,11,70,13,"bridge"],[82,17,70,19],[82,18,70,20,"checkForDashboardConnection"],[82,45,70,47],[82,46,70,48],[82,47,70,49],[83,4,71,4],[84,4,72,4,"updateShortcutButtons"],[84,25,72,25,"updateShortcutButtons"],[84,26,72,26,"shortcutButtons"],[84,41,72,41],[84,43,72,43],[85,6,73,8],[85,12,73,14,"config"],[85,18,73,20],[85,21,73,23],[86,8,74,12,"shortcutButtons"],[86,23,74,27],[86,25,74,29],[87,6,75,8],[87,7,75,9],[88,6,76,8],[88,10,76,12],[88,11,76,13,"buttonSubscription"],[88,29,76,31],[88,31,76,33,"remove"],[88,37,76,39],[88,38,76,40],[88,39,76,41],[89,6,77,8],[89,11,77,13],[89,15,77,17,"index"],[89,20,77,22],[89,23,77,25],[89,24,77,26],[89,26,77,28,"index"],[89,31,77,33],[89,34,77,36,"shortcutButtons"],[89,49,77,51],[89,50,77,52,"length"],[89,56,77,58],[89,58,77,60,"index"],[89,63,77,65],[89,65,77,67],[89,67,77,69],[90,8,78,12],[91,8,79,12],[91,14,79,12,"_shortcutButtons$inde2"],[91,36,79,12],[91,39,79,43,"shortcutButtons"],[91,54,79,58],[91,55,79,59,"index"],[91,60,79,64],[91,61,79,65],[92,10,79,32,"button"],[92,16,79,38],[92,19,79,38,"_objectWithoutPropertiesLoose"],[92,48,79,38],[92,49,79,38,"_shortcutButtons$inde2"],[92,71,79,38],[92,73,79,38,"_excluded2"],[92,83,79,38],[93,8,80,12,"config"],[93,14,80,18],[93,15,80,19,"shortcutButtons"],[93,30,80,34],[93,31,80,35,"push"],[93,35,80,39],[93,36,80,39,"Object"],[93,42,80,39],[93,43,80,39,"assign"],[93,49,80,39],[93,54,81,19,"button"],[93,60,81,25],[94,10,82,16,"index"],[94,15,82,21],[95,10,83,16,"image"],[95,15,83,21],[95,17,83,23,"react_native_1"],[95,31,83,37],[95,32,83,38,"Image"],[95,37,83,43],[95,38,83,44,"resolveAssetSource"],[95,56,83,62],[95,57,83,63,"button"],[95,63,83,69],[95,64,83,70,"image"],[95,69,83,75],[95,70,83,76],[96,10,84,16,"launchCarplayScene"],[96,28,84,34],[96,30,84,36,"button"],[96,36,84,42],[96,37,84,43,"launchCarplayScene"],[96,55,84,61],[96,59,84,65],[97,8,84,70],[97,10,85,13],[97,11,85,14],[98,6,86,8],[99,6,87,8],[99,10,87,12],[99,11,87,13,"buttonSubscription"],[99,29,87,31],[99,32,87,34],[99,36,87,38],[99,37,87,39,"emitter"],[99,44,87,46],[99,45,87,47,"addListener"],[99,56,87,58],[99,57,87,59],[99,81,87,83],[99,83,87,85,"e"],[99,84,87,86],[99,88,87,90],[100,8,88,12,"shortcutButtons"],[100,23,88,27],[100,24,88,28,"e"],[100,25,88,29],[100,26,88,30,"index"],[100,31,88,35],[100,32,88,36],[100,34,88,38,"onPress"],[100,41,88,45],[100,44,88,48],[100,45,88,49],[101,6,89,8],[101,7,89,9],[101,8,89,10],[102,6,90,8],[102,10,90,12],[102,11,90,13,"bridge"],[102,17,90,19],[102,18,90,20,"updateDashboardShortcutButtons"],[102,48,90,50],[102,49,90,51,"config"],[102,55,90,57],[102,56,90,58],[103,4,91,4],[104,4,92,4],[105,0,93,0],[106,0,94,0],[107,4,95,4,"registerOnConnect"],[107,21,95,21],[107,24,95,25,"callback"],[107,32,95,33],[107,36,95,38],[108,6,96,8],[108,10,96,12],[108,11,96,13,"onConnectCallbacks"],[108,29,96,31],[108,30,96,32,"add"],[108,33,96,35],[108,34,96,36,"callback"],[108,42,96,44],[108,43,96,45],[109,6,97,8],[109,13,97,15],[110,8,98,12,"remove"],[110,14,98,18],[110,16,98,20,"remove"],[110,17,98,20],[110,22,98,26],[110,26,98,30],[110,27,98,31,"onConnectCallbacks"],[110,45,98,49],[110,46,98,50,"delete"],[110,52,98,56],[110,53,98,57,"callback"],[110,61,98,65],[111,6,99,8],[111,7,99,9],[112,4,100,4],[112,5,100,5],[113,4,101,4],[114,0,102,0],[115,0,103,0],[116,4,104,4,"registerOnDisconnect"],[116,24,104,24],[116,27,104,28,"callback"],[116,35,104,36],[116,39,104,41],[117,6,105,8],[117,10,105,12],[117,11,105,13,"onDisconnectCallbacks"],[117,32,105,34],[117,33,105,35,"add"],[117,36,105,38],[117,37,105,39,"callback"],[117,45,105,47],[117,46,105,48],[118,6,106,8],[118,13,106,15],[119,8,107,12,"remove"],[119,14,107,18],[119,16,107,20,"remove"],[119,17,107,20],[119,22,107,26],[119,26,107,30],[119,27,107,31,"onDisconnectCallbacks"],[119,48,107,52],[119,49,107,53,"delete"],[119,55,107,59],[119,56,107,60,"callback"],[119,64,107,68],[120,6,108,8],[120,7,108,9],[121,4,109,4],[121,5,109,5],[122,2,110,0],[123,2,111,0,"exports"],[123,9,111,7],[123,10,111,8,"Dashboard"],[123,19,111,17],[123,22,111,20,"Dashboard"],[123,31,111,29],[124,0,111,30],[124,3]],"functionMap":{"names":["<global>","Dashboard","constructor","emitter.addListener$argument_1","onConnectCallbacks.forEach$argument_0","onDisconnectCallbacks.forEach$argument_0","create","react_native_1.AppRegistry.registerComponent$argument_1","checkForConnection","updateShortcutButtons","registerOnConnect","remove","registerOnDisconnect"],"mappings":"AAA;ACI;ICS;wDCG;4CCG;aDE;SDC;2DCC;+CEG;aFE;SDC;KDI;IKC;yFHsB;aGE;6FHE;iBGE;yDCG,eD;KLE;IOC;KPE;IQC;qFNe;SME;KRE;wBSI;oBCG,8CD;KTE;2BWI;oBDG,iDC;KXE;CDC"},"hasCjsExports":true},"type":"js/module"}]}