{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":156},"end":{"line":4,"column":42,"index":198}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":199},"end":{"line":5,"column":69,"index":268}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../store/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":269},"end":{"line":6,"column":50,"index":319}}],"key":"/4BDl/hqolvw7T4CXD8jWAtZK4M=","exportNames":["*"],"imports":1}},{"name":"../store/favoritesStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":320},"end":{"line":7,"column":60,"index":380}}],"key":"rQmi7ZiN3wSYC/3oB9X28qKmXrY=","exportNames":["*"],"imports":1}},{"name":"../hooks/useAudioPlayer","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":381},"end":{"line":8,"column":51,"index":432}}],"key":"pUckzGairsxi/1vGHJirSPNjmRQ=","exportNames":["*"],"imports":1}},{"name":"../services/stationService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":433},"end":{"line":9,"column":56,"index":489}}],"key":"uwHKYj7/xzUyIn0NC/c691Hz7MQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"PlayAtLoginHandler\", {\n    enumerable: true,\n    get: function () {\n      return PlayAtLoginHandler;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _storeAuthStore = require(_dependencyMap[2], \"../store/authStore\");\n  var _storeFavoritesStore = require(_dependencyMap[3], \"../store/favoritesStore\");\n  var _hooksUseAudioPlayer = require(_dependencyMap[4], \"../hooks/useAudioPlayer\");\n  var _servicesStationService = require(_dependencyMap[5], \"../services/stationService\");\n  var stationService = _interopDefault(_servicesStationService);\n  // PlayAtLoginHandler - Handles automatic playback on app start based on user settings\n  // Must be used inside AudioProvider to access playStation function\n\n  const PLAY_AT_LOGIN_KEY = 'play_at_login_setting';\n  const LAST_PLAYED_STATION_KEY = '@megaradio_last_played_station';\n  const PlayAtLoginHandler = () => {\n    const hasExecuted = (0, _react.useRef)(false);\n    const {\n      isAuthenticated\n    } = (0, _storeAuthStore.useAuthStore)();\n    const {\n      favorites\n    } = (0, _storeFavoritesStore.useFavoritesStore)();\n    const {\n      playStation\n    } = (0, _hooksUseAudioPlayer.useAudio)();\n    (0, _react.useEffect)(() => {\n      const executePlayAtLogin = async () => {\n        // Only execute once per app session\n        if (hasExecuted.current) {\n          return;\n        }\n\n        // Wait a bit for app to fully initialize\n        await new Promise(resolve => setTimeout(resolve, 1500));\n\n        // Check if user is authenticated\n        if (!isAuthenticated) {\n          console.log('[PlayAtLogin] User not authenticated, skipping');\n          return;\n        }\n        try {\n          const setting = await AsyncStorage.default.getItem(PLAY_AT_LOGIN_KEY);\n          console.log('[PlayAtLogin] Setting:', setting);\n          if (!setting || setting === 'off') {\n            console.log('[PlayAtLogin] Disabled or not set');\n            return;\n          }\n          hasExecuted.current = true;\n          let stationToPlay = null;\n          switch (setting) {\n            case 'last_played':\n              // Get last played station from storage\n              const lastPlayedJson = await AsyncStorage.default.getItem(LAST_PLAYED_STATION_KEY);\n              if (lastPlayedJson) {\n                stationToPlay = JSON.parse(lastPlayedJson);\n                console.log('[PlayAtLogin] Last played station:', stationToPlay?.name);\n              }\n              break;\n            case 'favorite':\n              // Get first favorite station\n              if (favorites && favorites.length > 0) {\n                stationToPlay = favorites[0];\n                console.log('[PlayAtLogin] First favorite station:', stationToPlay?.name);\n              }\n              break;\n            case 'random':\n              // Get random station from API\n              try {\n                const response = await stationService.default.getStations({\n                  limit: 50\n                });\n                if (response?.stations && response.stations.length > 0) {\n                  const randomIndex = Math.floor(Math.random() * response.stations.length);\n                  stationToPlay = response.stations[randomIndex];\n                  console.log('[PlayAtLogin] Random station:', stationToPlay?.name);\n                }\n              } catch (error) {\n                console.error('[PlayAtLogin] Failed to fetch random station:', error);\n              }\n              break;\n          }\n          if (stationToPlay) {\n            console.log('[PlayAtLogin] Starting playback:', stationToPlay.name);\n            await playStation(stationToPlay);\n          }\n        } catch (error) {\n          console.error('[PlayAtLogin] Error:', error);\n        }\n      };\n      executePlayAtLogin();\n    }, [isAuthenticated, favorites, playStation]);\n\n    // This component doesn't render anything\n    return null;\n  };\n  var _default = PlayAtLoginHandler;\n});","lineCount":119,"map":[[12,2,98,0,"Object"],[12,8,98,0],[12,9,98,0,"defineProperty"],[12,23,98,0],[12,24,98,0,"exports"],[12,31,98,0],[13,4,98,0,"enumerable"],[13,14,98,0],[14,4,98,0,"get"],[14,7,98,0],[14,18,98,0,"get"],[14,19,98,0],[15,6,98,0],[15,13,98,0,"_default"],[15,21,98,0],[16,4,98,0],[17,2,98,0],[18,2,14,0,"Object"],[18,8,14,0],[18,9,14,0,"defineProperty"],[18,23,14,0],[18,24,14,0,"exports"],[18,31,14,0],[19,4,14,0,"enumerable"],[19,14,14,0],[20,4,14,0,"get"],[20,7,14,0],[20,18,14,0,"get"],[20,19,14,0],[21,6,14,0],[21,13,14,0,"PlayAtLoginHandler"],[21,31,14,0],[22,4,14,0],[23,2,14,0],[24,2,4,0],[24,6,4,0,"_react"],[24,12,4,0],[24,15,4,0,"require"],[24,22,4,0],[24,23,4,0,"_dependencyMap"],[24,37,4,0],[25,2,5,0],[25,6,5,0,"_reactNativeAsyncStorageAsyncStorage"],[25,42,5,0],[25,45,5,0,"require"],[25,52,5,0],[25,53,5,0,"_dependencyMap"],[25,67,5,0],[26,2,5,0],[26,6,5,0,"AsyncStorage"],[26,18,5,0],[26,21,5,0,"_interopDefault"],[26,36,5,0],[26,37,5,0,"_reactNativeAsyncStorageAsyncStorage"],[26,73,5,0],[27,2,6,0],[27,6,6,0,"_storeAuthStore"],[27,21,6,0],[27,24,6,0,"require"],[27,31,6,0],[27,32,6,0,"_dependencyMap"],[27,46,6,0],[28,2,7,0],[28,6,7,0,"_storeFavoritesStore"],[28,26,7,0],[28,29,7,0,"require"],[28,36,7,0],[28,37,7,0,"_dependencyMap"],[28,51,7,0],[29,2,8,0],[29,6,8,0,"_hooksUseAudioPlayer"],[29,26,8,0],[29,29,8,0,"require"],[29,36,8,0],[29,37,8,0,"_dependencyMap"],[29,51,8,0],[30,2,9,0],[30,6,9,0,"_servicesStationService"],[30,29,9,0],[30,32,9,0,"require"],[30,39,9,0],[30,40,9,0,"_dependencyMap"],[30,54,9,0],[31,2,9,0],[31,6,9,0,"stationService"],[31,20,9,0],[31,23,9,0,"_interopDefault"],[31,38,9,0],[31,39,9,0,"_servicesStationService"],[31,62,9,0],[32,2,1,0],[33,2,2,0],[35,2,11,0],[35,8,11,6,"PLAY_AT_LOGIN_KEY"],[35,25,11,23],[35,28,11,26],[35,51,11,49],[36,2,12,0],[36,8,12,6,"LAST_PLAYED_STATION_KEY"],[36,31,12,29],[36,34,12,32],[36,66,12,64],[37,2,14,7],[37,8,14,13,"PlayAtLoginHandler"],[37,26,14,41],[37,29,14,44,"PlayAtLoginHandler"],[37,30,14,44],[37,35,14,50],[38,4,15,2],[38,10,15,8,"hasExecuted"],[38,21,15,19],[38,24,15,22],[38,28,15,22,"useRef"],[38,34,15,28],[38,35,15,28,"useRef"],[38,41,15,28],[38,43,15,29],[38,48,15,34],[38,49,15,35],[39,4,16,2],[39,10,16,8],[40,6,16,10,"isAuthenticated"],[41,4,16,26],[41,5,16,27],[41,8,16,30],[41,12,16,30,"useAuthStore"],[41,27,16,42],[41,28,16,42,"useAuthStore"],[41,40,16,42],[41,42,16,43],[41,43,16,44],[42,4,17,2],[42,10,17,8],[43,6,17,10,"favorites"],[44,4,17,20],[44,5,17,21],[44,8,17,24],[44,12,17,24,"useFavoritesStore"],[44,32,17,41],[44,33,17,41,"useFavoritesStore"],[44,50,17,41],[44,52,17,42],[44,53,17,43],[45,4,18,2],[45,10,18,8],[46,6,18,10,"playStation"],[47,4,18,22],[47,5,18,23],[47,8,18,26],[47,12,18,26,"useAudio"],[47,32,18,34],[47,33,18,34,"useAudio"],[47,41,18,34],[47,43,18,35],[47,44,18,36],[48,4,20,2],[48,8,20,2,"useEffect"],[48,14,20,11],[48,15,20,11,"useEffect"],[48,24,20,11],[48,26,20,12],[48,32,20,18],[49,6,21,4],[49,12,21,10,"executePlayAtLogin"],[49,30,21,28],[49,33,21,31],[49,39,21,31,"executePlayAtLogin"],[49,40,21,31],[49,45,21,43],[50,8,22,6],[51,8,23,6],[51,12,23,10,"hasExecuted"],[51,23,23,21],[51,24,23,22,"current"],[51,31,23,29],[51,33,23,31],[52,10,24,8],[53,8,25,6],[55,8,27,6],[56,8,28,6],[56,14,28,12],[56,18,28,16,"Promise"],[56,25,28,23],[56,26,28,24,"resolve"],[56,33,28,31],[56,37,28,35,"setTimeout"],[56,47,28,45],[56,48,28,46,"resolve"],[56,55,28,53],[56,57,28,55],[56,61,28,59],[56,62,28,60],[56,63,28,61],[58,8,30,6],[59,8,31,6],[59,12,31,10],[59,13,31,11,"isAuthenticated"],[59,28,31,26],[59,30,31,28],[60,10,32,8,"console"],[60,17,32,15],[60,18,32,16,"log"],[60,21,32,19],[60,22,32,20],[60,70,32,68],[60,71,32,69],[61,10,33,8],[62,8,34,6],[63,8,36,6],[63,12,36,10],[64,10,37,8],[64,16,37,14,"setting"],[64,23,37,21],[64,26,37,24],[64,32,37,30,"AsyncStorage"],[64,44,37,42],[64,45,37,42,"default"],[64,52,37,42],[64,53,37,43,"getItem"],[64,60,37,50],[64,61,37,51,"PLAY_AT_LOGIN_KEY"],[64,78,37,68],[64,79,37,69],[65,10,38,8,"console"],[65,17,38,15],[65,18,38,16,"log"],[65,21,38,19],[65,22,38,20],[65,46,38,44],[65,48,38,46,"setting"],[65,55,38,53],[65,56,38,54],[66,10,40,8],[66,14,40,12],[66,15,40,13,"setting"],[66,22,40,20],[66,26,40,24,"setting"],[66,33,40,31],[66,38,40,36],[66,43,40,41],[66,45,40,43],[67,12,41,10,"console"],[67,19,41,17],[67,20,41,18,"log"],[67,23,41,21],[67,24,41,22],[67,59,41,57],[67,60,41,58],[68,12,42,10],[69,10,43,8],[70,10,45,8,"hasExecuted"],[70,21,45,19],[70,22,45,20,"current"],[70,29,45,27],[70,32,45,30],[70,36,45,34],[71,10,47,8],[71,14,47,12,"stationToPlay"],[71,27,47,25],[71,30,47,28],[71,34,47,32],[72,10,49,8],[72,18,49,16,"setting"],[72,25,49,23],[73,12,50,10],[73,17,50,15],[73,30,50,28],[74,14,51,12],[75,14,52,12],[75,20,52,18,"lastPlayedJson"],[75,34,52,32],[75,37,52,35],[75,43,52,41,"AsyncStorage"],[75,55,52,53],[75,56,52,53,"default"],[75,63,52,53],[75,64,52,54,"getItem"],[75,71,52,61],[75,72,52,62,"LAST_PLAYED_STATION_KEY"],[75,95,52,85],[75,96,52,86],[76,14,53,12],[76,18,53,16,"lastPlayedJson"],[76,32,53,30],[76,34,53,32],[77,16,54,14,"stationToPlay"],[77,29,54,27],[77,32,54,30,"JSON"],[77,36,54,34],[77,37,54,35,"parse"],[77,42,54,40],[77,43,54,41,"lastPlayedJson"],[77,57,54,55],[77,58,54,56],[78,16,55,14,"console"],[78,23,55,21],[78,24,55,22,"log"],[78,27,55,25],[78,28,55,26],[78,64,55,62],[78,66,55,64,"stationToPlay"],[78,79,55,77],[78,81,55,79,"name"],[78,85,55,83],[78,86,55,84],[79,14,56,12],[80,14,57,12],[81,12,59,10],[81,17,59,15],[81,27,59,25],[82,14,60,12],[83,14,61,12],[83,18,61,16,"favorites"],[83,27,61,25],[83,31,61,29,"favorites"],[83,40,61,38],[83,41,61,39,"length"],[83,47,61,45],[83,50,61,48],[83,51,61,49],[83,53,61,51],[84,16,62,14,"stationToPlay"],[84,29,62,27],[84,32,62,30,"favorites"],[84,41,62,39],[84,42,62,40],[84,43,62,41],[84,44,62,42],[85,16,63,14,"console"],[85,23,63,21],[85,24,63,22,"log"],[85,27,63,25],[85,28,63,26],[85,67,63,65],[85,69,63,67,"stationToPlay"],[85,82,63,80],[85,84,63,82,"name"],[85,88,63,86],[85,89,63,87],[86,14,64,12],[87,14,65,12],[88,12,67,10],[88,17,67,15],[88,25,67,23],[89,14,68,12],[90,14,69,12],[90,18,69,16],[91,16,70,14],[91,22,70,20,"response"],[91,30,70,28],[91,33,70,31],[91,39,70,37,"stationService"],[91,53,70,51],[91,54,70,51,"default"],[91,61,70,51],[91,62,70,52,"getStations"],[91,73,70,63],[91,74,70,64],[92,18,70,66,"limit"],[92,23,70,71],[92,25,70,73],[93,16,70,76],[93,17,70,77],[93,18,70,78],[94,16,71,14],[94,20,71,18,"response"],[94,28,71,26],[94,30,71,28,"stations"],[94,38,71,36],[94,42,71,40,"response"],[94,50,71,48],[94,51,71,49,"stations"],[94,59,71,57],[94,60,71,58,"length"],[94,66,71,64],[94,69,71,67],[94,70,71,68],[94,72,71,70],[95,18,72,16],[95,24,72,22,"randomIndex"],[95,35,72,33],[95,38,72,36,"Math"],[95,42,72,40],[95,43,72,41,"floor"],[95,48,72,46],[95,49,72,47,"Math"],[95,53,72,51],[95,54,72,52,"random"],[95,60,72,58],[95,61,72,59],[95,62,72,60],[95,65,72,63,"response"],[95,73,72,71],[95,74,72,72,"stations"],[95,82,72,80],[95,83,72,81,"length"],[95,89,72,87],[95,90,72,88],[96,18,73,16,"stationToPlay"],[96,31,73,29],[96,34,73,32,"response"],[96,42,73,40],[96,43,73,41,"stations"],[96,51,73,49],[96,52,73,50,"randomIndex"],[96,63,73,61],[96,64,73,62],[97,18,74,16,"console"],[97,25,74,23],[97,26,74,24,"log"],[97,29,74,27],[97,30,74,28],[97,61,74,59],[97,63,74,61,"stationToPlay"],[97,76,74,74],[97,78,74,76,"name"],[97,82,74,80],[97,83,74,81],[98,16,75,14],[99,14,76,12],[99,15,76,13],[99,16,76,14],[99,23,76,21,"error"],[99,28,76,26],[99,30,76,28],[100,16,77,14,"console"],[100,23,77,21],[100,24,77,22,"error"],[100,29,77,27],[100,30,77,28],[100,77,77,75],[100,79,77,77,"error"],[100,84,77,82],[100,85,77,83],[101,14,78,12],[102,14,79,12],[103,10,80,8],[104,10,82,8],[104,14,82,12,"stationToPlay"],[104,27,82,25],[104,29,82,27],[105,12,83,10,"console"],[105,19,83,17],[105,20,83,18,"log"],[105,23,83,21],[105,24,83,22],[105,58,83,56],[105,60,83,58,"stationToPlay"],[105,73,83,71],[105,74,83,72,"name"],[105,78,83,76],[105,79,83,77],[106,12,84,10],[106,18,84,16,"playStation"],[106,29,84,27],[106,30,84,28,"stationToPlay"],[106,43,84,41],[106,44,84,42],[107,10,85,8],[108,8,86,6],[108,9,86,7],[108,10,86,8],[108,17,86,15,"error"],[108,22,86,20],[108,24,86,22],[109,10,87,8,"console"],[109,17,87,15],[109,18,87,16,"error"],[109,23,87,21],[109,24,87,22],[109,46,87,44],[109,48,87,46,"error"],[109,53,87,51],[109,54,87,52],[110,8,88,6],[111,6,89,4],[111,7,89,5],[112,6,91,4,"executePlayAtLogin"],[112,24,91,22],[112,25,91,23],[112,26,91,24],[113,4,92,2],[113,5,92,3],[113,7,92,5],[113,8,92,6,"isAuthenticated"],[113,23,92,21],[113,25,92,23,"favorites"],[113,34,92,32],[113,36,92,34,"playStation"],[113,47,92,45],[113,48,92,46],[113,49,92,47],[115,4,94,2],[116,4,95,2],[116,11,95,9],[116,15,95,13],[117,2,96,0],[117,3,96,1],[118,2,98,0],[118,6,98,0,"_default"],[118,14,98,0],[118,17,98,15,"PlayAtLoginHandler"],[118,35,98,33],[119,0,98,34],[119,3]],"functionMap":{"names":["<global>","PlayAtLoginHandler","useEffect$argument_0","executePlayAtLogin","Promise$argument_0"],"mappings":"AAA;4CCa;YCM;+BCC;wBCO,oCD;KD6D;GDG;CDI"},"hasCjsExports":false},"type":"js/module"}]}