{"dependencies":[{"name":"expo-asset","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}}],"key":"ZXJFWHziJpBZf3W7vl00wXf6fd8=","exportNames":["*"],"imports":1}},{"name":"expo-modules-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":36},"end":{"line":2,"column":45,"index":81}}],"key":"fU8WLIPqoAGygnPbZ/QJiQQfXEY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.resolveSource = resolveSource;\n  exports.resolveSourceWithDownload = resolveSourceWithDownload;\n  var _expoAsset = require(_dependencyMap[0], \"expo-asset\");\n  var _expoModulesCore = require(_dependencyMap[1], \"expo-modules-core\");\n  function getAssetFromSource(source) {\n    if (!source) {\n      return null;\n    }\n    if (source instanceof _expoAsset.Asset) {\n      return source;\n    }\n    if (typeof source === 'number') {\n      return _expoAsset.Asset.fromModule(source);\n    }\n    if (typeof source === 'object') {\n      if ('assetId' in source && typeof source.assetId === 'number') {\n        return _expoAsset.Asset.fromModule(source.assetId);\n      }\n      if ('uri' in source && typeof source.uri === 'string') {\n        return _expoAsset.Asset.fromURI(source.uri);\n      }\n    }\n    if (typeof source === 'string') {\n      return _expoAsset.Asset.fromURI(source);\n    }\n    return null;\n  }\n  function createSourceFromAsset(asset, extras = {}) {\n    const uri = asset.localUri ?? asset.uri;\n    const result = {\n      uri\n    };\n    if (extras.assetId != null) {\n      result.assetId = extras.assetId;\n    }\n    if (extras.headers) {\n      result.headers = extras.headers;\n    }\n    return result;\n  }\n  function resolveSource(source) {\n    if (source == null) {\n      return null;\n    }\n    if (source instanceof _expoAsset.Asset) {\n      return createSourceFromAsset(source);\n    }\n    if (typeof source === 'string') {\n      return {\n        uri: source\n      };\n    }\n    if (typeof source === 'number') {\n      const asset = _expoAsset.Asset.fromModule(source);\n      return createSourceFromAsset(asset, {\n        assetId: source\n      });\n    }\n    if (typeof source === 'object') {\n      if ('assetId' in source && typeof source.assetId === 'number') {\n        const asset = _expoAsset.Asset.fromModule(source.assetId);\n        return Object.assign({}, source, {\n          uri: asset.localUri ?? asset.uri\n        });\n      }\n      if ('uri' in source && typeof source.uri === 'string') {\n        return source;\n      }\n    }\n    return source ?? null;\n  }\n  /**\n   * Resolves and optionally downloads an audio source before loading.\n   * Similar to expo-av's getNativeSourceAndFullInitialStatusForLoadAsync but simplified for expo-audio.\n   */\n  async function resolveSourceWithDownload(source) {\n    const asset = getAssetFromSource(source);\n    const fallbackSource = resolveSource(source);\n    if (asset) {\n      let assetToDownload = asset;\n      try {\n        // iOS AVPlayer fails to load the asset if the type is not set or can't be inferred\n        // since this is an audio asset, we can safely set the type to mp3 or any other audio type\n        // and iOS will be able to download and play the asset\n        // Since expo-asset caches, this will only run once per asset, as long as the asset is not deleted from the cache\n        if (!assetToDownload.type) {\n          assetToDownload = new _expoAsset.Asset({\n            name: asset.name,\n            type: 'mp3',\n            uri: asset.uri\n          });\n        }\n        // FYI: downloadAsync is a no-op on web and immediately returns a promise that resolves to the original url\n        // TODO(@hirbod): evaluate if we should implement downloadAsync for web instead\n        await assetToDownload.downloadAsync();\n        // Use the local URI if available after download\n        if (assetToDownload.localUri) {\n          let finalUri = assetToDownload.localUri;\n          // On web, we need to fetch the audio file and create a blob URL\n          // this fully downloads the file to the user's device memory and makes it available for the user to play\n          // fetch() is subject to CORS restrictions, so we need to document this for the users on web\n          // TODO(@hirbod): evaluate if we should implement a downloadAsync for web instead of using fetch here\n          if (_expoModulesCore.Platform.OS === 'web') {\n            const response = await fetch(assetToDownload.localUri);\n            const blob = await response.blob();\n            finalUri = URL.createObjectURL(blob);\n          }\n          if (fallbackSource && typeof fallbackSource === 'object') {\n            return Object.assign({}, fallbackSource, {\n              uri: finalUri\n            });\n          }\n          return {\n            uri: finalUri\n          };\n        } else {\n          console.warn('No localUri found, asset may not have downloaded properly, returning the original source');\n        }\n      } catch (error) {\n        // If download fails, fall back to original source\n        console.warn('expo-audio: Failed to download asset, falling back to original source:', error);\n      }\n    }\n    // Fallback to normal resolution\n    return fallbackSource;\n  }\n});","lineCount":133,"map":[[7,2,37,0,"exports"],[7,9,37,0],[7,10,37,0,"resolveSource"],[7,23,37,0],[7,26,37,0,"resolveSource"],[7,39,37,0],[8,2,69,0,"exports"],[8,9,69,0],[8,10,69,0,"resolveSourceWithDownload"],[8,35,69,0],[8,38,69,0,"resolveSourceWithDownload"],[8,63,69,0],[9,2,1,0],[9,6,1,0,"_expoAsset"],[9,16,1,0],[9,19,1,0,"require"],[9,26,1,0],[9,27,1,0,"_dependencyMap"],[9,41,1,0],[10,2,2,0],[10,6,2,0,"_expoModulesCore"],[10,22,2,0],[10,25,2,0,"require"],[10,32,2,0],[10,33,2,0,"_dependencyMap"],[10,47,2,0],[11,2,3,0],[11,11,3,9,"getAssetFromSource"],[11,29,3,27,"getAssetFromSource"],[11,30,3,28,"source"],[11,36,3,34],[11,38,3,36],[12,4,4,4],[12,8,4,8],[12,9,4,9,"source"],[12,15,4,15],[12,17,4,17],[13,6,5,8],[13,13,5,15],[13,17,5,19],[14,4,6,4],[15,4,7,4],[15,8,7,8,"source"],[15,14,7,14],[15,26,7,26,"Asset"],[15,36,7,31],[15,37,7,31,"Asset"],[15,42,7,31],[15,44,7,33],[16,6,8,8],[16,13,8,15,"source"],[16,19,8,21],[17,4,9,4],[18,4,10,4],[18,8,10,8],[18,15,10,15,"source"],[18,21,10,21],[18,26,10,26],[18,34,10,34],[18,36,10,36],[19,6,11,8],[19,13,11,15,"Asset"],[19,23,11,20],[19,24,11,20,"Asset"],[19,29,11,20],[19,30,11,21,"fromModule"],[19,40,11,31],[19,41,11,32,"source"],[19,47,11,38],[19,48,11,39],[20,4,12,4],[21,4,13,4],[21,8,13,8],[21,15,13,15,"source"],[21,21,13,21],[21,26,13,26],[21,34,13,34],[21,36,13,36],[22,6,14,8],[22,10,14,12],[22,19,14,21],[22,23,14,25,"source"],[22,29,14,31],[22,33,14,35],[22,40,14,42,"source"],[22,46,14,48],[22,47,14,49,"assetId"],[22,54,14,56],[22,59,14,61],[22,67,14,69],[22,69,14,71],[23,8,15,12],[23,15,15,19,"Asset"],[23,25,15,24],[23,26,15,24,"Asset"],[23,31,15,24],[23,32,15,25,"fromModule"],[23,42,15,35],[23,43,15,36,"source"],[23,49,15,42],[23,50,15,43,"assetId"],[23,57,15,50],[23,58,15,51],[24,6,16,8],[25,6,17,8],[25,10,17,12],[25,15,17,17],[25,19,17,21,"source"],[25,25,17,27],[25,29,17,31],[25,36,17,38,"source"],[25,42,17,44],[25,43,17,45,"uri"],[25,46,17,48],[25,51,17,53],[25,59,17,61],[25,61,17,63],[26,8,18,12],[26,15,18,19,"Asset"],[26,25,18,24],[26,26,18,24,"Asset"],[26,31,18,24],[26,32,18,25,"fromURI"],[26,39,18,32],[26,40,18,33,"source"],[26,46,18,39],[26,47,18,40,"uri"],[26,50,18,43],[26,51,18,44],[27,6,19,8],[28,4,20,4],[29,4,21,4],[29,8,21,8],[29,15,21,15,"source"],[29,21,21,21],[29,26,21,26],[29,34,21,34],[29,36,21,36],[30,6,22,8],[30,13,22,15,"Asset"],[30,23,22,20],[30,24,22,20,"Asset"],[30,29,22,20],[30,30,22,21,"fromURI"],[30,37,22,28],[30,38,22,29,"source"],[30,44,22,35],[30,45,22,36],[31,4,23,4],[32,4,24,4],[32,11,24,11],[32,15,24,15],[33,2,25,0],[34,2,26,0],[34,11,26,9,"createSourceFromAsset"],[34,32,26,30,"createSourceFromAsset"],[34,33,26,31,"asset"],[34,38,26,36],[34,40,26,38,"extras"],[34,46,26,44],[34,49,26,47],[34,50,26,48],[34,51,26,49],[34,53,26,51],[35,4,27,4],[35,10,27,10,"uri"],[35,13,27,13],[35,16,27,16,"asset"],[35,21,27,21],[35,22,27,22,"localUri"],[35,30,27,30],[35,34,27,34,"asset"],[35,39,27,39],[35,40,27,40,"uri"],[35,43,27,43],[36,4,28,4],[36,10,28,10,"result"],[36,16,28,16],[36,19,28,19],[37,6,28,21,"uri"],[38,4,28,25],[38,5,28,26],[39,4,29,4],[39,8,29,8,"extras"],[39,14,29,14],[39,15,29,15,"assetId"],[39,22,29,22],[39,26,29,26],[39,30,29,30],[39,32,29,32],[40,6,30,8,"result"],[40,12,30,14],[40,13,30,15,"assetId"],[40,20,30,22],[40,23,30,25,"extras"],[40,29,30,31],[40,30,30,32,"assetId"],[40,37,30,39],[41,4,31,4],[42,4,32,4],[42,8,32,8,"extras"],[42,14,32,14],[42,15,32,15,"headers"],[42,22,32,22],[42,24,32,24],[43,6,33,8,"result"],[43,12,33,14],[43,13,33,15,"headers"],[43,20,33,22],[43,23,33,25,"extras"],[43,29,33,31],[43,30,33,32,"headers"],[43,37,33,39],[44,4,34,4],[45,4,35,4],[45,11,35,11,"result"],[45,17,35,17],[46,2,36,0],[47,2,37,7],[47,11,37,16,"resolveSource"],[47,24,37,29,"resolveSource"],[47,25,37,30,"source"],[47,31,37,36],[47,33,37,38],[48,4,38,4],[48,8,38,8,"source"],[48,14,38,14],[48,18,38,18],[48,22,38,22],[48,24,38,24],[49,6,39,8],[49,13,39,15],[49,17,39,19],[50,4,40,4],[51,4,41,4],[51,8,41,8,"source"],[51,14,41,14],[51,26,41,26,"Asset"],[51,36,41,31],[51,37,41,31,"Asset"],[51,42,41,31],[51,44,41,33],[52,6,42,8],[52,13,42,15,"createSourceFromAsset"],[52,34,42,36],[52,35,42,37,"source"],[52,41,42,43],[52,42,42,44],[53,4,43,4],[54,4,44,4],[54,8,44,8],[54,15,44,15,"source"],[54,21,44,21],[54,26,44,26],[54,34,44,34],[54,36,44,36],[55,6,45,8],[55,13,45,15],[56,8,45,17,"uri"],[56,11,45,20],[56,13,45,22,"source"],[57,6,45,29],[57,7,45,30],[58,4,46,4],[59,4,47,4],[59,8,47,8],[59,15,47,15,"source"],[59,21,47,21],[59,26,47,26],[59,34,47,34],[59,36,47,36],[60,6,48,8],[60,12,48,14,"asset"],[60,17,48,19],[60,20,48,22,"Asset"],[60,30,48,27],[60,31,48,27,"Asset"],[60,36,48,27],[60,37,48,28,"fromModule"],[60,47,48,38],[60,48,48,39,"source"],[60,54,48,45],[60,55,48,46],[61,6,49,8],[61,13,49,15,"createSourceFromAsset"],[61,34,49,36],[61,35,49,37,"asset"],[61,40,49,42],[61,42,49,44],[62,8,49,46,"assetId"],[62,15,49,53],[62,17,49,55,"source"],[63,6,49,62],[63,7,49,63],[63,8,49,64],[64,4,50,4],[65,4,51,4],[65,8,51,8],[65,15,51,15,"source"],[65,21,51,21],[65,26,51,26],[65,34,51,34],[65,36,51,36],[66,6,52,8],[66,10,52,12],[66,19,52,21],[66,23,52,25,"source"],[66,29,52,31],[66,33,52,35],[66,40,52,42,"source"],[66,46,52,48],[66,47,52,49,"assetId"],[66,54,52,56],[66,59,52,61],[66,67,52,69],[66,69,52,71],[67,8,53,12],[67,14,53,18,"asset"],[67,19,53,23],[67,22,53,26,"Asset"],[67,32,53,31],[67,33,53,31,"Asset"],[67,38,53,31],[67,39,53,32,"fromModule"],[67,49,53,42],[67,50,53,43,"source"],[67,56,53,49],[67,57,53,50,"assetId"],[67,64,53,57],[67,65,53,58],[68,8,54,12],[68,15,54,12,"Object"],[68,21,54,12],[68,22,54,12,"assign"],[68,28,54,12],[68,33,55,19,"source"],[68,39,55,25],[69,10,56,16,"uri"],[69,13,56,19],[69,15,56,21,"asset"],[69,20,56,26],[69,21,56,27,"localUri"],[69,29,56,35],[69,33,56,39,"asset"],[69,38,56,44],[69,39,56,45,"uri"],[70,8,56,48],[71,6,58,8],[72,6,59,8],[72,10,59,12],[72,15,59,17],[72,19,59,21,"source"],[72,25,59,27],[72,29,59,31],[72,36,59,38,"source"],[72,42,59,44],[72,43,59,45,"uri"],[72,46,59,48],[72,51,59,53],[72,59,59,61],[72,61,59,63],[73,8,60,12],[73,15,60,19,"source"],[73,21,60,25],[74,6,61,8],[75,4,62,4],[76,4,63,4],[76,11,63,11,"source"],[76,17,63,17],[76,21,63,21],[76,25,63,25],[77,2,64,0],[78,2,65,0],[79,0,66,0],[80,0,67,0],[81,0,68,0],[82,2,69,7],[82,17,69,22,"resolveSourceWithDownload"],[82,42,69,47,"resolveSourceWithDownload"],[82,43,69,48,"source"],[82,49,69,54],[82,51,69,56],[83,4,70,4],[83,10,70,10,"asset"],[83,15,70,15],[83,18,70,18,"getAssetFromSource"],[83,36,70,36],[83,37,70,37,"source"],[83,43,70,43],[83,44,70,44],[84,4,71,4],[84,10,71,10,"fallbackSource"],[84,24,71,24],[84,27,71,27,"resolveSource"],[84,40,71,40],[84,41,71,41,"source"],[84,47,71,47],[84,48,71,48],[85,4,72,4],[85,8,72,8,"asset"],[85,13,72,13],[85,15,72,15],[86,6,73,8],[86,10,73,12,"assetToDownload"],[86,25,73,27],[86,28,73,30,"asset"],[86,33,73,35],[87,6,74,8],[87,10,74,12],[88,8,75,12],[89,8,76,12],[90,8,77,12],[91,8,78,12],[92,8,79,12],[92,12,79,16],[92,13,79,17,"assetToDownload"],[92,28,79,32],[92,29,79,33,"type"],[92,33,79,37],[92,35,79,39],[93,10,80,16,"assetToDownload"],[93,25,80,31],[93,28,80,34],[93,32,80,38,"Asset"],[93,42,80,43],[93,43,80,43,"Asset"],[93,48,80,43],[93,49,80,44],[94,12,81,20,"name"],[94,16,81,24],[94,18,81,26,"asset"],[94,23,81,31],[94,24,81,32,"name"],[94,28,81,36],[95,12,82,20,"type"],[95,16,82,24],[95,18,82,26],[95,23,82,31],[96,12,83,20,"uri"],[96,15,83,23],[96,17,83,25,"asset"],[96,22,83,30],[96,23,83,31,"uri"],[97,10,84,16],[97,11,84,17],[97,12,84,18],[98,8,85,12],[99,8,86,12],[100,8,87,12],[101,8,88,12],[101,14,88,18,"assetToDownload"],[101,29,88,33],[101,30,88,34,"downloadAsync"],[101,43,88,47],[101,44,88,48],[101,45,88,49],[102,8,89,12],[103,8,90,12],[103,12,90,16,"assetToDownload"],[103,27,90,31],[103,28,90,32,"localUri"],[103,36,90,40],[103,38,90,42],[104,10,91,16],[104,14,91,20,"finalUri"],[104,22,91,28],[104,25,91,31,"assetToDownload"],[104,40,91,46],[104,41,91,47,"localUri"],[104,49,91,55],[105,10,92,16],[106,10,93,16],[107,10,94,16],[108,10,95,16],[109,10,96,16],[109,14,96,20,"Platform"],[109,30,96,28],[109,31,96,28,"Platform"],[109,39,96,28],[109,40,96,29,"OS"],[109,42,96,31],[109,47,96,36],[109,52,96,41],[109,54,96,43],[110,12,97,20],[110,18,97,26,"response"],[110,26,97,34],[110,29,97,37],[110,35,97,43,"fetch"],[110,40,97,48],[110,41,97,49,"assetToDownload"],[110,56,97,64],[110,57,97,65,"localUri"],[110,65,97,73],[110,66,97,74],[111,12,98,20],[111,18,98,26,"blob"],[111,22,98,30],[111,25,98,33],[111,31,98,39,"response"],[111,39,98,47],[111,40,98,48,"blob"],[111,44,98,52],[111,45,98,53],[111,46,98,54],[112,12,99,20,"finalUri"],[112,20,99,28],[112,23,99,31,"URL"],[112,26,99,34],[112,27,99,35,"createObjectURL"],[112,42,99,50],[112,43,99,51,"blob"],[112,47,99,55],[112,48,99,56],[113,10,100,16],[114,10,101,16],[114,14,101,20,"fallbackSource"],[114,28,101,34],[114,32,101,38],[114,39,101,45,"fallbackSource"],[114,53,101,59],[114,58,101,64],[114,66,101,72],[114,68,101,74],[115,12,102,20],[115,19,102,20,"Object"],[115,25,102,20],[115,26,102,20,"assign"],[115,32,102,20],[115,37,103,27,"fallbackSource"],[115,51,103,41],[116,14,104,24,"uri"],[116,17,104,27],[116,19,104,29,"finalUri"],[117,12,104,37],[118,10,106,16],[119,10,107,16],[119,17,107,23],[120,12,107,25,"uri"],[120,15,107,28],[120,17,107,30,"finalUri"],[121,10,107,39],[121,11,107,40],[122,8,108,12],[122,9,108,13],[122,15,109,17],[123,10,110,16,"console"],[123,17,110,23],[123,18,110,24,"warn"],[123,22,110,28],[123,23,110,29],[123,113,110,119],[123,114,110,120],[124,8,111,12],[125,6,112,8],[125,7,112,9],[125,8,113,8],[125,15,113,15,"error"],[125,20,113,20],[125,22,113,22],[126,8,114,12],[127,8,115,12,"console"],[127,15,115,19],[127,16,115,20,"warn"],[127,20,115,24],[127,21,115,25],[127,93,115,97],[127,95,115,99,"error"],[127,100,115,104],[127,101,115,105],[128,6,116,8],[129,4,117,4],[130,4,118,4],[131,4,119,4],[131,11,119,11,"fallbackSource"],[131,25,119,25],[132,2,120,0],[133,0,120,1],[133,3]],"functionMap":{"names":["<global>","getAssetFromSource","createSourceFromAsset","resolveSource","resolveSourceWithDownload"],"mappings":"AAA;ACE;CDsB;AEC;CFU;OGC;CH2B;OIK;CJmD"},"hasCjsExports":false},"type":"js/module"}]}