{"dependencies":[{"name":"./api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":24,"index":77}}],"key":"FbKPDeRJ9TF3vg1eKYKz12urgic=","exportNames":["*"],"imports":1}},{"name":"../hooks/useQueries","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":78},"end":{"line":3,"column":59,"index":137}}],"key":"phT6MZNOL4hkxh8sr2vVx47qEig=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return b}}),Object.defineProperty(_e,\"preloadUserFavorites\",{enumerable:!0,get:function(){return c}}),Object.defineProperty(_e,\"preloadPublicProfileFavorites\",{enumerable:!0,get:function(){return u}}),Object.defineProperty(_e,\"getPreloadedFavorites\",{enumerable:!0,get:function(){return f}}),Object.defineProperty(_e,\"clearPreloadedCache\",{enumerable:!0,get:function(){return p}}),Object.defineProperty(_e,\"preloadEssentialData\",{enumerable:!0,get:function(){return P}});var e,t=r(d[0]),o=(e=t)&&e.__esModule?e:{default:e},l=r(d[1]);const n=new Map,s=new Set,c=async(e,t)=>{if(s.has(e))return;const c=n.get(e),u=Date.now();if(!(c&&u-c.loadedAt<l.CACHE_TTL.COMMUNITY_FAVORITES)){s.add(e);try{const l=await o.default.get(`https://themegaradio.com/api/users/${e}/favorites`),s=l.data?.favorites||l.data||[];n.set(e,{userId:e,favorites:s,loadedAt:u}),t.setQueryData(['userFavorites',e],s)}catch(t){console.log(`[Preload] Failed to preload favorites for ${e}`)}finally{s.delete(e)}}},u=async(e,t)=>{if(!e||0===e.length)return;const o=e.slice(0,6),l=e.slice(6);console.log(`[Preload] Starting preload for ${o.length} priority users`),await Promise.all(o.map(e=>c(e._id,t))),console.log(\"[Preload] Priority users preloaded\"),l.length>0&&(console.log(`[Preload] Starting background preload for ${l.length} remaining users`),setTimeout(async()=>{for(const e of l)await c(e._id,t),await new Promise(e=>setTimeout(e,100));console.log(\"[Preload] Background preload complete\")},1e3))},f=e=>{const t=n.get(e);if(!t)return null;return Date.now()-t.loadedAt>l.CACHE_TTL.COMMUNITY_FAVORITES?(n.delete(e),null):t.favorites},p=()=>{n.clear(),s.clear()},P=async e=>{console.log('[Preload] Starting essential data preload');try{const t=await o.default.get('https://themegaradio.com/api/public-profiles',{params:{limit:20}}),l=t.data?.data||t.data||[];e.setQueryData(['publicProfiles',10],l.slice(0,10)),e.setQueryData(['publicProfiles',20],l),await u(l,e),console.log('[Preload] Essential data preload complete')}catch(e){console.log('[Preload] Error during essential data preload:',e)}};var b={preloadUserFavorites:c,preloadPublicProfileFavorites:u,getPreloadedFavorites:f,clearPreloadedCache:p,preloadEssentialData:P}});","lineCount":1,"map":[[1,92,158,0,"Object"],[1,99,158,0,"defineProperty"],[1,114,158,0,"_e"],[1,117,158,0],[1,128,158,0,"enumerable"],[1,140,158,0],[1,142,158,0,"get"],[1,146,158,0],[1,164,158,0,"_default"],[1,165,158,0],[1,169,30,0,"Object"],[1,176,30,0,"defineProperty"],[1,191,30,0,"_e"],[1,194,30,0],[1,218,30,0,"enumerable"],[1,230,30,0],[1,232,30,0,"get"],[1,236,30,0],[1,254,30,0,"preloadUserFavorites"],[1,255,30,0],[1,259,70,0,"Object"],[1,266,70,0,"defineProperty"],[1,281,70,0,"_e"],[1,284,70,0],[1,317,70,0,"enumerable"],[1,329,70,0],[1,331,70,0,"get"],[1,335,70,0],[1,353,70,0,"preloadPublicProfileFavorites"],[1,354,70,0],[1,358,108,0,"Object"],[1,365,108,0,"defineProperty"],[1,380,108,0,"_e"],[1,383,108,0],[1,408,108,0,"enumerable"],[1,420,108,0],[1,422,108,0,"get"],[1,426,108,0],[1,444,108,0,"getPreloadedFavorites"],[1,445,108,0],[1,449,125,0,"Object"],[1,456,125,0,"defineProperty"],[1,471,125,0,"_e"],[1,474,125,0],[1,497,125,0,"enumerable"],[1,509,125,0],[1,511,125,0,"get"],[1,515,125,0],[1,533,125,0,"clearPreloadedCache"],[1,534,125,0],[1,538,134,0,"Object"],[1,545,134,0,"defineProperty"],[1,560,134,0,"_e"],[1,563,134,0],[1,587,134,0,"enumerable"],[1,599,134,0],[1,601,134,0,"get"],[1,605,134,0],[1,623,134,0,"preloadEssentialData"],[1,624,134,0],[1,628,2,0],[1,632],[1,634,2,0,"_api"],[1,636,2,0,"r"],[1,638,2,0,"d"],[1,640,2,0],[1,644,2,0,"api"],[1,647],[1,649,2,0,"_api"],[1,653],[1,680,3,0,"_hooksUseQueries"],[1,682,3,0,"r"],[1,684,3,0,"d"],[1,686,3,0],[1,690,22,0],[1,696,22,6,"preloadedFavoritesCache"],[1,698,22,32],[1,702,22,36,"Map"],[1,706,25,6,"loadingUsers"],[1,708,25,21],[1,712,25,25,"Set"],[1,716,30,13,"preloadUserFavorites"],[1,718,30,36,"async"],[1,724,31,2,"userId"],[1,726,32,2,"queryClient"],[1,731,35,2],[1,734,35,6,"loadingUsers"],[1,736,35,19,"has"],[1,740,35,23,"userId"],[1,743,35,32],[1,750,37,2],[1,756,37,8,"cached"],[1,758,37,17,"preloadedFavoritesCache"],[1,760,37,41,"get"],[1,764,37,45,"userId"],[1,767,38,8,"now"],[1,769,38,14,"Date"],[1,774,38,19,"now"],[1,780,41,2],[1,785,41,6,"cached"],[1,788,41,17,"now"],[1,790,41,23,"cached"],[1,792,41,30,"loadedAt"],[1,801,41,42,"CACHE_TTL"],[1,803,41,51,"CACHE_TTL"],[1,813,41,52,"COMMUNITY_FAVORITES"],[1,834,41,2],[1,835,45,2,"loadingUsers"],[1,837,45,15,"add"],[1,841,45,19,"userId"],[1,844,47,2],[1,848,48,4],[1,854,48,10,"response"],[1,862,48,27,"api"],[1,864,48,30,"default"],[1,872,48,31,"get"],[1,876,48,35],[1,914,48,73,"userId"],[1,929,49,10,"favorites"],[1,931,49,22,"response"],[1,933,49,31,"data"],[1,939,49,37,"favorites"],[1,950,49,50,"response"],[1,952,49,59,"data"],[1,958,49,67],[1,961,52,4,"preloadedFavoritesCache"],[1,963,52,28,"set"],[1,967,52,32,"userId"],[1,969,52,40],[1,970,53,6,"userId"],[1,979,54,6,"favorites"],[1,991,55,6,"loadedAt"],[1,1000,55,16,"now"],[1,1004,59,4,"queryClient"],[1,1006,59,16,"setQueryData"],[1,1019,59,29],[1,1020,59,30],[1,1036,59,47,"userId"],[1,1039,59,56,"favorites"],[1,1041,60,2],[1,1042,60,4],[1,1048,60,11,"error"],[1,1051,61,4,"console"],[1,1059,61,12,"log"],[1,1063,61,16],[1,1108,61,61,"userId"],[1,1112,62,2],[1,1113,62,3],[1,1121,63,4,"loadingUsers"],[1,1123,63,17,"delete"],[1,1130,63,24,"userId"],[1,1132,64,2],[1,1133,43,2],[1,1136,70,13,"preloadPublicProfileFavorites"],[1,1138,70,45,"async"],[1,1144,71,2,"profiles"],[1,1146,72,2,"queryClient"],[1,1151,74,2],[1,1155,74,7,"profiles"],[1,1158,74,39],[1,1162,74,19,"profiles"],[1,1164,74,28,"length"],[1,1171,74,42],[1,1178,77,2],[1,1184,77,8,"priorityUsers"],[1,1186,77,24,"profiles"],[1,1188,77,33,"slice"],[1,1194,77,39],[1,1196,77,42],[1,1199,78,8,"remainingUsers"],[1,1201,78,25,"profiles"],[1,1203,78,34,"slice"],[1,1209,78,40],[1,1212,80,2,"console"],[1,1220,80,10,"log"],[1,1224,80,14],[1,1258,80,48,"priorityUsers"],[1,1260,80,62,"length"],[1,1291,83,8,"Promise"],[1,1299,83,16,"all"],[1,1303,84,4,"priorityUsers"],[1,1305,84,18,"map"],[1,1309,84,22,"user"],[1,1312,84,30,"preloadUserFavorites"],[1,1314,84,51,"user"],[1,1316,84,56,"_id"],[1,1320,84,61,"queryClient"],[1,1325,87,2,"console"],[1,1333,87,10,"log"],[1,1337,87,14],[1,1375,90,6,"remainingUsers"],[1,1377,90,21,"length"],[1,1384,90,30],[1,1388,91,4,"console"],[1,1396,91,12,"log"],[1,1400,91,16],[1,1445,91,61,"remainingUsers"],[1,1447,91,76,"length"],[1,1473,94,4,"setTimeout"],[1,1484,94,15,"async"],[1,1494,95,6],[1,1498,95,11],[1,1504,95,17,"user"],[1,1509,95,25,"remainingUsers"],[1,1517,96,14,"preloadUserFavorites"],[1,1519,96,35,"user"],[1,1521,96,40,"_id"],[1,1525,96,45,"queryClient"],[1,1534,98,14],[1,1538,98,18,"Promise"],[1,1546,98,26,"resolve"],[1,1549,98,37,"setTimeout"],[1,1560,98,48,"resolve"],[1,1562,98,57],[1,1568,100,6,"console"],[1,1576,100,14,"log"],[1,1580,100,18],[1,1622,101,7],[1,1629,108,13,"getPreloadedFavorites"],[1,1631,108,38,"userId"],[1,1635,109,2],[1,1641,109,8,"cached"],[1,1643,109,17,"preloadedFavoritesCache"],[1,1645,109,41,"get"],[1,1649,109,45,"userId"],[1,1652,110,2],[1,1656,110,7,"cached"],[1,1658,110,15],[1,1665,110,22],[1,1670,114,2],[1,1677,112,14,"Date"],[1,1682,112,19,"now"],[1,1688,114,13,"cached"],[1,1690,114,20,"loadedAt"],[1,1699,114,32,"CACHE_TTL"],[1,1701,114,41,"CACHE_TTL"],[1,1711,114,42,"COMMUNITY_FAVORITES"],[1,1732,115,4,"preloadedFavoritesCache"],[1,1734,115,28,"delete"],[1,1741,115,35,"userId"],[1,1744,116,11],[1,1750,119,9,"cached"],[1,1752,119,16,"favorites"],[1,1763,125,13,"clearPreloadedCache"],[1,1765,125,35,"clearPreloadedCache"],[1,1770,126,2,"preloadedFavoritesCache"],[1,1772,126,26,"clear"],[1,1780,127,2,"loadingUsers"],[1,1782,127,15,"clear"],[1,1791,134,13,"preloadEssentialData"],[1,1793,134,36,"async"],[1,1803,135,2,"console"],[1,1811,135,10,"log"],[1,1815,135,14],[1,1860,137,2],[1,1864,139,4],[1,1870,139,10,"profilesResponse"],[1,1878,139,35,"api"],[1,1880,139,38,"default"],[1,1888,139,39,"get"],[1,1892,139,43],[1,1939,139,91],[1,1940,140,6,"params"],[1,1947,140,14],[1,1948,140,16,"limit"],[1,1954,140,23],[1,1960,143,10,"profiles"],[1,1962,143,21,"profilesResponse"],[1,1964,143,38,"data"],[1,1970,143,44,"data"],[1,1976,143,52,"profilesResponse"],[1,1978,143,69,"data"],[1,1984,143,77],[1,1987,146,4,"queryClient"],[1,1989,146,16,"setQueryData"],[1,2002,146,29],[1,2003,146,30],[1,2020,146,48],[1,2024,146,53,"profiles"],[1,2026,146,62,"slice"],[1,2032,146,68],[1,2034,146,71],[1,2039,147,4,"queryClient"],[1,2041,147,16,"setQueryData"],[1,2054,147,29],[1,2055,147,30],[1,2072,147,48],[1,2076,147,53,"profiles"],[1,2085,150,10,"preloadPublicProfileFavorites"],[1,2087,150,40,"profiles"],[1,2089,150,50,"queryClient"],[1,2092,152,4,"console"],[1,2100,152,12,"log"],[1,2104,152,16],[1,2148,153,2],[1,2149,153,4],[1,2155,153,11,"error"],[1,2158,154,4,"console"],[1,2166,154,12,"log"],[1,2170,154,16],[1,2219,154,66,"error"],[1,2221,155,2],[1,2224,158,0],[1,2228,158,0,"_default"],[1,2230,158,15],[1,2231,159,2,"preloadUserFavorites"],[1,2254,160,2,"preloadPublicProfileFavorites"],[1,2286,161,2,"getPreloadedFavorites"],[1,2310,162,2,"clearPreloadedCache"],[1,2332,163,2,"preloadEssentialData"],[1,2355,164,2],[1,2358]],"functionMap":{"names":["<global>","preloadUserFavorites","preloadPublicProfileFavorites","priorityUsers.map$argument_0","setTimeout$argument_0","Promise$argument_0","getPreloadedFavorites","clearPreloadedCache","preloadEssentialData"],"mappings":"AAA;oCC6B;CDmC;6CEK;sBCc,mDD;eEU;0BCI,mCD;KFG;CFE;qCMK;CNY;mCOK;CPG;oCQM;CRsB"},"hasCjsExports":false},"type":"js/module"}]}