{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":73,"index":73}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":74},"end":{"line":2,"column":40,"index":114}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"../constants/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":115},"end":{"line":3,"column":48,"index":163}}],"key":"ZV0ujAFjHVGmM4aJSYIlDaiTRjE=","exportNames":["*"],"imports":1}},{"name":"../store/authStore","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":28,"column":29,"index":990},"end":{"line":28,"column":58,"index":1019}}],"key":"x4jghCEnTqsoIMgJBq6IvUNyemw=","exportNames":["*"],"imports":1,"isOptional":true}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _axios = require(_dependencyMap[1]);\n  var axios = _interopDefault(_axios);\n  require(_dependencyMap[2]);\n  var _constantsApi = require(_dependencyMap[3]);\n  // MegaRadio Internal API Key - unlimited, no rate limiting\n  var MEGARADIO_API_KEY = 'mr_VUzdIUHuXaagvWUC208Vzi_3lqEV1Vzw';\n\n  // For web preview, we cannot use credentials due to CORS\n  // Native apps will handle cookies differently\n  var isWeb = false;\n\n  // Create axios instance with API key and cookie support\n  var api = axios.default.create({\n    baseURL: _constantsApi.API_BASE_URL,\n    timeout: 15000,\n    headers: {\n      'Content-Type': 'application/json',\n      'X-API-Key': MEGARADIO_API_KEY\n    },\n    // Only use credentials on native platforms where CORS isn't an issue\n    withCredentials: true\n  });\n\n  // Helper to get auth token (lazy import to avoid circular dependency)\n  var getAuthToken = () => {\n    try {\n      // Dynamic import of authStore to avoid circular dependency\n      var _require = require(_dependencyMap[4], \"../store/authStore\"),\n        useAuthStore = _require.useAuthStore;\n      var token = useAuthStore.getState().token;\n      return token;\n    } catch (err) {\n      return null;\n    }\n  };\n\n  // Request interceptor - Add tv=1 param to ALL requests for optimized responses\n  // This reduces response size by ~85% (18KB -> 2.5KB per station)\n  api.interceptors.request.use(config => {\n    // Ensure API key is always present\n    if (config.headers) {\n      config.headers['X-API-Key'] = MEGARADIO_API_KEY;\n\n      // Add mobile auth token if available and not already set\n      var token = getAuthToken();\n      if (token && !config.headers['Authorization']) {\n        config.headers['Authorization'] = `Bearer ${token}`;\n      }\n    }\n\n    // Add tv=1 parameter to ALL requests for optimized mobile/TV responses\n    // This returns only essential fields (name, slug, url, favicon, country, votes etc.)\n    config.params = {\n      ...config.params,\n      tv: 1\n    };\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n\n  // Response interceptor with retry for 429\n  api.interceptors.response.use(response => {\n    return response;\n  }, /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* (error) {\n      var config = error.config;\n      // Retry on 429 (rate limit) - max 2 retries with delay\n      if (error.response?.status === 429 && (!config._retryCount || config._retryCount < 2)) {\n        config._retryCount = (config._retryCount || 0) + 1;\n        var delay = config._retryCount * 1500; // 1.5s, 3s\n        yield new Promise(r => setTimeout(r, delay));\n        return api(config);\n      }\n      // Handle 401 unauthorized globally\n      if (error.response?.status === 401) {\n        console.log('Unauthorized - session may have expired');\n      }\n      return Promise.reject(error);\n    });\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n  var _default = api;\n});","lineCount":105,"map":[[12,2,84,0,"Object"],[12,8,84,0],[12,9,84,0,"defineProperty"],[12,23,84,0],[12,24,84,0,"exports"],[12,31,84,0],[13,4,84,0,"enumerable"],[13,14,84,0],[14,4,84,0,"get"],[14,7,84,0],[14,18,84,0,"get"],[14,19,84,0],[15,6,84,0],[15,13,84,0,"_default"],[15,21,84,0],[16,4,84,0],[17,2,84,0],[18,2,84,19],[18,6,84,19,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,84,19],[18,45,84,19,"require"],[18,52,84,19],[18,53,84,19,"_dependencyMap"],[18,67,84,19],[19,2,84,19],[19,6,84,19,"_asyncToGenerator"],[19,23,84,19],[19,26,84,19,"_interopDefault"],[19,41,84,19],[19,42,84,19,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,84,19],[20,2,1,0],[20,6,1,0,"_axios"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,1,0],[21,6,1,0,"axios"],[21,11,1,0],[21,14,1,0,"_interopDefault"],[21,29,1,0],[21,30,1,0,"_axios"],[21,36,1,0],[22,2,2,0,"require"],[22,9,2,0],[22,10,2,0,"_dependencyMap"],[22,24,2,0],[23,2,3,0],[23,6,3,0,"_constantsApi"],[23,19,3,0],[23,22,3,0,"require"],[23,29,3,0],[23,30,3,0,"_dependencyMap"],[23,44,3,0],[24,2,5,0],[25,2,6,0],[25,6,6,6,"MEGARADIO_API_KEY"],[25,23,6,23],[25,26,6,26],[25,63,6,63],[27,2,8,0],[28,2,9,0],[29,2,10,0],[29,6,10,6,"isWeb"],[29,11,10,11],[29,19,10,35],[31,2,12,0],[32,2,13,0],[32,6,13,6,"api"],[32,9,13,24],[32,12,13,27,"axios"],[32,17,13,32],[32,18,13,32,"default"],[32,25,13,32],[32,26,13,33,"create"],[32,32,13,39],[32,33,13,40],[33,4,14,2,"baseURL"],[33,11,14,9],[33,13,14,11,"API_BASE_URL"],[33,26,14,23],[33,27,14,23,"API_BASE_URL"],[33,39,14,23],[34,4,15,2,"timeout"],[34,11,15,9],[34,13,15,11],[34,18,15,16],[35,4,16,2,"headers"],[35,11,16,9],[35,13,16,11],[36,6,17,4],[36,20,17,18],[36,22,17,20],[36,40,17,38],[37,6,18,4],[37,17,18,15],[37,19,18,17,"MEGARADIO_API_KEY"],[38,4,19,2],[38,5,19,3],[39,4,20,2],[40,4,21,2,"withCredentials"],[40,19,21,17],[41,2,22,0],[41,3,22,1],[41,4,22,2],[43,2,24,0],[44,2,25,0],[44,6,25,6,"getAuthToken"],[44,18,25,18],[44,21,25,21,"getAuthToken"],[44,22,25,21],[44,27,25,42],[45,4,26,2],[45,8,26,6],[46,6,27,4],[47,6,28,4],[47,10,28,4,"_require"],[47,18,28,4],[47,21,28,29,"require"],[47,28,28,36],[47,29,28,36,"_dependencyMap"],[47,43,28,36],[47,68,28,57],[47,69,28,58],[48,8,28,12,"useAuthStore"],[48,20,28,24],[48,23,28,24,"_require"],[48,31,28,24],[48,32,28,12,"useAuthStore"],[48,44,28,24],[49,6,29,4],[49,10,29,10,"token"],[49,15,29,15],[49,18,29,18,"useAuthStore"],[49,30,29,30],[49,31,29,31,"getState"],[49,39,29,39],[49,40,29,40],[49,41,29,41],[49,42,29,42,"token"],[49,47,29,47],[50,6,30,4],[50,13,30,11,"token"],[50,18,30,16],[51,4,31,2],[51,5,31,3],[51,6,31,4],[51,13,31,11,"err"],[51,16,31,14],[51,18,31,16],[52,6,32,4],[52,13,32,11],[52,17,32,15],[53,4,33,2],[54,2,34,0],[54,3,34,1],[56,2,36,0],[57,2,37,0],[58,2,38,0,"api"],[58,5,38,3],[58,6,38,4,"interceptors"],[58,18,38,16],[58,19,38,17,"request"],[58,26,38,24],[58,27,38,25,"use"],[58,30,38,28],[58,31,39,3,"config"],[58,37,39,37],[58,41,39,42],[59,4,40,4],[60,4,41,4],[60,8,41,8,"config"],[60,14,41,14],[60,15,41,15,"headers"],[60,22,41,22],[60,24,41,24],[61,6,42,6,"config"],[61,12,42,12],[61,13,42,13,"headers"],[61,20,42,20],[61,21,42,21],[61,32,42,32],[61,33,42,33],[61,36,42,36,"MEGARADIO_API_KEY"],[61,53,42,53],[63,6,44,6],[64,6,45,6],[64,10,45,12,"token"],[64,15,45,17],[64,18,45,20,"getAuthToken"],[64,30,45,32],[64,31,45,33],[64,32,45,34],[65,6,46,6],[65,10,46,10,"token"],[65,15,46,15],[65,19,46,19],[65,20,46,20,"config"],[65,26,46,26],[65,27,46,27,"headers"],[65,34,46,34],[65,35,46,35],[65,50,46,50],[65,51,46,51],[65,53,46,53],[66,8,47,8,"config"],[66,14,47,14],[66,15,47,15,"headers"],[66,22,47,22],[66,23,47,23],[66,38,47,38],[66,39,47,39],[66,42,47,42],[66,52,47,52,"token"],[66,57,47,57],[66,59,47,59],[67,6,48,6],[68,4,49,4],[70,4,51,4],[71,4,52,4],[72,4,53,4,"config"],[72,10,53,10],[72,11,53,11,"params"],[72,17,53,17],[72,20,53,20],[73,6,53,22],[73,9,53,25,"config"],[73,15,53,31],[73,16,53,32,"params"],[73,22,53,38],[74,6,53,40,"tv"],[74,8,53,42],[74,10,53,44],[75,4,53,46],[75,5,53,47],[76,4,55,4],[76,11,55,11,"config"],[76,17,55,17],[77,2,56,2],[77,3,56,3],[77,5,57,3,"error"],[77,10,57,8],[77,14,57,13],[78,4,58,4],[78,11,58,11,"Promise"],[78,18,58,18],[78,19,58,19,"reject"],[78,25,58,25],[78,26,58,26,"error"],[78,31,58,31],[78,32,58,32],[79,2,59,2],[79,3,60,0],[79,4,60,1],[81,2,62,0],[82,2,63,0,"api"],[82,5,63,3],[82,6,63,4,"interceptors"],[82,18,63,16],[82,19,63,17,"response"],[82,27,63,25],[82,28,63,26,"use"],[82,31,63,29],[82,32,64,3,"response"],[82,40,64,11],[82,44,64,16],[83,4,65,4],[83,11,65,11,"response"],[83,19,65,19],[84,2,66,2],[84,3,66,3],[85,4,66,3],[85,8,66,3,"_ref"],[85,12,66,3],[85,19,66,3,"_asyncToGenerator"],[85,36,66,3],[85,37,66,3,"default"],[85,44,66,3],[85,46,67,2],[85,57,67,9,"error"],[85,62,67,14],[85,64,67,19],[86,6,68,4],[86,10,68,10,"config"],[86,16,68,16],[86,19,68,19,"error"],[86,24,68,24],[86,25,68,25,"config"],[86,31,68,31],[87,6,69,4],[88,6,70,4],[88,10,70,8,"error"],[88,15,70,13],[88,16,70,14,"response"],[88,24,70,22],[88,26,70,24,"status"],[88,32,70,30],[88,37,70,35],[88,40,70,38],[88,45,70,43],[88,46,70,44,"config"],[88,52,70,50],[88,53,70,51,"_retryCount"],[88,64,70,62],[88,68,70,66,"config"],[88,74,70,72],[88,75,70,73,"_retryCount"],[88,86,70,84],[88,89,70,87],[88,90,70,88],[88,91,70,89],[88,93,70,91],[89,8,71,6,"config"],[89,14,71,12],[89,15,71,13,"_retryCount"],[89,26,71,24],[89,29,71,27],[89,30,71,28,"config"],[89,36,71,34],[89,37,71,35,"_retryCount"],[89,48,71,46],[89,52,71,50],[89,53,71,51],[89,57,71,55],[89,58,71,56],[90,8,72,6],[90,12,72,12,"delay"],[90,17,72,17],[90,20,72,20,"config"],[90,26,72,26],[90,27,72,27,"_retryCount"],[90,38,72,38],[90,41,72,41],[90,45,72,45],[90,46,72,46],[90,47,72,47],[91,8,73,6],[91,14,73,12],[91,18,73,16,"Promise"],[91,25,73,23],[91,26,73,24,"r"],[91,27,73,25],[91,31,73,29,"setTimeout"],[91,41,73,39],[91,42,73,40,"r"],[91,43,73,41],[91,45,73,43,"delay"],[91,50,73,48],[91,51,73,49],[91,52,73,50],[92,8,74,6],[92,15,74,13,"api"],[92,18,74,16],[92,19,74,17,"config"],[92,25,74,23],[92,26,74,24],[93,6,75,4],[94,6,76,4],[95,6,77,4],[95,10,77,8,"error"],[95,15,77,13],[95,16,77,14,"response"],[95,24,77,22],[95,26,77,24,"status"],[95,32,77,30],[95,37,77,35],[95,40,77,38],[95,42,77,40],[96,8,78,6,"console"],[96,15,78,13],[96,16,78,14,"log"],[96,19,78,17],[96,20,78,18],[96,61,78,59],[96,62,78,60],[97,6,79,4],[98,6,80,4],[98,13,80,11,"Promise"],[98,20,80,18],[98,21,80,19,"reject"],[98,27,80,25],[98,28,80,26,"error"],[98,33,80,31],[98,34,80,32],[99,4,81,2],[99,5,81,3],[100,4,81,3],[100,21,81,3,"_x"],[100,23,81,3],[101,6,81,3],[101,13,81,3,"_ref"],[101,17,81,3],[101,18,81,3,"apply"],[101,23,81,3],[101,30,81,3,"arguments"],[101,39,81,3],[102,4,81,3],[103,2,81,3],[103,5,82,0],[103,6,82,1],[104,2,84,0],[104,6,84,0,"_default"],[104,14,84,0],[104,17,84,15,"api"],[104,20,84,18],[105,0,84,19],[105,3]],"functionMap":{"names":["<global>","getAuthToken","interceptors.request.use$argument_0","interceptors.request.use$argument_1","interceptors.response.use$argument_0","interceptors.response.use$argument_1","Promise$argument_0"],"mappings":"AAA;qBCwB;CDS;EEK;GFiB;EGC;GHE;EIK;GJE;EKC;wBCM,yBD;GLQ"},"hasCjsExports":false},"type":"js/module"}]}