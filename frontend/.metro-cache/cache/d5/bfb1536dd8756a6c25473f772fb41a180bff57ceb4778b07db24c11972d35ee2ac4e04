{"dependencies":[{"name":"../../CarPlay","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":18,"index":129},"end":{"line":4,"column":42,"index":153}}],"key":"uc2kOoCX5UbWXNsaU+LfHNXTg38=","exportNames":["*"],"imports":1}},{"name":"../../interfaces/Action","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":17,"index":172},"end":{"line":5,"column":51,"index":206}}],"key":"Ao+0Xukmz3+PXcgXLZaVbmT2Jnw=","exportNames":["*"],"imports":1}},{"name":"../Template","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":19,"index":227},"end":{"line":6,"column":41,"index":249}}],"key":"87imF7mdjJJbCUkE5RafmdJ6RBg=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/index","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"55efhPHw3gz2FoQtoN2yI1VuhbM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.MessageTemplate = void 0;\n  const CarPlay_1 = require(_dependencyMap[0], \"../../CarPlay\");\n  const Action_1 = require(_dependencyMap[1], \"../../interfaces/Action\");\n  const Template_1 = require(_dependencyMap[2], \"../Template\");\n  const react_native_1 = require(_dependencyMap[3], \"react-native-web/dist/index\");\n  class MessageTemplate extends Template_1.Template {\n    pressableCallbacks = {};\n    get type() {\n      return 'message';\n    }\n    constructor(config) {\n      super(config);\n      this.config = config;\n      const subscription = CarPlay_1.CarPlay.emitter.addListener('buttonPressed', ({\n        buttonId,\n        templateId\n      }) => {\n        if (templateId !== this.id) {\n          return;\n        }\n        const callback = this.pressableCallbacks[buttonId];\n        if (callback == null || typeof callback !== 'function') {\n          return;\n        }\n        callback();\n      });\n      this.listenerSubscriptions.push(subscription);\n      const callbackFn = react_native_1.Platform.select({\n        android: ({\n          error\n        } = {}) => {\n          error && console.error(error);\n        }\n      });\n      this.config = this.parseConfig({\n        type: this.type,\n        ...config\n      });\n      CarPlay_1.CarPlay.bridge.createTemplate(this.id, this.config, callbackFn);\n    }\n    parseConfig(config) {\n      const {\n        actions,\n        ...rest\n      } = config;\n      const updatedConfig = rest;\n      const callbackIds = [];\n      if (actions != null) {\n        updatedConfig.actions = actions.map(action => {\n          const id = 'id' in action ? action.id : (0, Action_1.getCallbackActionId)();\n          if (id == null) {\n            return action;\n          }\n          callbackIds.push(id);\n          if (!('onPress' in action)) {\n            return action;\n          }\n          const {\n            onPress,\n            ...actionRest\n          } = action;\n          this.pressableCallbacks[id] = onPress;\n          return {\n            ...actionRest,\n            id\n          };\n        });\n      }\n      this.pressableCallbacks = Object.fromEntries(Object.entries(this.pressableCallbacks).filter(([id]) => callbackIds.includes(id)));\n      return super.parseConfig(updatedConfig);\n    }\n  }\n  exports.MessageTemplate = MessageTemplate;\n});","lineCount":80,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"MessageTemplate"],[7,25,3,23],[7,28,3,26],[7,33,3,31],[7,34,3,32],[8,2,4,0],[8,8,4,6,"CarPlay_1"],[8,17,4,15],[8,20,4,18,"require"],[8,27,4,25],[8,28,4,25,"_dependencyMap"],[8,42,4,25],[8,62,4,41],[8,63,4,42],[9,2,5,0],[9,8,5,6,"Action_1"],[9,16,5,14],[9,19,5,17,"require"],[9,26,5,24],[9,27,5,24,"_dependencyMap"],[9,41,5,24],[9,71,5,50],[9,72,5,51],[10,2,6,0],[10,8,6,6,"Template_1"],[10,18,6,16],[10,21,6,19,"require"],[10,28,6,26],[10,29,6,26,"_dependencyMap"],[10,43,6,26],[10,61,6,40],[10,62,6,41],[11,2,6,42],[11,8,6,42,"react_native_1"],[11,22,6,42],[11,25,6,42,"require"],[11,32,6,42],[11,33,6,42,"_dependencyMap"],[11,47,6,42],[12,2,8,0],[12,8,8,6,"MessageTemplate"],[12,23,8,21],[12,32,8,30,"Template_1"],[12,42,8,40],[12,43,8,41,"Template"],[12,51,8,49],[12,52,8,50],[13,4,10,4,"pressableCallbacks"],[13,22,10,22],[13,25,10,25],[13,26,10,26],[13,27,10,27],[14,4,11,4],[14,8,11,8,"type"],[14,12,11,12,"type"],[14,13,11,12],[14,15,11,15],[15,6,12,8],[15,13,12,15],[15,22,12,24],[16,4,13,4],[17,4,14,4,"constructor"],[17,15,14,15,"constructor"],[17,16,14,16,"config"],[17,22,14,22],[17,24,14,24],[18,6,15,8],[18,11,15,13],[18,12,15,14,"config"],[18,18,15,20],[18,19,15,21],[19,6,16,8],[19,10,16,12],[19,11,16,13,"config"],[19,17,16,19],[19,20,16,22,"config"],[19,26,16,28],[20,6,17,8],[20,12,17,14,"subscription"],[20,24,17,26],[20,27,17,29,"CarPlay_1"],[20,36,17,38],[20,37,17,39,"CarPlay"],[20,44,17,46],[20,45,17,47,"emitter"],[20,52,17,54],[20,53,17,55,"addListener"],[20,64,17,66],[20,65,17,67],[20,80,17,82],[20,82,17,84],[20,83,17,85],[21,8,17,87,"buttonId"],[21,16,17,95],[22,8,17,97,"templateId"],[23,6,17,108],[23,7,17,109],[23,12,17,114],[24,8,18,12],[24,12,18,16,"templateId"],[24,22,18,26],[24,27,18,31],[24,31,18,35],[24,32,18,36,"id"],[24,34,18,38],[24,36,18,40],[25,10,19,16],[26,8,20,12],[27,8,21,12],[27,14,21,18,"callback"],[27,22,21,26],[27,25,21,29],[27,29,21,33],[27,30,21,34,"pressableCallbacks"],[27,48,21,52],[27,49,21,53,"buttonId"],[27,57,21,61],[27,58,21,62],[28,8,22,12],[28,12,22,16,"callback"],[28,20,22,24],[28,24,22,28],[28,28,22,32],[28,32,22,36],[28,39,22,43,"callback"],[28,47,22,51],[28,52,22,56],[28,62,22,66],[28,64,22,68],[29,10,23,16],[30,8,24,12],[31,8,25,12,"callback"],[31,16,25,20],[31,17,25,21],[31,18,25,22],[32,6,26,8],[32,7,26,9],[32,8,26,10],[33,6,27,8],[33,10,27,12],[33,11,27,13,"listenerSubscriptions"],[33,32,27,34],[33,33,27,35,"push"],[33,37,27,39],[33,38,27,40,"subscription"],[33,50,27,52],[33,51,27,53],[34,6,28,8],[34,12,28,14,"callbackFn"],[34,22,28,24],[34,25,28,27,"react_native_1"],[34,39,28,41],[34,40,28,42,"Platform"],[34,48,28,50],[34,49,28,51,"select"],[34,55,28,57],[34,56,28,58],[35,8,29,12,"android"],[35,15,29,19],[35,17,29,21,"android"],[35,18,29,22],[36,10,29,24,"error"],[37,8,29,30],[37,9,29,31],[37,12,29,34],[37,13,29,35],[37,14,29,36],[37,19,29,41],[38,10,30,16,"error"],[38,15,30,21],[38,19,30,25,"console"],[38,26,30,32],[38,27,30,33,"error"],[38,32,30,38],[38,33,30,39,"error"],[38,38,30,44],[38,39,30,45],[39,8,31,12],[40,6,32,8],[40,7,32,9],[40,8,32,10],[41,6,33,8],[41,10,33,12],[41,11,33,13,"config"],[41,17,33,19],[41,20,33,22],[41,24,33,26],[41,25,33,27,"parseConfig"],[41,36,33,38],[41,37,33,39],[42,8,33,41,"type"],[42,12,33,45],[42,14,33,47],[42,18,33,51],[42,19,33,52,"type"],[42,23,33,56],[43,8,33,58],[43,11,33,61,"config"],[44,6,33,68],[44,7,33,69],[44,8,33,70],[45,6,34,8,"CarPlay_1"],[45,15,34,17],[45,16,34,18,"CarPlay"],[45,23,34,25],[45,24,34,26,"bridge"],[45,30,34,32],[45,31,34,33,"createTemplate"],[45,45,34,47],[45,46,34,48],[45,50,34,52],[45,51,34,53,"id"],[45,53,34,55],[45,55,34,57],[45,59,34,61],[45,60,34,62,"config"],[45,66,34,68],[45,68,34,70,"callbackFn"],[45,78,34,80],[45,79,34,81],[46,4,35,4],[47,4,36,4,"parseConfig"],[47,15,36,15,"parseConfig"],[47,16,36,16,"config"],[47,22,36,22],[47,24,36,24],[48,6,37,8],[48,12,37,14],[49,8,37,16,"actions"],[49,15,37,23],[50,8,37,25],[50,11,37,28,"rest"],[51,6,37,33],[51,7,37,34],[51,10,37,37,"config"],[51,16,37,43],[52,6,38,8],[52,12,38,14,"updatedConfig"],[52,25,38,27],[52,28,38,30,"rest"],[52,32,38,34],[53,6,39,8],[53,12,39,14,"callbackIds"],[53,23,39,25],[53,26,39,28],[53,28,39,30],[54,6,40,8],[54,10,40,12,"actions"],[54,17,40,19],[54,21,40,23],[54,25,40,27],[54,27,40,29],[55,8,41,12,"updatedConfig"],[55,21,41,25],[55,22,41,26,"actions"],[55,29,41,33],[55,32,41,36,"actions"],[55,39,41,43],[55,40,41,44,"map"],[55,43,41,47],[55,44,41,48,"action"],[55,50,41,54],[55,54,41,58],[56,10,42,16],[56,16,42,22,"id"],[56,18,42,24],[56,21,42,27],[56,25,42,31],[56,29,42,35,"action"],[56,35,42,41],[56,38,42,44,"action"],[56,44,42,50],[56,45,42,51,"id"],[56,47,42,53],[56,50,42,56],[56,51,42,57],[56,52,42,58],[56,54,42,60,"Action_1"],[56,62,42,68],[56,63,42,69,"getCallbackActionId"],[56,82,42,88],[56,84,42,90],[56,85,42,91],[57,10,43,16],[57,14,43,20,"id"],[57,16,43,22],[57,20,43,26],[57,24,43,30],[57,26,43,32],[58,12,44,20],[58,19,44,27,"action"],[58,25,44,33],[59,10,45,16],[60,10,46,16,"callbackIds"],[60,21,46,27],[60,22,46,28,"push"],[60,26,46,32],[60,27,46,33,"id"],[60,29,46,35],[60,30,46,36],[61,10,47,16],[61,14,47,20],[61,16,47,22],[61,25,47,31],[61,29,47,35,"action"],[61,35,47,41],[61,36,47,42],[61,38,47,44],[62,12,48,20],[62,19,48,27,"action"],[62,25,48,33],[63,10,49,16],[64,10,50,16],[64,16,50,22],[65,12,50,24,"onPress"],[65,19,50,31],[66,12,50,33],[66,15,50,36,"actionRest"],[67,10,50,47],[67,11,50,48],[67,14,50,51,"action"],[67,20,50,57],[68,10,51,16],[68,14,51,20],[68,15,51,21,"pressableCallbacks"],[68,33,51,39],[68,34,51,40,"id"],[68,36,51,42],[68,37,51,43],[68,40,51,46,"onPress"],[68,47,51,53],[69,10,52,16],[69,17,52,23],[70,12,52,25],[70,15,52,28,"actionRest"],[70,25,52,38],[71,12,52,40,"id"],[72,10,52,43],[72,11,52,44],[73,8,53,12],[73,9,53,13],[73,10,53,14],[74,6,54,8],[75,6,55,8],[75,10,55,12],[75,11,55,13,"pressableCallbacks"],[75,29,55,31],[75,32,55,34,"Object"],[75,38,55,40],[75,39,55,41,"fromEntries"],[75,50,55,52],[75,51,55,53,"Object"],[75,57,55,59],[75,58,55,60,"entries"],[75,65,55,67],[75,66,55,68],[75,70,55,72],[75,71,55,73,"pressableCallbacks"],[75,89,55,91],[75,90,55,92],[75,91,55,93,"filter"],[75,97,55,99],[75,98,55,100],[75,99,55,101],[75,100,55,102,"id"],[75,102,55,104],[75,103,55,105],[75,108,55,110,"callbackIds"],[75,119,55,121],[75,120,55,122,"includes"],[75,128,55,130],[75,129,55,131,"id"],[75,131,55,133],[75,132,55,134],[75,133,55,135],[75,134,55,136],[76,6,56,8],[76,13,56,15],[76,18,56,20],[76,19,56,21,"parseConfig"],[76,30,56,32],[76,31,56,33,"updatedConfig"],[76,44,56,46],[76,45,56,47],[77,4,57,4],[78,2,58,0],[79,2,59,0,"exports"],[79,9,59,7],[79,10,59,8,"MessageTemplate"],[79,25,59,23],[79,28,59,26,"MessageTemplate"],[79,43,59,41],[80,0,59,42],[80,3]],"functionMap":{"names":["<global>","MessageTemplate","get__type","constructor","CarPlay_1.CarPlay.emitter.addListener$argument_1","react_native_1.Platform.select$argument_0.android","parseConfig","actions.map$argument_0","Object.entries.filter$argument_0"],"mappings":"AAA;ACO;ICG;KDE;IEC;oFCG;SDS;qBEG;aFE;KFI;IKC;gDCK;aDY;oGEE,kCF;KLE;CDC"},"hasCjsExports":true},"type":"js/module"}]}