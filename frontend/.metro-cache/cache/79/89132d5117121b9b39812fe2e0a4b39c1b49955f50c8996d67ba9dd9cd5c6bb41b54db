{"dependencies":[{"name":"./commons.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":21,"index":182},"end":{"line":5,"column":44,"index":205}}],"key":"BsP1rur2s8tExOXn4/1q3+2ZDEY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.encodePacket = undefined;\n  exports.encodePacketToBinary = encodePacketToBinary;\n  var commons_js_1 = require(_dependencyMap[0]);\n  var withNativeBlob = typeof Blob === \"function\" || typeof Blob !== \"undefined\" && Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\";\n  var withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n  // ArrayBuffer.isView method is not defined in IE10\n  var isView = obj => {\n    return typeof ArrayBuffer.isView === \"function\" ? ArrayBuffer.isView(obj) : obj && obj.buffer instanceof ArrayBuffer;\n  };\n  var encodePacket = (_ref, supportsBinary, callback) => {\n    var type = _ref.type,\n      data = _ref.data;\n    if (withNativeBlob && data instanceof Blob) {\n      if (supportsBinary) {\n        return callback(data);\n      } else {\n        return encodeBlobAsBase64(data, callback);\n      }\n    } else if (withNativeArrayBuffer && (data instanceof ArrayBuffer || isView(data))) {\n      if (supportsBinary) {\n        return callback(data);\n      } else {\n        return encodeBlobAsBase64(new Blob([data]), callback);\n      }\n    }\n    // plain string\n    return callback(commons_js_1.PACKET_TYPES[type] + (data || \"\"));\n  };\n  exports.encodePacket = encodePacket;\n  var encodeBlobAsBase64 = (data, callback) => {\n    var fileReader = new FileReader();\n    fileReader.onload = function () {\n      var content = fileReader.result.split(\",\")[1];\n      callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n  };\n  function toArray(data) {\n    if (data instanceof Uint8Array) {\n      return data;\n    } else if (data instanceof ArrayBuffer) {\n      return new Uint8Array(data);\n    } else {\n      return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n  }\n  var TEXT_ENCODER;\n  function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob && packet.data instanceof Blob) {\n      return packet.data.arrayBuffer().then(toArray).then(callback);\n    } else if (withNativeArrayBuffer && (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n      return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, encoded => {\n      if (!TEXT_ENCODER) {\n        TEXT_ENCODER = new TextEncoder();\n      }\n      callback(TEXT_ENCODER.encode(encoded));\n    });\n  }\n});","lineCount":67,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"encodePacket"],[7,22,3,20],[7,25,3,20,"undefined"],[7,34,3,29],[8,2,4,0,"exports"],[8,9,4,7],[8,10,4,8,"encodePacketToBinary"],[8,30,4,28],[8,33,4,31,"encodePacketToBinary"],[8,53,4,51],[9,2,5,0],[9,6,5,6,"commons_js_1"],[9,18,5,18],[9,21,5,21,"require"],[9,28,5,28],[9,29,5,28,"_dependencyMap"],[9,43,5,28],[9,46,5,43],[9,47,5,44],[10,2,6,0],[10,6,6,6,"withNativeBlob"],[10,20,6,20],[10,23,6,23],[10,30,6,30,"Blob"],[10,34,6,34],[10,39,6,39],[10,49,6,49],[10,53,7,5],[10,60,7,12,"Blob"],[10,64,7,16],[10,69,7,21],[10,80,7,32],[10,84,8,8,"Object"],[10,90,8,14],[10,91,8,15,"prototype"],[10,100,8,24],[10,101,8,25,"toString"],[10,109,8,33],[10,110,8,34,"call"],[10,114,8,38],[10,115,8,39,"Blob"],[10,119,8,43],[10,120,8,44],[10,125,8,49],[10,151,8,76],[11,2,9,0],[11,6,9,6,"withNativeArrayBuffer"],[11,27,9,27],[11,30,9,30],[11,37,9,37,"ArrayBuffer"],[11,48,9,48],[11,53,9,53],[11,63,9,63],[12,2,10,0],[13,2,11,0],[13,6,11,6,"isView"],[13,12,11,12],[13,15,11,16,"obj"],[13,18,11,19],[13,22,11,24],[14,4,12,4],[14,11,12,11],[14,18,12,18,"ArrayBuffer"],[14,29,12,29],[14,30,12,30,"isView"],[14,36,12,36],[14,41,12,41],[14,51,12,51],[14,54,13,10,"ArrayBuffer"],[14,65,13,21],[14,66,13,22,"isView"],[14,72,13,28],[14,73,13,29,"obj"],[14,76,13,32],[14,77,13,33],[14,80,14,10,"obj"],[14,83,14,13],[14,87,14,17,"obj"],[14,90,14,20],[14,91,14,21,"buffer"],[14,97,14,27],[14,109,14,39,"ArrayBuffer"],[14,120,14,50],[15,2,15,0],[15,3,15,1],[16,2,16,0],[16,6,16,6,"encodePacket"],[16,18,16,18],[16,21,16,21,"encodePacket"],[16,22,16,21,"_ref"],[16,26,16,21],[16,28,16,38,"supportsBinary"],[16,42,16,52],[16,44,16,54,"callback"],[16,52,16,62],[16,57,16,67],[17,4,16,67],[17,8,16,24,"type"],[17,12,16,28],[17,15,16,28,"_ref"],[17,19,16,28],[17,20,16,24,"type"],[17,24,16,28],[18,6,16,30,"data"],[18,10,16,34],[18,13,16,34,"_ref"],[18,17,16,34],[18,18,16,30,"data"],[18,22,16,34],[19,4,17,4],[19,8,17,8,"withNativeBlob"],[19,22,17,22],[19,26,17,26,"data"],[19,30,17,30],[19,42,17,42,"Blob"],[19,46,17,46],[19,48,17,48],[20,6,18,8],[20,10,18,12,"supportsBinary"],[20,24,18,26],[20,26,18,28],[21,8,19,12],[21,15,19,19,"callback"],[21,23,19,27],[21,24,19,28,"data"],[21,28,19,32],[21,29,19,33],[22,6,20,8],[22,7,20,9],[22,13,21,13],[23,8,22,12],[23,15,22,19,"encodeBlobAsBase64"],[23,33,22,37],[23,34,22,38,"data"],[23,38,22,42],[23,40,22,44,"callback"],[23,48,22,52],[23,49,22,53],[24,6,23,8],[25,4,24,4],[25,5,24,5],[25,11,25,9],[25,15,25,13,"withNativeArrayBuffer"],[25,36,25,34],[25,41,26,9,"data"],[25,45,26,13],[25,57,26,25,"ArrayBuffer"],[25,68,26,36],[25,72,26,40,"isView"],[25,78,26,46],[25,79,26,47,"data"],[25,83,26,51],[25,84,26,52],[25,85,26,53],[25,87,26,55],[26,6,27,8],[26,10,27,12,"supportsBinary"],[26,24,27,26],[26,26,27,28],[27,8,28,12],[27,15,28,19,"callback"],[27,23,28,27],[27,24,28,28,"data"],[27,28,28,32],[27,29,28,33],[28,6,29,8],[28,7,29,9],[28,13,30,13],[29,8,31,12],[29,15,31,19,"encodeBlobAsBase64"],[29,33,31,37],[29,34,31,38],[29,38,31,42,"Blob"],[29,42,31,46],[29,43,31,47],[29,44,31,48,"data"],[29,48,31,52],[29,49,31,53],[29,50,31,54],[29,52,31,56,"callback"],[29,60,31,64],[29,61,31,65],[30,6,32,8],[31,4,33,4],[32,4,34,4],[33,4,35,4],[33,11,35,11,"callback"],[33,19,35,19],[33,20,35,20,"commons_js_1"],[33,32,35,32],[33,33,35,33,"PACKET_TYPES"],[33,45,35,45],[33,46,35,46,"type"],[33,50,35,50],[33,51,35,51],[33,55,35,55,"data"],[33,59,35,59],[33,63,35,63],[33,65,35,65],[33,66,35,66],[33,67,35,67],[34,2,36,0],[34,3,36,1],[35,2,37,0,"exports"],[35,9,37,7],[35,10,37,8,"encodePacket"],[35,22,37,20],[35,25,37,23,"encodePacket"],[35,37,37,35],[36,2,38,0],[36,6,38,6,"encodeBlobAsBase64"],[36,24,38,24],[36,27,38,27,"encodeBlobAsBase64"],[36,28,38,28,"data"],[36,32,38,32],[36,34,38,34,"callback"],[36,42,38,42],[36,47,38,47],[37,4,39,4],[37,8,39,10,"fileReader"],[37,18,39,20],[37,21,39,23],[37,25,39,27,"FileReader"],[37,35,39,37],[37,36,39,38],[37,37,39,39],[38,4,40,4,"fileReader"],[38,14,40,14],[38,15,40,15,"onload"],[38,21,40,21],[38,24,40,24],[38,36,40,36],[39,6,41,8],[39,10,41,14,"content"],[39,17,41,21],[39,20,41,24,"fileReader"],[39,30,41,34],[39,31,41,35,"result"],[39,37,41,41],[39,38,41,42,"split"],[39,43,41,47],[39,44,41,48],[39,47,41,51],[39,48,41,52],[39,49,41,53],[39,50,41,54],[39,51,41,55],[40,6,42,8,"callback"],[40,14,42,16],[40,15,42,17],[40,18,42,20],[40,22,42,24,"content"],[40,29,42,31],[40,33,42,35],[40,35,42,37],[40,36,42,38],[40,37,42,39],[41,4,43,4],[41,5,43,5],[42,4,44,4],[42,11,44,11,"fileReader"],[42,21,44,21],[42,22,44,22,"readAsDataURL"],[42,35,44,35],[42,36,44,36,"data"],[42,40,44,40],[42,41,44,41],[43,2,45,0],[43,3,45,1],[44,2,46,0],[44,11,46,9,"toArray"],[44,18,46,16,"toArray"],[44,19,46,17,"data"],[44,23,46,21],[44,25,46,23],[45,4,47,4],[45,8,47,8,"data"],[45,12,47,12],[45,24,47,24,"Uint8Array"],[45,34,47,34],[45,36,47,36],[46,6,48,8],[46,13,48,15,"data"],[46,17,48,19],[47,4,49,4],[47,5,49,5],[47,11,50,9],[47,15,50,13,"data"],[47,19,50,17],[47,31,50,29,"ArrayBuffer"],[47,42,50,40],[47,44,50,42],[48,6,51,8],[48,13,51,15],[48,17,51,19,"Uint8Array"],[48,27,51,29],[48,28,51,30,"data"],[48,32,51,34],[48,33,51,35],[49,4,52,4],[49,5,52,5],[49,11,53,9],[50,6,54,8],[50,13,54,15],[50,17,54,19,"Uint8Array"],[50,27,54,29],[50,28,54,30,"data"],[50,32,54,34],[50,33,54,35,"buffer"],[50,39,54,41],[50,41,54,43,"data"],[50,45,54,47],[50,46,54,48,"byteOffset"],[50,56,54,58],[50,58,54,60,"data"],[50,62,54,64],[50,63,54,65,"byteLength"],[50,73,54,75],[50,74,54,76],[51,4,55,4],[52,2,56,0],[53,2,57,0],[53,6,57,4,"TEXT_ENCODER"],[53,18,57,16],[54,2,58,0],[54,11,58,9,"encodePacketToBinary"],[54,31,58,29,"encodePacketToBinary"],[54,32,58,30,"packet"],[54,38,58,36],[54,40,58,38,"callback"],[54,48,58,46],[54,50,58,48],[55,4,59,4],[55,8,59,8,"withNativeBlob"],[55,22,59,22],[55,26,59,26,"packet"],[55,32,59,32],[55,33,59,33,"data"],[55,37,59,37],[55,49,59,49,"Blob"],[55,53,59,53],[55,55,59,55],[56,6,60,8],[56,13,60,15,"packet"],[56,19,60,21],[56,20,60,22,"data"],[56,24,60,26],[56,25,60,27,"arrayBuffer"],[56,36,60,38],[56,37,60,39],[56,38,60,40],[56,39,60,41,"then"],[56,43,60,45],[56,44,60,46,"toArray"],[56,51,60,53],[56,52,60,54],[56,53,60,55,"then"],[56,57,60,59],[56,58,60,60,"callback"],[56,66,60,68],[56,67,60,69],[57,4,61,4],[57,5,61,5],[57,11,62,9],[57,15,62,13,"withNativeArrayBuffer"],[57,36,62,34],[57,41,63,9,"packet"],[57,47,63,15],[57,48,63,16,"data"],[57,52,63,20],[57,64,63,32,"ArrayBuffer"],[57,75,63,43],[57,79,63,47,"isView"],[57,85,63,53],[57,86,63,54,"packet"],[57,92,63,60],[57,93,63,61,"data"],[57,97,63,65],[57,98,63,66],[57,99,63,67],[57,101,63,69],[58,6,64,8],[58,13,64,15,"callback"],[58,21,64,23],[58,22,64,24,"toArray"],[58,29,64,31],[58,30,64,32,"packet"],[58,36,64,38],[58,37,64,39,"data"],[58,41,64,43],[58,42,64,44],[58,43,64,45],[59,4,65,4],[60,4,66,4,"encodePacket"],[60,16,66,16],[60,17,66,17,"packet"],[60,23,66,23],[60,25,66,25],[60,30,66,30],[60,32,66,33,"encoded"],[60,39,66,40],[60,43,66,45],[61,6,67,8],[61,10,67,12],[61,11,67,13,"TEXT_ENCODER"],[61,23,67,25],[61,25,67,27],[62,8,68,12,"TEXT_ENCODER"],[62,20,68,24],[62,23,68,27],[62,27,68,31,"TextEncoder"],[62,38,68,42],[62,39,68,43],[62,40,68,44],[63,6,69,8],[64,6,70,8,"callback"],[64,14,70,16],[64,15,70,17,"TEXT_ENCODER"],[64,27,70,29],[64,28,70,30,"encode"],[64,34,70,36],[64,35,70,37,"encoded"],[64,42,70,44],[64,43,70,45],[64,44,70,46],[65,4,71,4],[65,5,71,5],[65,6,71,6],[66,2,72,0],[67,0,72,1],[67,3]],"functionMap":{"names":["<global>","isView","encodePacket","encodeBlobAsBase64","fileReader.onload","toArray","encodePacketToBinary","encodePacket$argument_2"],"mappings":"AAA;eCU;CDI;qBEC;CFoB;2BGE;wBCE;KDG;CHE;AKC;CLU;AME;gCCQ;KDK;CNC"},"hasCjsExports":true},"type":"js/module"}]}