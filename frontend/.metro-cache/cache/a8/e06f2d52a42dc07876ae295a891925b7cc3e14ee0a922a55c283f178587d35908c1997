{"dependencies":[{"name":"./commons.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":21,"index":129},"end":{"line":4,"column":44,"index":152}}],"key":"BsP1rur2s8tExOXn4/1q3+2ZDEY=","exportNames":["*"],"imports":1}},{"name":"./contrib/base64-arraybuffer.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":32,"index":186},"end":{"line":5,"column":74,"index":228}}],"key":"n2WMxi3Ta/IaG1o0m1zJANSXAjk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.decodePacket = void 0;\n  const commons_js_1 = require(_dependencyMap[0], \"./commons.js\");\n  const base64_arraybuffer_js_1 = require(_dependencyMap[1], \"./contrib/base64-arraybuffer.js\");\n  const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n  const decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n      return {\n        type: \"message\",\n        data: mapBinary(encodedPacket, binaryType)\n      };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n      return {\n        type: \"message\",\n        data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n      };\n    }\n    const packetType = commons_js_1.PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n      return commons_js_1.ERROR_PACKET;\n    }\n    return encodedPacket.length > 1 ? {\n      type: commons_js_1.PACKET_TYPES_REVERSE[type],\n      data: encodedPacket.substring(1)\n    } : {\n      type: commons_js_1.PACKET_TYPES_REVERSE[type]\n    };\n  };\n  exports.decodePacket = decodePacket;\n  const decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n      const decoded = (0, base64_arraybuffer_js_1.decode)(data);\n      return mapBinary(decoded, binaryType);\n    } else {\n      return {\n        base64: true,\n        data\n      }; // fallback for old browsers\n    }\n  };\n  const mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n      case \"blob\":\n        if (data instanceof Blob) {\n          // from WebSocket + binaryType \"blob\"\n          return data;\n        } else {\n          // from HTTP long-polling or WebTransport\n          return new Blob([data]);\n        }\n      case \"arraybuffer\":\n      default:\n        if (data instanceof ArrayBuffer) {\n          // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n          return data;\n        } else {\n          // from WebTransport (Uint8Array)\n          return data.buffer;\n        }\n    }\n  };\n});","lineCount":69,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"decodePacket"],[7,22,3,20],[7,25,3,23],[7,30,3,28],[7,31,3,29],[8,2,4,0],[8,8,4,6,"commons_js_1"],[8,20,4,18],[8,23,4,21,"require"],[8,30,4,28],[8,31,4,28,"_dependencyMap"],[8,45,4,28],[8,64,4,43],[8,65,4,44],[9,2,5,0],[9,8,5,6,"base64_arraybuffer_js_1"],[9,31,5,29],[9,34,5,32,"require"],[9,41,5,39],[9,42,5,39,"_dependencyMap"],[9,56,5,39],[9,94,5,73],[9,95,5,74],[10,2,6,0],[10,8,6,6,"withNativeArrayBuffer"],[10,29,6,27],[10,32,6,30],[10,39,6,37,"ArrayBuffer"],[10,50,6,48],[10,55,6,53],[10,65,6,63],[11,2,7,0],[11,8,7,6,"decodePacket"],[11,20,7,18],[11,23,7,21,"decodePacket"],[11,24,7,22,"encodedPacket"],[11,37,7,35],[11,39,7,37,"binaryType"],[11,49,7,47],[11,54,7,52],[12,4,8,4],[12,8,8,8],[12,15,8,15,"encodedPacket"],[12,28,8,28],[12,33,8,33],[12,41,8,41],[12,43,8,43],[13,6,9,8],[13,13,9,15],[14,8,10,12,"type"],[14,12,10,16],[14,14,10,18],[14,23,10,27],[15,8,11,12,"data"],[15,12,11,16],[15,14,11,18,"mapBinary"],[15,23,11,27],[15,24,11,28,"encodedPacket"],[15,37,11,41],[15,39,11,43,"binaryType"],[15,49,11,53],[16,6,12,8],[16,7,12,9],[17,4,13,4],[18,4,14,4],[18,10,14,10,"type"],[18,14,14,14],[18,17,14,17,"encodedPacket"],[18,30,14,30],[18,31,14,31,"charAt"],[18,37,14,37],[18,38,14,38],[18,39,14,39],[18,40,14,40],[19,4,15,4],[19,8,15,8,"type"],[19,12,15,12],[19,17,15,17],[19,20,15,20],[19,22,15,22],[20,6,16,8],[20,13,16,15],[21,8,17,12,"type"],[21,12,17,16],[21,14,17,18],[21,23,17,27],[22,8,18,12,"data"],[22,12,18,16],[22,14,18,18,"decodeBase64Packet"],[22,32,18,36],[22,33,18,37,"encodedPacket"],[22,46,18,50],[22,47,18,51,"substring"],[22,56,18,60],[22,57,18,61],[22,58,18,62],[22,59,18,63],[22,61,18,65,"binaryType"],[22,71,18,75],[23,6,19,8],[23,7,19,9],[24,4,20,4],[25,4,21,4],[25,10,21,10,"packetType"],[25,20,21,20],[25,23,21,23,"commons_js_1"],[25,35,21,35],[25,36,21,36,"PACKET_TYPES_REVERSE"],[25,56,21,56],[25,57,21,57,"type"],[25,61,21,61],[25,62,21,62],[26,4,22,4],[26,8,22,8],[26,9,22,9,"packetType"],[26,19,22,19],[26,21,22,21],[27,6,23,8],[27,13,23,15,"commons_js_1"],[27,25,23,27],[27,26,23,28,"ERROR_PACKET"],[27,38,23,40],[28,4,24,4],[29,4,25,4],[29,11,25,11,"encodedPacket"],[29,24,25,24],[29,25,25,25,"length"],[29,31,25,31],[29,34,25,34],[29,35,25,35],[29,38,26,10],[30,6,27,12,"type"],[30,10,27,16],[30,12,27,18,"commons_js_1"],[30,24,27,30],[30,25,27,31,"PACKET_TYPES_REVERSE"],[30,45,27,51],[30,46,27,52,"type"],[30,50,27,56],[30,51,27,57],[31,6,28,12,"data"],[31,10,28,16],[31,12,28,18,"encodedPacket"],[31,25,28,31],[31,26,28,32,"substring"],[31,35,28,41],[31,36,28,42],[31,37,28,43],[32,4,29,8],[32,5,29,9],[32,8,30,10],[33,6,31,12,"type"],[33,10,31,16],[33,12,31,18,"commons_js_1"],[33,24,31,30],[33,25,31,31,"PACKET_TYPES_REVERSE"],[33,45,31,51],[33,46,31,52,"type"],[33,50,31,56],[34,4,32,8],[34,5,32,9],[35,2,33,0],[35,3,33,1],[36,2,34,0,"exports"],[36,9,34,7],[36,10,34,8,"decodePacket"],[36,22,34,20],[36,25,34,23,"decodePacket"],[36,37,34,35],[37,2,35,0],[37,8,35,6,"decodeBase64Packet"],[37,26,35,24],[37,29,35,27,"decodeBase64Packet"],[37,30,35,28,"data"],[37,34,35,32],[37,36,35,34,"binaryType"],[37,46,35,44],[37,51,35,49],[38,4,36,4],[38,8,36,8,"withNativeArrayBuffer"],[38,29,36,29],[38,31,36,31],[39,6,37,8],[39,12,37,14,"decoded"],[39,19,37,21],[39,22,37,24],[39,23,37,25],[39,24,37,26],[39,26,37,28,"base64_arraybuffer_js_1"],[39,49,37,51],[39,50,37,52,"decode"],[39,56,37,58],[39,58,37,60,"data"],[39,62,37,64],[39,63,37,65],[40,6,38,8],[40,13,38,15,"mapBinary"],[40,22,38,24],[40,23,38,25,"decoded"],[40,30,38,32],[40,32,38,34,"binaryType"],[40,42,38,44],[40,43,38,45],[41,4,39,4],[41,5,39,5],[41,11,40,9],[42,6,41,8],[42,13,41,15],[43,8,41,17,"base64"],[43,14,41,23],[43,16,41,25],[43,20,41,29],[44,8,41,31,"data"],[45,6,41,36],[45,7,41,37],[45,8,41,38],[45,9,41,39],[46,4,42,4],[47,2,43,0],[47,3,43,1],[48,2,44,0],[48,8,44,6,"mapBinary"],[48,17,44,15],[48,20,44,18,"mapBinary"],[48,21,44,19,"data"],[48,25,44,23],[48,27,44,25,"binaryType"],[48,37,44,35],[48,42,44,40],[49,4,45,4],[49,12,45,12,"binaryType"],[49,22,45,22],[50,6,46,8],[50,11,46,13],[50,17,46,19],[51,8,47,12],[51,12,47,16,"data"],[51,16,47,20],[51,28,47,32,"Blob"],[51,32,47,36],[51,34,47,38],[52,10,48,16],[53,10,49,16],[53,17,49,23,"data"],[53,21,49,27],[54,8,50,12],[54,9,50,13],[54,15,51,17],[55,10,52,16],[56,10,53,16],[56,17,53,23],[56,21,53,27,"Blob"],[56,25,53,31],[56,26,53,32],[56,27,53,33,"data"],[56,31,53,37],[56,32,53,38],[56,33,53,39],[57,8,54,12],[58,6,55,8],[58,11,55,13],[58,24,55,26],[59,6,56,8],[60,8,57,12],[60,12,57,16,"data"],[60,16,57,20],[60,28,57,32,"ArrayBuffer"],[60,39,57,43],[60,41,57,45],[61,10,58,16],[62,10,59,16],[62,17,59,23,"data"],[62,21,59,27],[63,8,60,12],[63,9,60,13],[63,15,61,17],[64,10,62,16],[65,10,63,16],[65,17,63,23,"data"],[65,21,63,27],[65,22,63,28,"buffer"],[65,28,63,34],[66,8,64,12],[67,4,65,4],[68,2,66,0],[68,3,66,1],[69,0,66,2],[69,3]],"functionMap":{"names":["<global>","decodePacket","decodeBase64Packet","mapBinary"],"mappings":"AAA;qBCM;CD0B;2BEE;CFQ;kBGC;CHsB"},"hasCjsExports":true},"type":"js/module"}]}