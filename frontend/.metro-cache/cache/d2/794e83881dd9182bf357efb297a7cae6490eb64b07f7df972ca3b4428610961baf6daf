{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../trackPlayer","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":46},"end":{"line":3,"column":45,"index":91}}],"key":"gv0d7JcxMdf3FxyZp+tv0d0XSJ0=","exportNames":["*"],"imports":1}},{"name":"../constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":92},"end":{"line":4,"column":37,"index":129}}],"key":"eTOOXVNPpMK2U8dOAmBWjbEJ4yE=","exportNames":["*"],"imports":1}},{"name":"./useTrackPlayerEvents","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":177},"end":{"line":6,"column":62,"index":239}}],"key":"fnU5Qjl2KmnIM/3qfH8OcXLTCuk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useProgress = useProgress;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var _trackPlayer = require(_dependencyMap[3], \"../trackPlayer\");\n  var _constants = require(_dependencyMap[4], \"../constants\");\n  var _useTrackPlayerEvents = require(_dependencyMap[5], \"./useTrackPlayerEvents\");\n  var INITIAL_STATE = {\n    position: 0,\n    duration: 0,\n    buffered: 0\n  };\n\n  /**\n   * Poll for track progress for the given interval (in miliseconds)\n   * @param updateInterval - ms interval\n   */\n  function useProgress() {\n    var updateInterval = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1000;\n    var _useState = (0, _react.useState)(INITIAL_STATE),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n    (0, _useTrackPlayerEvents.useTrackPlayerEvents)([_constants.Event.PlaybackActiveTrackChanged], () => {\n      setState(INITIAL_STATE);\n    });\n    (0, _react.useEffect)(() => {\n      var mounted = true;\n      var update = /*#__PURE__*/function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          try {\n            var _yield$getProgress = yield (0, _trackPlayer.getProgress)(),\n              position = _yield$getProgress.position,\n              duration = _yield$getProgress.duration,\n              buffered = _yield$getProgress.buffered;\n            if (!mounted) return;\n            setState(state => position === state.position && duration === state.duration && buffered === state.buffered ? state : {\n              position,\n              duration,\n              buffered\n            });\n          } catch {\n            // these method only throw while you haven't yet setup, ignore failure.\n          }\n        });\n        return function update() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n      var _poll = /*#__PURE__*/function () {\n        var _ref2 = (0, _asyncToGenerator.default)(function* () {\n          yield update();\n          if (!mounted) return;\n          yield new Promise(resolve => setTimeout(resolve, updateInterval));\n          if (!mounted) return;\n          _poll();\n        });\n        return function poll() {\n          return _ref2.apply(this, arguments);\n        };\n      }();\n      _poll();\n      return () => {\n        mounted = false;\n      };\n    }, [updateInterval]);\n    return state;\n  }\n});","lineCount":82,"map":[[12,2,18,0,"exports"],[12,9,18,0],[12,10,18,0,"useProgress"],[12,21,18,0],[12,24,18,0,"useProgress"],[12,35,18,0],[13,2,61,1],[13,6,61,1,"_babelRuntimeHelpersAsyncToGenerator"],[13,42,61,1],[13,45,61,1,"require"],[13,52,61,1],[13,53,61,1,"_dependencyMap"],[13,67,61,1],[14,2,61,1],[14,6,61,1,"_asyncToGenerator"],[14,23,61,1],[14,26,61,1,"_interopDefault"],[14,41,61,1],[14,42,61,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,78,61,1],[15,2,61,1],[15,6,61,1,"_babelRuntimeHelpersSlicedToArray"],[15,39,61,1],[15,42,61,1,"require"],[15,49,61,1],[15,50,61,1,"_dependencyMap"],[15,64,61,1],[16,2,61,1],[16,6,61,1,"_slicedToArray"],[16,20,61,1],[16,23,61,1,"_interopDefault"],[16,38,61,1],[16,39,61,1,"_babelRuntimeHelpersSlicedToArray"],[16,72,61,1],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,3,0],[18,6,3,0,"_trackPlayer"],[18,18,3,0],[18,21,3,0,"require"],[18,28,3,0],[18,29,3,0,"_dependencyMap"],[18,43,3,0],[19,2,4,0],[19,6,4,0,"_constants"],[19,16,4,0],[19,19,4,0,"require"],[19,26,4,0],[19,27,4,0,"_dependencyMap"],[19,41,4,0],[20,2,6,0],[20,6,6,0,"_useTrackPlayerEvents"],[20,27,6,0],[20,30,6,0,"require"],[20,37,6,0],[20,38,6,0,"_dependencyMap"],[20,52,6,0],[21,2,8,0],[21,6,8,6,"INITIAL_STATE"],[21,19,8,19],[21,22,8,22],[22,4,9,2,"position"],[22,12,9,10],[22,14,9,12],[22,15,9,13],[23,4,10,2,"duration"],[23,12,10,10],[23,14,10,12],[23,15,10,13],[24,4,11,2,"buffered"],[24,12,11,10],[24,14,11,12],[25,2,12,0],[25,3,12,1],[27,2,14,0],[28,0,15,0],[29,0,16,0],[30,0,17,0],[31,2,18,7],[31,11,18,16,"useProgress"],[31,22,18,27,"useProgress"],[31,23,18,27],[31,25,18,51],[32,4,18,51],[32,8,18,28,"updateInterval"],[32,22,18,42],[32,25,18,42,"arguments"],[32,34,18,42],[32,35,18,42,"length"],[32,41,18,42],[32,49,18,42,"arguments"],[32,58,18,42],[32,66,18,42,"undefined"],[32,75,18,42],[32,78,18,42,"arguments"],[32,87,18,42],[32,93,18,45],[32,97,18,49],[33,4,19,2],[33,8,19,2,"_useState"],[33,17,19,2],[33,20,19,28],[33,24,19,28,"useState"],[33,30,19,36],[33,31,19,36,"useState"],[33,39,19,36],[33,41,19,47,"INITIAL_STATE"],[33,54,19,60],[33,55,19,61],[34,6,19,61,"_useState2"],[34,16,19,61],[34,23,19,61,"_slicedToArray"],[34,37,19,61],[34,38,19,61,"default"],[34,45,19,61],[34,47,19,61,"_useState"],[34,56,19,61],[35,6,19,9,"state"],[35,11,19,14],[35,14,19,14,"_useState2"],[35,24,19,14],[36,6,19,16,"setState"],[36,14,19,24],[36,17,19,24,"_useState2"],[36,27,19,24],[37,4,21,2],[37,8,21,2,"useTrackPlayerEvents"],[37,29,21,22],[37,30,21,22,"useTrackPlayerEvents"],[37,50,21,22],[37,52,21,23],[37,53,21,24,"Event"],[37,63,21,29],[37,64,21,29,"Event"],[37,69,21,29],[37,70,21,30,"PlaybackActiveTrackChanged"],[37,96,21,56],[37,97,21,57],[37,99,21,59],[37,105,21,65],[38,6,22,4,"setState"],[38,14,22,12],[38,15,22,13,"INITIAL_STATE"],[38,28,22,26],[38,29,22,27],[39,4,23,2],[39,5,23,3],[39,6,23,4],[40,4,25,2],[40,8,25,2,"useEffect"],[40,14,25,11],[40,15,25,11,"useEffect"],[40,24,25,11],[40,26,25,12],[40,32,25,18],[41,6,26,4],[41,10,26,8,"mounted"],[41,17,26,15],[41,20,26,18],[41,24,26,22],[42,6,28,4],[42,10,28,10,"update"],[42,16,28,16],[43,8,28,16],[43,12,28,16,"_ref"],[43,16,28,16],[43,23,28,16,"_asyncToGenerator"],[43,40,28,16],[43,41,28,16,"default"],[43,48,28,16],[43,50,28,19],[43,63,28,31],[44,10,29,6],[44,14,29,10],[45,12,30,8],[45,16,30,8,"_yield$getProgress"],[45,34,30,8],[45,43,30,55],[45,47,30,55,"getProgress"],[45,59,30,66],[45,60,30,66,"getProgress"],[45,71,30,66],[45,73,30,67],[45,74,30,68],[46,14,30,16,"position"],[46,22,30,24],[46,25,30,24,"_yield$getProgress"],[46,43,30,24],[46,44,30,16,"position"],[46,52,30,24],[47,14,30,26,"duration"],[47,22,30,34],[47,25,30,34,"_yield$getProgress"],[47,43,30,34],[47,44,30,26,"duration"],[47,52,30,34],[48,14,30,36,"buffered"],[48,22,30,44],[48,25,30,44,"_yield$getProgress"],[48,43,30,44],[48,44,30,36,"buffered"],[48,52,30,44],[49,12,31,8],[49,16,31,12],[49,17,31,13,"mounted"],[49,24,31,20],[49,26,31,22],[50,12,33,8,"setState"],[50,20,33,16],[50,21,33,18,"state"],[50,26,33,23],[50,30,34,10,"position"],[50,38,34,18],[50,43,34,23,"state"],[50,48,34,28],[50,49,34,29,"position"],[50,57,34,37],[50,61,35,10,"duration"],[50,69,35,18],[50,74,35,23,"state"],[50,79,35,28],[50,80,35,29,"duration"],[50,88,35,37],[50,92,36,10,"buffered"],[50,100,36,18],[50,105,36,23,"state"],[50,110,36,28],[50,111,36,29,"buffered"],[50,119,36,37],[50,122,37,14,"state"],[50,127,37,19],[50,130,38,14],[51,14,38,16,"position"],[51,22,38,24],[52,14,38,26,"duration"],[52,22,38,34],[53,14,38,36,"buffered"],[54,12,38,45],[54,13,39,8],[54,14,39,9],[55,10,40,6],[55,11,40,7],[55,12,40,8],[55,18,40,14],[56,12,41,8],[57,10,41,8],[58,8,43,4],[58,9,43,5],[59,8,43,5],[59,24,28,10,"update"],[59,30,28,16,"update"],[59,31,28,16],[60,10,28,16],[60,17,28,16,"_ref"],[60,21,28,16],[60,22,28,16,"apply"],[60,27,28,16],[60,34,28,16,"arguments"],[60,43,28,16],[61,8,28,16],[62,6,28,16],[62,9,43,5],[63,6,45,4],[63,10,45,10,"poll"],[63,15,45,14],[64,8,45,14],[64,12,45,14,"_ref2"],[64,17,45,14],[64,24,45,14,"_asyncToGenerator"],[64,41,45,14],[64,42,45,14,"default"],[64,49,45,14],[64,51,45,17],[64,64,45,29],[65,10,46,6],[65,16,46,12,"update"],[65,22,46,18],[65,23,46,19],[65,24,46,20],[66,10,47,6],[66,14,47,10],[66,15,47,11,"mounted"],[66,22,47,18],[66,24,47,20],[67,10,48,6],[67,16,48,12],[67,20,48,16,"Promise"],[67,27,48,23],[67,28,48,31,"resolve"],[67,35,48,38],[67,39,48,43,"setTimeout"],[67,49,48,53],[67,50,48,54,"resolve"],[67,57,48,61],[67,59,48,63,"updateInterval"],[67,73,48,77],[67,74,48,78],[67,75,48,79],[68,10,49,6],[68,14,49,10],[68,15,49,11,"mounted"],[68,22,49,18],[68,24,49,20],[69,10,50,6,"poll"],[69,15,50,10],[69,16,50,11],[69,17,50,12],[70,8,51,4],[70,9,51,5],[71,8,51,5],[71,24,45,10,"poll"],[71,28,45,14,"poll"],[71,29,45,14],[72,10,45,14],[72,17,45,14,"_ref2"],[72,22,45,14],[72,23,45,14,"apply"],[72,28,45,14],[72,35,45,14,"arguments"],[72,44,45,14],[73,8,45,14],[74,6,45,14],[74,9,51,5],[75,6,53,4,"poll"],[75,11,53,8],[75,12,53,9],[75,13,53,10],[76,6,55,4],[76,13,55,11],[76,19,55,17],[77,8,56,6,"mounted"],[77,15,56,13],[77,18,56,16],[77,23,56,21],[78,6,57,4],[78,7,57,5],[79,4,58,2],[79,5,58,3],[79,7,58,5],[79,8,58,6,"updateInterval"],[79,22,58,20],[79,23,58,21],[79,24,58,22],[80,4,60,2],[80,11,60,9,"state"],[80,16,60,14],[81,2,61,0],[82,0,61,1],[82,3]],"functionMap":{"names":["<global>","useProgress","useTrackPlayerEvents$argument_1","useEffect$argument_0","update","setState$argument_0","poll","Promise$argument_0","<anonymous>"],"mappings":"AAA;OCiB;2DCG;GDE;YEE;mBCG;iBCK;8CDK;KDK;iBGE;8BCG,gDD;KHG;WKI;KLE;GFC;CDG"},"hasCjsExports":false},"type":"js/module"}]}