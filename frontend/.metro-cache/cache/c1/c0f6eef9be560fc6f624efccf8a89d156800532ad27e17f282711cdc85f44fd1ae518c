{"dependencies":[{"name":"expo-web-browser","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":125},"end":{"line":4,"column":47,"index":172}}],"key":"qFWzf28Sq0474idIhFBHQFboHaY=","exportNames":["*"],"imports":1}},{"name":"expo-auth-session","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":173},"end":{"line":5,"column":49,"index":222}}],"key":"s3shNvVlaQeRdxbAJkHAKmToFDc=","exportNames":["*"],"imports":1}},{"name":"expo-apple-authentication","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":223},"end":{"line":6,"column":65,"index":288}}],"key":"mRJXTzcWO44groSshK5EmK3GSiY=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"./authService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":381},"end":{"line":9,"column":40,"index":421}}],"key":"XFxKys9GPqca1/X1HiA2aCYN1QM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,_d){\"use strict\";function e(e){if(e&&e.__esModule)return e;var o={};return e&&Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(o,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),o.default=e,o}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return p}}),Object.defineProperty(_e,\"socialAuthService\",{enumerable:!0,get:function(){return d}});var o=e(r(_d[0])),t=e(r(_d[1])),n=e(r(_d[2]));r(_d[3]);var c,s=r(_d[4]),l=(c=s)&&c.__esModule?c:{default:c};o.maybeCompleteAuthSession();const u={authorizationEndpoint:'https://accounts.google.com/o/oauth2/v2/auth',tokenEndpoint:'https://oauth2.googleapis.com/token',userInfoEndpoint:'https://openidconnect.googleapis.com/v1/userinfo'},d={getRedirectUri(){{const e=t.makeRedirectUri({scheme:'megaradio',path:'oauth'});return console.log('[SocialAuth] Android redirect URI:',e),e}},async signInWithGoogle(){try{console.log('[SocialAuth] Starting Google Sign-In...');const e=this.getRedirectUri();console.log('[SocialAuth] Redirect URI:',e);const o=new t.AuthRequest({clientId:\"246210957471-18662dh38h9tmlk7nppdk15ucbha4emk.apps.googleusercontent.com\",scopes:['openid','profile','email'],redirectUri:e,responseType:t.ResponseType.Code,usePKCE:!0}),n=await o.promptAsync(u,{showInRecents:!0});if(console.log('[SocialAuth] Auth result type:',n.type),'success'===n.type){const c=n.params?.code;if(c){console.log('[SocialAuth] Got authorization code, exchanging for tokens...');try{const n=(await t.exchangeCodeAsync({clientId:\"246210957471-18662dh38h9tmlk7nppdk15ucbha4emk.apps.googleusercontent.com\",code:c,redirectUri:e,extraParams:{code_verifier:o.codeVerifier||''}},u)).idToken;if(!n)return{success:!1,error:'No ID token received from Google'};{console.log('[SocialAuth] Got ID token, sending to backend...');const e=await l.default.googleSignIn(n);if(e.token&&e.user)return{success:!0,token:e.token,user:{id:e.user._id,email:e.user.email,name:e.user.fullName,avatar:e.user.avatar}}}}catch(e){return console.error('[SocialAuth] Token exchange error:',e),{success:!1,error:e.message||'Failed to exchange authorization code'}}}return{success:!1,error:'No authorization code received from Google'}}return'cancel'===n.type||'dismiss'===n.type?{success:!1,error:'Authentication cancelled'}:'error'===n.type?(console.error('[SocialAuth] Auth error:',n.error),{success:!1,error:n.error?.message||'Google Sign-In failed'}):{success:!1,error:'Google Sign-In failed'}}catch(e){return console.error('[SocialAuth] Google Sign-In error:',e),{success:!1,error:e.message||'Google Sign-In failed'}}},async signInWithApple(){try{console.log('[SocialAuth] Starting Apple Sign-In...');if(!await n.isAvailableAsync())return{success:!1,error:'Apple Sign-In is only available on iOS devices'};const e=await n.signInAsync({requestedScopes:[n.AppleAuthenticationScope.FULL_NAME,n.AppleAuthenticationScope.EMAIL]});console.log('[SocialAuth] Got Apple credential');const{identityToken:o,authorizationCode:t,fullName:c,email:s}=e;if(!o||!t)return{success:!1,error:'Failed to get Apple credentials'};let u='';if(c){u=[c.givenName,c.familyName].filter(Boolean).join(' ')}console.log('[SocialAuth] Sending Apple credentials to backend...');try{const e=await l.default.appleSignIn(o,t,u||void 0,s||void 0);if(e.token&&e.user)return{success:!0,token:e.token,user:{id:e.user._id,email:e.user.email,name:e.user.fullName,avatar:e.user.avatar}}}catch(e){return console.error('[SocialAuth] Backend error:',e),{success:!1,error:e.response?.data?.error||'Backend authentication failed'}}return{success:!1,error:'Backend authentication failed'}}catch(e){return console.error('[SocialAuth] Apple Sign-In error:',e),'ERR_REQUEST_CANCELED'===e.code||'ERR_CANCELED'===e.code?{success:!1,error:'Authentication cancelled'}:{success:!1,error:e.message||'Apple Sign-In failed'}}},signInWithFacebook:async()=>({success:!1,error:'Facebook Sign-In is not available yet'}),async isAppleSignInAvailable(){try{return await n.isAvailableAsync()}catch{return!1}},getGoogleRedirectUriForConsole(){const e=this.getRedirectUri();return console.log('[SocialAuth] Configure this URI in Google Cloud Console:',e),e}};var p=d});","lineCount":1,"map":[[1,327,304,0,"Object"],[1,334,304,0,"defineProperty"],[1,349,304,0,"_e"],[1,352,304,0],[1,363,304,0,"enumerable"],[1,375,304,0],[1,377,304,0,"get"],[1,381,304,0],[1,399,304,0,"_default"],[1,400,304,0],[1,404,53,0,"Object"],[1,411,53,0,"defineProperty"],[1,426,53,0,"_e"],[1,429,53,0],[1,450,53,0,"enumerable"],[1,462,53,0],[1,464,53,0,"get"],[1,468,53,0],[1,486,53,0,"socialAuthService"],[1,487,53,0],[1,491,4,0],[1,495,4,0,"WebBrowser"],[1,497,4,0,"_interopNamespace"],[1,499,4,0,"r"],[1,501,4,0,"_d"],[1,504,4,0],[1,509,5,0,"AuthSession"],[1,511,5,0,"_interopNamespace"],[1,513,5,0,"r"],[1,515,5,0,"_d"],[1,518,5,0],[1,523,6,0,"AppleAuthentication"],[1,525,6,0,"_interopNamespace"],[1,527,6,0,"r"],[1,529,6,0,"_d"],[1,532,6,0],[1,537,6,65,"r"],[1,539,6,65,"_d"],[1,542,6,65],[1,546,9,0],[1,550],[1,552,9,0,"_authService"],[1,554,9,0,"r"],[1,556,9,0,"_d"],[1,559,9,0],[1,563,9,0,"authService"],[1,566],[1,568,9,0,"_authService"],[1,572],[1,599,12,0,"WebBrowser"],[1,601,12,11,"maybeCompleteAuthSession"],[1,628,31,0],[1,634,43,6,"GOOGLE_DISCOVERY"],[1,636,43,25],[1,637,44,2,"authorizationEndpoint"],[1,659,44,25],[1,706,45,2,"tokenEndpoint"],[1,720,45,17],[1,758,46,2,"userInfoEndpoint"],[1,775,46,20],[1,827,53,13,"socialAuthService"],[1,829,53,33],[1,830,59,2,"getRedirectUri"],[1,847,67,11],[1,848,69,6],[1,854,69,12,"redirectUri"],[1,856,69,26,"AuthSession"],[1,858,69,38,"makeRedirectUri"],[1,874,69,54],[1,875,70,8,"scheme"],[1,882,70,16],[1,894,71,8,"path"],[1,899,71,14],[1,909,74,6],[1,916,73,6,"console"],[1,924,73,14,"log"],[1,928,73,18],[1,965,73,56,"redirectUri"],[1,968,74,13,"redirectUri"],[1,969,75,4],[1,970,76,2],[1,972,82,2],[1,994,82,8,"signInWithGoogle"],[1,997,83,4],[1,1001,84,6,"console"],[1,1009,84,14,"log"],[1,1013,84,18],[1,1056,86,6],[1,1062,86,12,"redirectUri"],[1,1064,86,26,"this"],[1,1069,86,31,"getRedirectUri"],[1,1086,87,6,"console"],[1,1094,87,14,"log"],[1,1098,87,18],[1,1127,87,48,"redirectUri"],[1,1130,90,6],[1,1136,90,12,"request"],[1,1138,90,22],[1,1142,90,26,"AuthSession"],[1,1144,90,38,"AuthRequest"],[1,1156,90,50],[1,1157,91,8,"clientId"],[1,1166,31,29],[1,1241,92,8,"scopes"],[1,1248,92,16],[1,1249,92,17],[1,1258,92,27],[1,1268,92,38],[1,1277,93,8,"redirectUri"],[1,1291,94,8,"responseType"],[1,1304,94,22,"AuthSession"],[1,1306,94,34,"ResponseType"],[1,1319,94,47,"Code"],[1,1324,95,8,"usePKCE"],[1,1333,95,17],[1,1337,99,12,"result"],[1,1345,99,27,"request"],[1,1347,99,35,"promptAsync"],[1,1359,99,47,"GOOGLE_DISCOVERY"],[1,1361,99,65],[1,1362,100,8,"showInRecents"],[1,1377,100,23],[1,1381,105,6],[1,1384,103,6,"console"],[1,1392,103,14,"log"],[1,1396,103,18],[1,1429,103,52,"result"],[1,1431,103,59,"type"],[1,1437,105,26],[1,1449,105,10,"result"],[1,1451,105,17,"type"],[1,1456,105,37],[1,1457,107,8],[1,1463,107,14,"code"],[1,1465,107,21,"result"],[1,1467,107,28,"params"],[1,1475,107,36,"code"],[1,1480,109,8],[1,1483,109,12,"code"],[1,1485,109,18],[1,1486,110,10,"console"],[1,1494,110,18,"log"],[1,1498,110,22],[1,1563,112,10],[1,1567,114,12],[1,1573,126,18,"idToken"],[1,1582,114,40,"AuthSession"],[1,1584,114,52,"exchangeCodeAsync"],[1,1602,115,14],[1,1603,116,16,"clientId"],[1,1612,31,29],[1,1687,117,16,"code"],[1,1694,118,16,"redirectUri"],[1,1708,119,16,"extraParams"],[1,1720,119,29],[1,1721,120,18,"code_verifier"],[1,1735,120,33,"request"],[1,1737,120,41,"codeVerifier"],[1,1751,120,57],[1,1756,123,14,"GOOGLE_DISCOVERY"],[1,1760,126,42,"idToken"],[1,1768,128,12],[1,1772,128,16,"idToken"],[1,1774,147,14],[1,1780,147,21],[1,1781,147,23,"success"],[1,1790,147,32],[1,1792,147,39,"error"],[1,1798,147,46],[1,1834,128,25],[1,1835,129,14,"console"],[1,1843,129,22,"log"],[1,1847,129,26],[1,1899,132,14],[1,1905,132,20,"backendResponse"],[1,1913,132,44,"authService"],[1,1915,132,55,"default"],[1,1923,132,56,"googleSignIn"],[1,1936,132,69,"idToken"],[1,1939,134,14],[1,1942,134,18,"backendResponse"],[1,1944,134,34,"token"],[1,1951,134,43,"backendResponse"],[1,1953,134,59,"user"],[1,1958,135,16],[1,1964,135,23],[1,1965,136,18,"success"],[1,1974,136,27],[1,1976,137,18,"token"],[1,1982,137,25,"backendResponse"],[1,1984,137,41,"token"],[1,1990,138,18,"user"],[1,1995,138,24],[1,1996,139,20,"id"],[1,1999,139,24,"backendResponse"],[1,2001,139,40,"user"],[1,2006,139,45,"_id"],[1,2010,140,20,"email"],[1,2016,140,27,"backendResponse"],[1,2018,140,43,"user"],[1,2023,140,48,"email"],[1,2029,141,20,"name"],[1,2034,141,26,"backendResponse"],[1,2036,141,42,"user"],[1,2041,141,47,"fullName"],[1,2050,142,20,"avatar"],[1,2057,142,28,"backendResponse"],[1,2059,142,44,"user"],[1,2064,142,49,"avatar"],[1,2072,146,12],[1,2073,149,10],[1,2074,149,12],[1,2080,149,19,"tokenError"],[1,2083,151,12],[1,2090,150,12,"console"],[1,2098,150,20,"error"],[1,2104,150,26],[1,2141,150,64,"tokenError"],[1,2144,151,19],[1,2145,152,14,"success"],[1,2154,152,23],[1,2156,153,14,"error"],[1,2162,153,21,"tokenError"],[1,2164,153,32,"message"],[1,2173,153,43],[1,2213,155,10],[1,2214,156,8],[1,2215,158,8],[1,2221,158,15],[1,2222,158,17,"success"],[1,2231,158,26],[1,2233,158,33,"error"],[1,2239,158,40],[1,2284,159,6],[1,2285,159,13],[1,2291,159,33],[1,2302,159,17,"result"],[1,2304,159,24,"type"],[1,2310,159,61],[1,2322,159,45,"result"],[1,2324,159,52,"type"],[1,2329,160,15],[1,2330,160,17,"success"],[1,2339,160,26],[1,2341,160,33,"error"],[1,2347,160,40],[1,2375,161,33],[1,2385,161,17,"result"],[1,2387,161,24,"type"],[1,2393,162,8,"console"],[1,2401,162,16,"error"],[1,2407,162,22],[1,2434,162,50,"result"],[1,2436,162,57,"error"],[1,2443,163,15],[1,2444,164,10,"success"],[1,2453,164,19],[1,2455,165,10,"error"],[1,2461,165,17,"result"],[1,2463,165,24,"error"],[1,2470,165,31,"message"],[1,2479,165,42],[1,2505,169,13],[1,2506,169,15,"success"],[1,2515,169,24],[1,2517,169,31,"error"],[1,2523,169,38],[1,2547,170,4],[1,2548,170,6],[1,2554,170,13,"error"],[1,2557,172,6],[1,2564,171,6,"console"],[1,2572,171,14,"error"],[1,2578,171,20],[1,2615,171,58,"error"],[1,2618,172,13],[1,2619,173,8,"success"],[1,2628,173,17],[1,2630,174,8,"error"],[1,2636,174,15,"error"],[1,2638,174,21,"message"],[1,2647,174,32],[1,2671,176,4],[1,2672,177,2],[1,2674,183,2],[1,2695,183,8,"signInWithApple"],[1,2698,184,4],[1,2702,185,6,"console"],[1,2710,185,14,"log"],[1,2714,185,18],[1,2756,190,6],[1,2766,188,32,"AppleAuthentication"],[1,2768,188,52,"isAvailableAsync"],[1,2787,191,8],[1,2793,191,15],[1,2794,192,10,"success"],[1,2803,192,19],[1,2805,193,10,"error"],[1,2811,195,14],[1,2861,200,6],[1,2867,200,12,"credential"],[1,2875,200,31,"AppleAuthentication"],[1,2877,200,51,"signInAsync"],[1,2889,200,63],[1,2890,201,8,"requestedScopes"],[1,2906,201,25],[1,2907,202,10,"AppleAuthentication"],[1,2909,202,30,"AppleAuthenticationScope"],[1,2934,202,55,"FULL_NAME"],[1,2944,203,10,"AppleAuthentication"],[1,2946,203,30,"AppleAuthenticationScope"],[1,2971,203,55,"EMAIL"],[1,2980,207,6,"console"],[1,2988,207,14,"log"],[1,2992,207,18],[1,3029,210,6],[1,3035,210,12,"identityToken"],[1,3049,210,14,"identityToken"],[1,3051,210,27,"authorizationCode"],[1,3069,210,29,"authorizationCode"],[1,3071,210,46,"fullName"],[1,3080,210,48,"fullName"],[1,3082,210,56,"email"],[1,3088,210,58,"email"],[1,3091,210,68,"credential"],[1,3093,212,6],[1,3097,212,11,"identityToken"],[1,3101,212,29,"authorizationCode"],[1,3103,213,8],[1,3109,213,15],[1,3110,214,10,"success"],[1,3119,214,19],[1,3121,215,10,"error"],[1,3127,215,17],[1,3162,220,6],[1,3166,220,10,"userName"],[1,3168,220,21],[1,3171,221,6],[1,3174,221,10,"fullName"],[1,3176,221,20],[1,3177,223,8,"userName"],[1,3179,222,26],[1,3180,222,27,"fullName"],[1,3182,222,36,"givenName"],[1,3192,222,47,"fullName"],[1,3194,222,56,"familyName"],[1,3206,222,68,"filter"],[1,3213,222,75,"Boolean"],[1,3222,223,29,"join"],[1,3227,223,34],[1,3231,224,6],[1,3232,226,6,"console"],[1,3240,226,14,"log"],[1,3244,226,18],[1,3300,229,6],[1,3304,230,8],[1,3310,230,14,"backendResponse"],[1,3318,230,38,"authService"],[1,3320,230,49,"default"],[1,3328,230,50,"appleSignIn"],[1,3340,231,10,"identityToken"],[1,3342,232,10,"authorizationCode"],[1,3344,233,10,"userName"],[1,3352,233,22,"undefined"],[1,3354,234,10,"email"],[1,3362,234,19,"undefined"],[1,3365,237,8],[1,3368,237,12,"backendResponse"],[1,3370,237,28,"token"],[1,3377,237,37,"backendResponse"],[1,3379,237,53,"user"],[1,3384,238,10],[1,3390,238,17],[1,3391,239,12,"success"],[1,3400,239,21],[1,3402,240,12,"token"],[1,3408,240,19,"backendResponse"],[1,3410,240,35,"token"],[1,3416,241,12,"user"],[1,3421,241,18],[1,3422,242,14,"id"],[1,3425,242,18,"backendResponse"],[1,3427,242,34,"user"],[1,3432,242,39,"_id"],[1,3436,243,14,"email"],[1,3442,243,21,"backendResponse"],[1,3444,243,37,"user"],[1,3449,243,42,"email"],[1,3455,244,14,"name"],[1,3460,244,20,"backendResponse"],[1,3462,244,36,"user"],[1,3467,244,41,"fullName"],[1,3476,245,14,"avatar"],[1,3483,245,22,"backendResponse"],[1,3485,245,38,"user"],[1,3490,245,43,"avatar"],[1,3498,249,6],[1,3499,249,8],[1,3505,249,15,"backendError"],[1,3508,251,8],[1,3515,250,8,"console"],[1,3523,250,16,"error"],[1,3529,250,22],[1,3559,250,53,"backendError"],[1,3562,251,15],[1,3563,252,10,"success"],[1,3572,252,19],[1,3574,253,10,"error"],[1,3580,253,17,"backendError"],[1,3582,253,30,"response"],[1,3592,253,40,"data"],[1,3598,253,46,"error"],[1,3605,253,55],[1,3637,255,6],[1,3638,257,6],[1,3644,257,13],[1,3645,257,15,"success"],[1,3654,257,24],[1,3656,257,31,"error"],[1,3662,257,38],[1,3694,258,4],[1,3695,258,6],[1,3701,258,13,"error"],[1,3704,262,6],[1,3711,259,6,"console"],[1,3719,259,14,"error"],[1,3725,259,20],[1,3761,259,57,"error"],[1,3764,262,25],[1,3789,262,10,"error"],[1,3791,262,16,"code"],[1,3797,262,66],[1,3814,262,51,"error"],[1,3816,262,57,"code"],[1,3821,263,15],[1,3822,263,17,"success"],[1,3831,263,26],[1,3833,263,33,"error"],[1,3839,263,40],[1,3867,266,13],[1,3868,267,8,"success"],[1,3877,267,17],[1,3879,268,8,"error"],[1,3885,268,15,"error"],[1,3887,268,21,"message"],[1,3896,268,32],[1,3919,270,4],[1,3920,271,2],[1,3922,276,2,"async"],[1,3941,276,26,"signInWithFacebook"],[1,3951,277,11],[1,3952,278,6,"success"],[1,3961,278,15],[1,3963,279,6,"error"],[1,3969,279,13],[1,4011,286,2],[1,4039,286,8,"isAppleSignInAvailable"],[1,4042,287,4],[1,4046,288,6],[1,4059,288,19,"AppleAuthentication"],[1,4061,288,39,"isAvailableAsync"],[1,4079,289,4],[1,4080,289,6],[1,4086,290,6],[1,4093,290,13],[1,4094,291,4],[1,4095,292,2],[1,4097,297,2,"getGoogleRedirectUriForConsole"],[1,4130,298,4],[1,4136,298,10,"uri"],[1,4138,298,16,"this"],[1,4143,298,21,"getRedirectUri"],[1,4160,300,4],[1,4167,299,4,"console"],[1,4175,299,12,"log"],[1,4179,299,16],[1,4238,299,76,"uri"],[1,4241,300,11,"uri"],[1,4242,301,2],[1,4245,304,0],[1,4249,304,0,"_default"],[1,4251,304,15,"socialAuthService"],[1,4252,304,33],[1,4255]],"functionMap":{"names":["<global>","getGoogleClientId","getRedirectUri","signInWithGoogle","signInWithApple","signInWithFacebook","isAppleSignInAvailable","getGoogleRedirectUriForConsole"],"mappings":"AAA;0BCkC;CDK;EEmB;GFiB;EGM;GH+F;EIM;GJwF;EKK;GLK;EMK;GNM;EOK;GPI"},"hasCjsExports":false},"type":"js/module"}]}