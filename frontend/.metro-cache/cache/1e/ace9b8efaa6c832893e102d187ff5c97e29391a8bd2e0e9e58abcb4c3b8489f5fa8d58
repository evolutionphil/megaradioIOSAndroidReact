{"dependencies":[{"name":"../transport.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":23,"index":260},"end":{"line":7,"column":49,"index":286}}],"key":"lFCvJFzyfVWMX45Bf0f/rFXObZ0=","exportNames":["*"],"imports":1}},{"name":"../globals.node.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":26,"index":314},"end":{"line":8,"column":55,"index":343}}],"key":"ZfdmBFq8qn8BbA89eBFcCa3JjTk=","exportNames":["*"],"imports":1}},{"name":"engine.io-parser","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":27,"index":372},"end":{"line":9,"column":54,"index":399}}],"key":"ZdCLryCFqJSS+1R9t7L2i2r0/QM=","exportNames":["*"],"imports":1}},{"name":"debug","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":32,"index":433},"end":{"line":10,"column":48,"index":449}}],"key":"iZ55sBoXw9WwOGuopuB9Sv3DBX8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,_i,a,m,e,d){\"use strict\";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,\"__esModule\",{value:!0}),e.WT=void 0;const s=r(d[0]),i=r(d[1]),n=r(d[2]),o=(0,t(r(d[3])).default)(\"engine.io-client:webtransport\");class h extends s.Transport{get name(){return\"webtransport\"}doOpen(){try{this._transport=new WebTransport(this.createUri(\"https\"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved(\"error\",t)}this._transport.closed.then(()=>{o(\"transport closed gracefully\"),this.onClose()}).catch(t=>{o(\"transport closed due to %s\",t),this.onError(\"webtransport error\",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const s=(0,n.createPacketDecoderStream)(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(s).getReader(),h=(0,n.createPacketEncoderStream)();h.readable.pipeTo(t.writable),this._writer=h.writable.getWriter();const c=()=>{i.read().then(({done:t,value:s})=>{t?o(\"session is closed\"):(o(\"received chunk: %o\",s),this.onPacket(s),c())}).catch(t=>{o(\"an error occurred while reading: %s\",t)})};c();const l={type:\"open\"};this.query.sid&&(l.data=`{\"sid\":\"${this.query.sid}\"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let s=0;s<t.length;s++){const n=t[s],o=s===t.length-1;this._writer.write(n).then(()=>{o&&(0,i.nextTick)(()=>{this.writable=!0,this.emitReserved(\"drain\")},this.setTimeoutFn)})}}doClose(){var t;null===(t=this._transport)||void 0===t||t.close()}}e.WT=h});","lineCount":1,"map":[[1,29,1,0],[1,42,2,0],[1,46,2,4,"__importDefault"],[1,48,2,23,"this"],[1,54,2,31,"this"],[1,59,2,36,"__importDefault"],[1,76,2,56],[1,85,2,66,"mod"],[1,88,3,4],[1,95,3,12,"mod"],[1,98,3,19,"mod"],[1,100,3,23,"__esModule"],[1,111,3,37,"mod"],[1,113,3,43],[1,114,3,45,"default"],[1,122,3,56,"mod"],[1,124,4,0],[1,126,5,0,"Object"],[1,133,5,7,"defineProperty"],[1,148,5,22,"exports"],[1,150,5,31],[1,163,5,45],[1,164,5,47,"value"],[1,171,5,54],[1,175,6,0,"exports"],[1,177,6,8,"WT"],[1,185,6,10,"undefined"],[1,187,7,0],[1,193,7,6,"transport_js_1"],[1,195,7,23,"require"],[1,197,7,30,"d"],[1,199,7,30],[1,203,8,6,"globals_node_js_1"],[1,205,8,26,"require"],[1,207,8,33,"d"],[1,209,8,33],[1,213,9,6,"engine_io_parser_1"],[1,215,9,27,"require"],[1,217,9,34,"d"],[1,219,9,34],[1,223,11,6,"debug"],[1,226,11,14],[1,228,10,16,"__importDefault"],[1,230,10,32,"require"],[1,232,10,39,"d"],[1,234,10,39],[1,239,11,26,"default"],[1,248,11,35],[1,281,20,0],[1,287,20,6,"WT"],[1,297,20,17,"transport_js_1"],[1,299,20,32,"Transport"],[1,309,21,4],[1,317,21,8,"name"],[1,320,22,8],[1,326,22,15],[1,340,23,4],[1,341,24,4,"doOpen"],[1,350,25,8],[1,354,27,12,"this"],[1,359,27,17,"_transport"],[1,370,27,30],[1,374,27,34,"WebTransport"],[1,387,27,47,"this"],[1,392,27,52,"createUri"],[1,402,27,62],[1,411,27,72,"this"],[1,416,27,77,"opts"],[1,421,27,82,"transportOptions"],[1,438,27,99,"this"],[1,443,27,104,"name"],[1,449,28,8],[1,450,29,8],[1,456,29,15,"err"],[1,459,30,12],[1,466,30,19,"this"],[1,471,30,24,"emitReserved"],[1,484,30,37],[1,492,30,46,"err"],[1,494,31,8],[1,495,32,8,"this"],[1,500,32,13,"_transport"],[1,511,32,24,"closed"],[1,518,33,13,"then"],[1,523,33,18],[1,528,34,12,"debug"],[1,530,34,18],[1,561,35,12,"this"],[1,566,35,17,"onClose"],[1,578,37,13,"catch"],[1,584,37,20,"err"],[1,588,38,12,"debug"],[1,590,38,18],[1,619,38,48,"err"],[1,622,39,12,"this"],[1,627,39,17,"onError"],[1,635,39,25],[1,656,39,47,"err"],[1,661,42,8,"this"],[1,666,42,13,"_transport"],[1,677,42,24,"ready"],[1,683,42,30,"then"],[1,688,42,35],[1,693,43,12,"this"],[1,698,43,17,"_transport"],[1,709,43,28,"createBidirectionalStream"],[1,737,43,56,"then"],[1,742,43,62,"stream"],[1,746,44,16],[1,752,44,22,"decoderStream"],[1,755,44,38],[1,757,44,42,"engine_io_parser_1"],[1,759,44,61,"createPacketDecoderStream"],[1,786,44,88,"Number"],[1,793,44,95,"MAX_SAFE_INTEGER"],[1,810,44,113,"this"],[1,815,44,118,"socket"],[1,822,44,125,"binaryType"],[1,834,45,22,"reader"],[1,836,45,31,"stream"],[1,838,45,38,"readable"],[1,847,45,47,"pipeThrough"],[1,859,45,59,"decoderStream"],[1,862,45,74,"getReader"],[1,874,46,22,"encoderStream"],[1,877,46,38],[1,879,46,42,"engine_io_parser_1"],[1,881,46,61,"createPacketEncoderStream"],[1,910,47,16,"encoderStream"],[1,912,47,30,"readable"],[1,921,47,39,"pipeTo"],[1,928,47,46,"stream"],[1,930,47,53,"writable"],[1,940,48,16,"this"],[1,945,48,21,"_writer"],[1,953,48,31,"encoderStream"],[1,955,48,45,"writable"],[1,964,48,54,"getWriter"],[1,976,49,16],[1,982,49,22,"read"],[1,984,49,29,"read"],[1,989,50,20,"reader"],[1,991,51,25,"read"],[1,998,52,25,"then"],[1,1003,52,30],[1,1005,52,33,"done"],[1,1012,52,39,"value"],[1,1024,53,28,"done"],[1,1026,54,28,"debug"],[1,1028,54,34],[1,1050,57,24,"debug"],[1,1052,57,30],[1,1073,57,52,"value"],[1,1076,58,24,"this"],[1,1081,58,29,"onPacket"],[1,1090,58,38,"value"],[1,1093,59,24,"read"],[1,1100,61,25,"catch"],[1,1106,61,32,"err"],[1,1110,62,24,"debug"],[1,1112,62,30],[1,1150,62,69,"err"],[1,1156,65,16,"read"],[1,1160,66,16],[1,1166,66,22,"packet"],[1,1168,66,31],[1,1169,66,33,"type"],[1,1174,66,39],[1,1182,67,20,"this"],[1,1187,67,25,"query"],[1,1193,67,31,"sid"],[1,1199,68,20,"packet"],[1,1201,68,27,"data"],[1,1206,68,34],[1,1217,68,45,"this"],[1,1222,68,50,"query"],[1,1228,68,56,"sid"],[1,1237,70,16,"this"],[1,1242,70,21,"_writer"],[1,1250,70,29,"write"],[1,1256,70,35,"packet"],[1,1259,70,43,"then"],[1,1264,70,48],[1,1268,70,54,"this"],[1,1273,70,59,"onOpen"],[1,1286,73,4],[1,1287,74,4,"write"],[1,1293,74,10,"packets"],[1,1296,75,8,"this"],[1,1301,75,13,"writable"],[1,1311,75,24],[1,1313,76,8],[1,1317,76,13],[1,1321,76,17,"i"],[1,1323,76,21],[1,1325,76,24,"i"],[1,1327,76,28,"packets"],[1,1329,76,36,"length"],[1,1336,76,44,"i"],[1,1340,76,49],[1,1341,77,12],[1,1347,77,18,"packet"],[1,1349,77,27,"packets"],[1,1351,77,35,"i"],[1,1354,78,18,"lastPacket"],[1,1356,78,31,"i"],[1,1360,78,37,"packets"],[1,1362,78,45,"length"],[1,1369,78,54],[1,1371,79,12,"this"],[1,1376,79,17,"_writer"],[1,1384,79,25,"write"],[1,1390,79,31,"packet"],[1,1393,79,39,"then"],[1,1398,79,44],[1,1403,80,20,"lastPacket"],[1,1407,81,20],[1,1409,81,24,"globals_node_js_1"],[1,1411,81,42,"nextTick"],[1,1421,81,52],[1,1426,82,24,"this"],[1,1431,82,29,"writable"],[1,1441,82,40],[1,1443,83,24,"this"],[1,1448,83,29,"emitReserved"],[1,1461,83,42],[1,1471,84,23,"this"],[1,1476,84,28,"setTimeoutFn"],[1,1491,87,8],[1,1492,88,4],[1,1493,89,4,"doClose"],[1,1503,90,8],[1,1507,90,12,"_a"],[1,1509,91,35],[1,1517,91,9,"_a"],[1,1519,91,14,"this"],[1,1524,91,19,"_transport"],[1,1542,91,45,"undefined"],[1,1546,91,43,"_a"],[1,1549,91,68,"_a"],[1,1551,91,71,"close"],[1,1558,92,4],[1,1560,94,0,"exports"],[1,1562,94,8,"WT"],[1,1565,94,13,"WT"],[1,1566,94,16],[1,1569]],"functionMap":{"names":["<global>","<anonymous>","WT","WT#get__name","WT#doOpen","_transport.closed.then$argument_0","_transport.closed.then._catch$argument_0","_transport.ready.then$argument_0","_transport.createBidirectionalStream.then$argument_0","read","reader.read.then$argument_0","reader.read.then._catch$argument_0","_writer.write.then$argument_0","WT#write","WT#doClose"],"mappings":"AAA;wDCC;CDE;AEgB;ICC;KDE;IEC;kBCS;SDG;mBEC;SFG;mCGE;6DCC;6BCM;8BCG;qBDQ;+BEC;qBFE;iBDC;gDIM,mBJ;aDC;SHC;KFC;IWC;4CDK;oDXE;qBWG;aCE;KXE;IYC;KZG;CFC"},"hasCjsExports":true},"type":"js/module"}]}