{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":156},"end":{"line":4,"column":42,"index":198}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":199},"end":{"line":5,"column":69,"index":268}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../store/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":269},"end":{"line":6,"column":50,"index":319}}],"key":"/4BDl/hqolvw7T4CXD8jWAtZK4M=","exportNames":["*"],"imports":1}},{"name":"../store/favoritesStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":320},"end":{"line":7,"column":60,"index":380}}],"key":"rQmi7ZiN3wSYC/3oB9X28qKmXrY=","exportNames":["*"],"imports":1}},{"name":"../hooks/useAudioPlayer","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":381},"end":{"line":8,"column":51,"index":432}}],"key":"pUckzGairsxi/1vGHJirSPNjmRQ=","exportNames":["*"],"imports":1}},{"name":"../services/stationService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":433},"end":{"line":9,"column":56,"index":489}}],"key":"uwHKYj7/xzUyIn0NC/c691Hz7MQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"PlayAtLoginHandler\", {\n    enumerable: true,\n    get: function () {\n      return PlayAtLoginHandler;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _react = require(_dependencyMap[1]);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2]);\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _storeAuthStore = require(_dependencyMap[3]);\n  var _storeFavoritesStore = require(_dependencyMap[4]);\n  var _hooksUseAudioPlayer = require(_dependencyMap[5]);\n  var _servicesStationService = require(_dependencyMap[6]);\n  var stationService = _interopDefault(_servicesStationService);\n  // PlayAtLoginHandler - Handles automatic playback on app start based on user settings\n  // Must be used inside AudioProvider to access playStation function\n\n  var PLAY_AT_LOGIN_KEY = 'play_at_login_setting';\n  var LAST_PLAYED_STATION_KEY = '@megaradio_last_played_station';\n  var PlayAtLoginHandler = () => {\n    var hasExecuted = (0, _react.useRef)(false);\n    var _useAuthStore = (0, _storeAuthStore.useAuthStore)(),\n      isAuthenticated = _useAuthStore.isAuthenticated;\n    var _useFavoritesStore = (0, _storeFavoritesStore.useFavoritesStore)(),\n      favorites = _useFavoritesStore.favorites;\n    var _useAudio = (0, _hooksUseAudioPlayer.useAudio)(),\n      playStation = _useAudio.playStation;\n    (0, _react.useEffect)(() => {\n      var executePlayAtLogin = /*#__PURE__*/function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          // Only execute once per app session\n          if (hasExecuted.current) {\n            return;\n          }\n\n          // Wait a bit for app to fully initialize\n          yield new Promise(resolve => setTimeout(resolve, 1500));\n\n          // Check if user is authenticated\n          if (!isAuthenticated) {\n            console.log('[PlayAtLogin] User not authenticated, skipping');\n            return;\n          }\n          try {\n            var setting = yield AsyncStorage.default.getItem(PLAY_AT_LOGIN_KEY);\n            console.log('[PlayAtLogin] Setting:', setting);\n            if (!setting || setting === 'off') {\n              console.log('[PlayAtLogin] Disabled or not set');\n              return;\n            }\n            hasExecuted.current = true;\n            var stationToPlay = null;\n            switch (setting) {\n              case 'last_played':\n                // Get last played station from storage\n                var lastPlayedJson = yield AsyncStorage.default.getItem(LAST_PLAYED_STATION_KEY);\n                if (lastPlayedJson) {\n                  stationToPlay = JSON.parse(lastPlayedJson);\n                  console.log('[PlayAtLogin] Last played station:', stationToPlay?.name);\n                }\n                break;\n              case 'favorite':\n                // Get first favorite station\n                if (favorites && favorites.length > 0) {\n                  stationToPlay = favorites[0];\n                  console.log('[PlayAtLogin] First favorite station:', stationToPlay?.name);\n                }\n                break;\n              case 'random':\n                // Get random station from API\n                try {\n                  var response = yield stationService.default.getStations({\n                    limit: 50\n                  });\n                  if (response?.stations && response.stations.length > 0) {\n                    var randomIndex = Math.floor(Math.random() * response.stations.length);\n                    stationToPlay = response.stations[randomIndex];\n                    console.log('[PlayAtLogin] Random station:', stationToPlay?.name);\n                  }\n                } catch (error) {\n                  console.error('[PlayAtLogin] Failed to fetch random station:', error);\n                }\n                break;\n            }\n            if (stationToPlay) {\n              console.log('[PlayAtLogin] Starting playback:', stationToPlay.name);\n              yield playStation(stationToPlay);\n            }\n          } catch (error) {\n            console.error('[PlayAtLogin] Error:', error);\n          }\n        });\n        return function executePlayAtLogin() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n      executePlayAtLogin();\n    }, [isAuthenticated, favorites, playStation]);\n\n    // This component doesn't render anything\n    return null;\n  };\n  var _default = PlayAtLoginHandler;\n});","lineCount":123,"map":[[12,2,98,0,"Object"],[12,8,98,0],[12,9,98,0,"defineProperty"],[12,23,98,0],[12,24,98,0,"exports"],[12,31,98,0],[13,4,98,0,"enumerable"],[13,14,98,0],[14,4,98,0,"get"],[14,7,98,0],[14,18,98,0,"get"],[14,19,98,0],[15,6,98,0],[15,13,98,0,"_default"],[15,21,98,0],[16,4,98,0],[17,2,98,0],[18,2,14,0,"Object"],[18,8,14,0],[18,9,14,0,"defineProperty"],[18,23,14,0],[18,24,14,0,"exports"],[18,31,14,0],[19,4,14,0,"enumerable"],[19,14,14,0],[20,4,14,0,"get"],[20,7,14,0],[20,18,14,0,"get"],[20,19,14,0],[21,6,14,0],[21,13,14,0,"PlayAtLoginHandler"],[21,31,14,0],[22,4,14,0],[23,2,14,0],[24,2,96,2],[24,6,96,2,"_babelRuntimeHelpersAsyncToGenerator"],[24,42,96,2],[24,45,96,2,"require"],[24,52,96,2],[24,53,96,2,"_dependencyMap"],[24,67,96,2],[25,2,96,2],[25,6,96,2,"_asyncToGenerator"],[25,23,96,2],[25,26,96,2,"_interopDefault"],[25,41,96,2],[25,42,96,2,"_babelRuntimeHelpersAsyncToGenerator"],[25,78,96,2],[26,2,4,0],[26,6,4,0,"_react"],[26,12,4,0],[26,15,4,0,"require"],[26,22,4,0],[26,23,4,0,"_dependencyMap"],[26,37,4,0],[27,2,5,0],[27,6,5,0,"_reactNativeAsyncStorageAsyncStorage"],[27,42,5,0],[27,45,5,0,"require"],[27,52,5,0],[27,53,5,0,"_dependencyMap"],[27,67,5,0],[28,2,5,0],[28,6,5,0,"AsyncStorage"],[28,18,5,0],[28,21,5,0,"_interopDefault"],[28,36,5,0],[28,37,5,0,"_reactNativeAsyncStorageAsyncStorage"],[28,73,5,0],[29,2,6,0],[29,6,6,0,"_storeAuthStore"],[29,21,6,0],[29,24,6,0,"require"],[29,31,6,0],[29,32,6,0,"_dependencyMap"],[29,46,6,0],[30,2,7,0],[30,6,7,0,"_storeFavoritesStore"],[30,26,7,0],[30,29,7,0,"require"],[30,36,7,0],[30,37,7,0,"_dependencyMap"],[30,51,7,0],[31,2,8,0],[31,6,8,0,"_hooksUseAudioPlayer"],[31,26,8,0],[31,29,8,0,"require"],[31,36,8,0],[31,37,8,0,"_dependencyMap"],[31,51,8,0],[32,2,9,0],[32,6,9,0,"_servicesStationService"],[32,29,9,0],[32,32,9,0,"require"],[32,39,9,0],[32,40,9,0,"_dependencyMap"],[32,54,9,0],[33,2,9,0],[33,6,9,0,"stationService"],[33,20,9,0],[33,23,9,0,"_interopDefault"],[33,38,9,0],[33,39,9,0,"_servicesStationService"],[33,62,9,0],[34,2,1,0],[35,2,2,0],[37,2,11,0],[37,6,11,6,"PLAY_AT_LOGIN_KEY"],[37,23,11,23],[37,26,11,26],[37,49,11,49],[38,2,12,0],[38,6,12,6,"LAST_PLAYED_STATION_KEY"],[38,29,12,29],[38,32,12,32],[38,64,12,64],[39,2,14,7],[39,6,14,13,"PlayAtLoginHandler"],[39,24,14,41],[39,27,14,44,"PlayAtLoginHandler"],[39,28,14,44],[39,33,14,50],[40,4,15,2],[40,8,15,8,"hasExecuted"],[40,19,15,19],[40,22,15,22],[40,26,15,22,"useRef"],[40,32,15,28],[40,33,15,28,"useRef"],[40,39,15,28],[40,41,15,29],[40,46,15,34],[40,47,15,35],[41,4,16,2],[41,8,16,2,"_useAuthStore"],[41,21,16,2],[41,24,16,30],[41,28,16,30,"useAuthStore"],[41,43,16,42],[41,44,16,42,"useAuthStore"],[41,56,16,42],[41,58,16,43],[41,59,16,44],[42,6,16,10,"isAuthenticated"],[42,21,16,25],[42,24,16,25,"_useAuthStore"],[42,37,16,25],[42,38,16,10,"isAuthenticated"],[42,53,16,25],[43,4,17,2],[43,8,17,2,"_useFavoritesStore"],[43,26,17,2],[43,29,17,24],[43,33,17,24,"useFavoritesStore"],[43,53,17,41],[43,54,17,41,"useFavoritesStore"],[43,71,17,41],[43,73,17,42],[43,74,17,43],[44,6,17,10,"favorites"],[44,15,17,19],[44,18,17,19,"_useFavoritesStore"],[44,36,17,19],[44,37,17,10,"favorites"],[44,46,17,19],[45,4,18,2],[45,8,18,2,"_useAudio"],[45,17,18,2],[45,20,18,26],[45,24,18,26,"useAudio"],[45,44,18,34],[45,45,18,34,"useAudio"],[45,53,18,34],[45,55,18,35],[45,56,18,36],[46,6,18,10,"playStation"],[46,17,18,21],[46,20,18,21,"_useAudio"],[46,29,18,21],[46,30,18,10,"playStation"],[46,41,18,21],[47,4,20,2],[47,8,20,2,"useEffect"],[47,14,20,11],[47,15,20,11,"useEffect"],[47,24,20,11],[47,26,20,12],[47,32,20,18],[48,6,21,4],[48,10,21,10,"executePlayAtLogin"],[48,28,21,28],[49,8,21,28],[49,12,21,28,"_ref"],[49,16,21,28],[49,23,21,28,"_asyncToGenerator"],[49,40,21,28],[49,41,21,28,"default"],[49,48,21,28],[49,50,21,31],[49,63,21,43],[50,10,22,6],[51,10,23,6],[51,14,23,10,"hasExecuted"],[51,25,23,21],[51,26,23,22,"current"],[51,33,23,29],[51,35,23,31],[52,12,24,8],[53,10,25,6],[55,10,27,6],[56,10,28,6],[56,16,28,12],[56,20,28,16,"Promise"],[56,27,28,23],[56,28,28,24,"resolve"],[56,35,28,31],[56,39,28,35,"setTimeout"],[56,49,28,45],[56,50,28,46,"resolve"],[56,57,28,53],[56,59,28,55],[56,63,28,59],[56,64,28,60],[56,65,28,61],[58,10,30,6],[59,10,31,6],[59,14,31,10],[59,15,31,11,"isAuthenticated"],[59,30,31,26],[59,32,31,28],[60,12,32,8,"console"],[60,19,32,15],[60,20,32,16,"log"],[60,23,32,19],[60,24,32,20],[60,72,32,68],[60,73,32,69],[61,12,33,8],[62,10,34,6],[63,10,36,6],[63,14,36,10],[64,12,37,8],[64,16,37,14,"setting"],[64,23,37,21],[64,32,37,30,"AsyncStorage"],[64,44,37,42],[64,45,37,42,"default"],[64,52,37,42],[64,53,37,43,"getItem"],[64,60,37,50],[64,61,37,51,"PLAY_AT_LOGIN_KEY"],[64,78,37,68],[64,79,37,69],[65,12,38,8,"console"],[65,19,38,15],[65,20,38,16,"log"],[65,23,38,19],[65,24,38,20],[65,48,38,44],[65,50,38,46,"setting"],[65,57,38,53],[65,58,38,54],[66,12,40,8],[66,16,40,12],[66,17,40,13,"setting"],[66,24,40,20],[66,28,40,24,"setting"],[66,35,40,31],[66,40,40,36],[66,45,40,41],[66,47,40,43],[67,14,41,10,"console"],[67,21,41,17],[67,22,41,18,"log"],[67,25,41,21],[67,26,41,22],[67,61,41,57],[67,62,41,58],[68,14,42,10],[69,12,43,8],[70,12,45,8,"hasExecuted"],[70,23,45,19],[70,24,45,20,"current"],[70,31,45,27],[70,34,45,30],[70,38,45,34],[71,12,47,8],[71,16,47,12,"stationToPlay"],[71,29,47,25],[71,32,47,28],[71,36,47,32],[72,12,49,8],[72,20,49,16,"setting"],[72,27,49,23],[73,14,50,10],[73,19,50,15],[73,32,50,28],[74,16,51,12],[75,16,52,12],[75,20,52,18,"lastPlayedJson"],[75,34,52,32],[75,43,52,41,"AsyncStorage"],[75,55,52,53],[75,56,52,53,"default"],[75,63,52,53],[75,64,52,54,"getItem"],[75,71,52,61],[75,72,52,62,"LAST_PLAYED_STATION_KEY"],[75,95,52,85],[75,96,52,86],[76,16,53,12],[76,20,53,16,"lastPlayedJson"],[76,34,53,30],[76,36,53,32],[77,18,54,14,"stationToPlay"],[77,31,54,27],[77,34,54,30,"JSON"],[77,38,54,34],[77,39,54,35,"parse"],[77,44,54,40],[77,45,54,41,"lastPlayedJson"],[77,59,54,55],[77,60,54,56],[78,18,55,14,"console"],[78,25,55,21],[78,26,55,22,"log"],[78,29,55,25],[78,30,55,26],[78,66,55,62],[78,68,55,64,"stationToPlay"],[78,81,55,77],[78,83,55,79,"name"],[78,87,55,83],[78,88,55,84],[79,16,56,12],[80,16,57,12],[81,14,59,10],[81,19,59,15],[81,29,59,25],[82,16,60,12],[83,16,61,12],[83,20,61,16,"favorites"],[83,29,61,25],[83,33,61,29,"favorites"],[83,42,61,38],[83,43,61,39,"length"],[83,49,61,45],[83,52,61,48],[83,53,61,49],[83,55,61,51],[84,18,62,14,"stationToPlay"],[84,31,62,27],[84,34,62,30,"favorites"],[84,43,62,39],[84,44,62,40],[84,45,62,41],[84,46,62,42],[85,18,63,14,"console"],[85,25,63,21],[85,26,63,22,"log"],[85,29,63,25],[85,30,63,26],[85,69,63,65],[85,71,63,67,"stationToPlay"],[85,84,63,80],[85,86,63,82,"name"],[85,90,63,86],[85,91,63,87],[86,16,64,12],[87,16,65,12],[88,14,67,10],[88,19,67,15],[88,27,67,23],[89,16,68,12],[90,16,69,12],[90,20,69,16],[91,18,70,14],[91,22,70,20,"response"],[91,30,70,28],[91,39,70,37,"stationService"],[91,53,70,51],[91,54,70,51,"default"],[91,61,70,51],[91,62,70,52,"getStations"],[91,73,70,63],[91,74,70,64],[92,20,70,66,"limit"],[92,25,70,71],[92,27,70,73],[93,18,70,76],[93,19,70,77],[93,20,70,78],[94,18,71,14],[94,22,71,18,"response"],[94,30,71,26],[94,32,71,28,"stations"],[94,40,71,36],[94,44,71,40,"response"],[94,52,71,48],[94,53,71,49,"stations"],[94,61,71,57],[94,62,71,58,"length"],[94,68,71,64],[94,71,71,67],[94,72,71,68],[94,74,71,70],[95,20,72,16],[95,24,72,22,"randomIndex"],[95,35,72,33],[95,38,72,36,"Math"],[95,42,72,40],[95,43,72,41,"floor"],[95,48,72,46],[95,49,72,47,"Math"],[95,53,72,51],[95,54,72,52,"random"],[95,60,72,58],[95,61,72,59],[95,62,72,60],[95,65,72,63,"response"],[95,73,72,71],[95,74,72,72,"stations"],[95,82,72,80],[95,83,72,81,"length"],[95,89,72,87],[95,90,72,88],[96,20,73,16,"stationToPlay"],[96,33,73,29],[96,36,73,32,"response"],[96,44,73,40],[96,45,73,41,"stations"],[96,53,73,49],[96,54,73,50,"randomIndex"],[96,65,73,61],[96,66,73,62],[97,20,74,16,"console"],[97,27,74,23],[97,28,74,24,"log"],[97,31,74,27],[97,32,74,28],[97,63,74,59],[97,65,74,61,"stationToPlay"],[97,78,74,74],[97,80,74,76,"name"],[97,84,74,80],[97,85,74,81],[98,18,75,14],[99,16,76,12],[99,17,76,13],[99,18,76,14],[99,25,76,21,"error"],[99,30,76,26],[99,32,76,28],[100,18,77,14,"console"],[100,25,77,21],[100,26,77,22,"error"],[100,31,77,27],[100,32,77,28],[100,79,77,75],[100,81,77,77,"error"],[100,86,77,82],[100,87,77,83],[101,16,78,12],[102,16,79,12],[103,12,80,8],[104,12,82,8],[104,16,82,12,"stationToPlay"],[104,29,82,25],[104,31,82,27],[105,14,83,10,"console"],[105,21,83,17],[105,22,83,18,"log"],[105,25,83,21],[105,26,83,22],[105,60,83,56],[105,62,83,58,"stationToPlay"],[105,75,83,71],[105,76,83,72,"name"],[105,80,83,76],[105,81,83,77],[106,14,84,10],[106,20,84,16,"playStation"],[106,31,84,27],[106,32,84,28,"stationToPlay"],[106,45,84,41],[106,46,84,42],[107,12,85,8],[108,10,86,6],[108,11,86,7],[108,12,86,8],[108,19,86,15,"error"],[108,24,86,20],[108,26,86,22],[109,12,87,8,"console"],[109,19,87,15],[109,20,87,16,"error"],[109,25,87,21],[109,26,87,22],[109,48,87,44],[109,50,87,46,"error"],[109,55,87,51],[109,56,87,52],[110,10,88,6],[111,8,89,4],[111,9,89,5],[112,8,89,5],[112,24,21,10,"executePlayAtLogin"],[112,42,21,28,"executePlayAtLogin"],[112,43,21,28],[113,10,21,28],[113,17,21,28,"_ref"],[113,21,21,28],[113,22,21,28,"apply"],[113,27,21,28],[113,34,21,28,"arguments"],[113,43,21,28],[114,8,21,28],[115,6,21,28],[115,9,89,5],[116,6,91,4,"executePlayAtLogin"],[116,24,91,22],[116,25,91,23],[116,26,91,24],[117,4,92,2],[117,5,92,3],[117,7,92,5],[117,8,92,6,"isAuthenticated"],[117,23,92,21],[117,25,92,23,"favorites"],[117,34,92,32],[117,36,92,34,"playStation"],[117,47,92,45],[117,48,92,46],[117,49,92,47],[119,4,94,2],[120,4,95,2],[120,11,95,9],[120,15,95,13],[121,2,96,0],[121,3,96,1],[122,2,98,0],[122,6,98,0,"_default"],[122,14,98,0],[122,17,98,15,"PlayAtLoginHandler"],[122,35,98,33],[123,0,98,34],[123,3]],"functionMap":{"names":["<global>","PlayAtLoginHandler","useEffect$argument_0","executePlayAtLogin","Promise$argument_0"],"mappings":"AAA;4CCa;YCM;+BCC;wBCO,oCD;KD6D;GDG;CDI"},"hasCjsExports":false},"type":"js/module"}]}