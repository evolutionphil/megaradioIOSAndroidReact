{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":156},"end":{"line":4,"column":42,"index":198}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":199},"end":{"line":5,"column":69,"index":268}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../store/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":269},"end":{"line":6,"column":50,"index":319}}],"key":"/4BDl/hqolvw7T4CXD8jWAtZK4M=","exportNames":["*"],"imports":1}},{"name":"../store/favoritesStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":320},"end":{"line":7,"column":60,"index":380}}],"key":"rQmi7ZiN3wSYC/3oB9X28qKmXrY=","exportNames":["*"],"imports":1}},{"name":"../hooks/useAudioPlayer","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":381},"end":{"line":8,"column":51,"index":432}}],"key":"pUckzGairsxi/1vGHJirSPNjmRQ=","exportNames":["*"],"imports":1}},{"name":"../services/stationService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":433},"end":{"line":9,"column":56,"index":489}}],"key":"uwHKYj7/xzUyIn0NC/c691Hz7MQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"PlayAtLoginHandler\", {\n    enumerable: true,\n    get: function () {\n      return PlayAtLoginHandler;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _react = require(_dependencyMap[1]);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2]);\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _storeAuthStore = require(_dependencyMap[3]);\n  var _storeFavoritesStore = require(_dependencyMap[4]);\n  var _hooksUseAudioPlayer = require(_dependencyMap[5]);\n  var _servicesStationService = require(_dependencyMap[6]);\n  var stationService = _interopDefault(_servicesStationService);\n  // PlayAtLoginHandler - Handles automatic playback on app start based on user settings\n  // Must be used inside AudioProvider to access playStation function\n\n  var PLAY_AT_LOGIN_KEY = 'play_at_login_setting';\n  var LAST_PLAYED_STATION_KEY = '@megaradio_last_played_station';\n  var PlayAtLoginHandler = () => {\n    var hasExecuted = (0, _react.useRef)(false);\n    var _useAuthStore = (0, _storeAuthStore.useAuthStore)(),\n      isAuthenticated = _useAuthStore.isAuthenticated,\n      isAuthLoaded = _useAuthStore.isAuthLoaded;\n    var _useFavoritesStore = (0, _storeFavoritesStore.useFavoritesStore)(),\n      favorites = _useFavoritesStore.favorites,\n      favoritesLoaded = _useFavoritesStore.isLoaded;\n    var _useAudio = (0, _hooksUseAudioPlayer.useAudio)(),\n      playStation = _useAudio.playStation;\n    (0, _react.useEffect)(() => {\n      var executePlayAtLogin = /*#__PURE__*/function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          // Only execute once per app session\n          if (hasExecuted.current) {\n            return;\n          }\n\n          // Wait for auth to be loaded from storage first\n          if (!isAuthLoaded) {\n            console.log('[PlayAtLogin] Auth not loaded yet, waiting...');\n            return;\n          }\n\n          // Check if user is authenticated\n          if (!isAuthenticated) {\n            console.log('[PlayAtLogin] User not authenticated, skipping');\n            hasExecuted.current = true; // Mark as executed to prevent re-running\n            return;\n          }\n\n          // Wait a bit for app to fully initialize after auth confirmed\n          yield new Promise(resolve => setTimeout(resolve, 500));\n          try {\n            var setting = yield AsyncStorage.default.getItem(PLAY_AT_LOGIN_KEY);\n            console.log('[PlayAtLogin] Setting:', setting);\n\n            // Mark as executed regardless of setting to prevent re-runs\n            hasExecuted.current = true;\n            if (!setting || setting === 'off') {\n              console.log('[PlayAtLogin] Disabled or not set');\n              return;\n            }\n            var stationToPlay = null;\n            switch (setting) {\n              case 'last_played':\n                // Get last played station from storage\n                var lastPlayedJson = yield AsyncStorage.default.getItem(LAST_PLAYED_STATION_KEY);\n                if (lastPlayedJson) {\n                  stationToPlay = JSON.parse(lastPlayedJson);\n                  console.log('[PlayAtLogin] Last played station:', stationToPlay?.name);\n                }\n                break;\n              case 'favorite':\n                // Get first favorite station\n                if (favorites && favorites.length > 0) {\n                  stationToPlay = favorites[0];\n                  console.log('[PlayAtLogin] First favorite station:', stationToPlay?.name);\n                }\n                break;\n              case 'random':\n                // Get random station from API\n                try {\n                  var response = yield stationService.default.getStations({\n                    limit: 50\n                  });\n                  if (response?.stations && response.stations.length > 0) {\n                    var randomIndex = Math.floor(Math.random() * response.stations.length);\n                    stationToPlay = response.stations[randomIndex];\n                    console.log('[PlayAtLogin] Random station:', stationToPlay?.name);\n                  }\n                } catch (error) {\n                  console.error('[PlayAtLogin] Failed to fetch random station:', error);\n                }\n                break;\n            }\n            if (stationToPlay) {\n              console.log('[PlayAtLogin] Starting playback:', stationToPlay.name);\n              yield playStation(stationToPlay);\n            }\n          } catch (error) {\n            console.error('[PlayAtLogin] Error:', error);\n          }\n        });\n        return function executePlayAtLogin() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n      executePlayAtLogin();\n    }, [isAuthenticated, isAuthLoaded, favorites, favoritesLoaded, playStation]);\n\n    // This component doesn't render anything\n    return null;\n  };\n  var _default = PlayAtLoginHandler;\n});","lineCount":134,"map":[[12,2,106,0,"Object"],[12,8,106,0],[12,9,106,0,"defineProperty"],[12,23,106,0],[12,24,106,0,"exports"],[12,31,106,0],[13,4,106,0,"enumerable"],[13,14,106,0],[14,4,106,0,"get"],[14,7,106,0],[14,18,106,0,"get"],[14,19,106,0],[15,6,106,0],[15,13,106,0,"_default"],[15,21,106,0],[16,4,106,0],[17,2,106,0],[18,2,14,0,"Object"],[18,8,14,0],[18,9,14,0,"defineProperty"],[18,23,14,0],[18,24,14,0,"exports"],[18,31,14,0],[19,4,14,0,"enumerable"],[19,14,14,0],[20,4,14,0,"get"],[20,7,14,0],[20,18,14,0,"get"],[20,19,14,0],[21,6,14,0],[21,13,14,0,"PlayAtLoginHandler"],[21,31,14,0],[22,4,14,0],[23,2,14,0],[24,2,104,2],[24,6,104,2,"_babelRuntimeHelpersAsyncToGenerator"],[24,42,104,2],[24,45,104,2,"require"],[24,52,104,2],[24,53,104,2,"_dependencyMap"],[24,67,104,2],[25,2,104,2],[25,6,104,2,"_asyncToGenerator"],[25,23,104,2],[25,26,104,2,"_interopDefault"],[25,41,104,2],[25,42,104,2,"_babelRuntimeHelpersAsyncToGenerator"],[25,78,104,2],[26,2,4,0],[26,6,4,0,"_react"],[26,12,4,0],[26,15,4,0,"require"],[26,22,4,0],[26,23,4,0,"_dependencyMap"],[26,37,4,0],[27,2,5,0],[27,6,5,0,"_reactNativeAsyncStorageAsyncStorage"],[27,42,5,0],[27,45,5,0,"require"],[27,52,5,0],[27,53,5,0,"_dependencyMap"],[27,67,5,0],[28,2,5,0],[28,6,5,0,"AsyncStorage"],[28,18,5,0],[28,21,5,0,"_interopDefault"],[28,36,5,0],[28,37,5,0,"_reactNativeAsyncStorageAsyncStorage"],[28,73,5,0],[29,2,6,0],[29,6,6,0,"_storeAuthStore"],[29,21,6,0],[29,24,6,0,"require"],[29,31,6,0],[29,32,6,0,"_dependencyMap"],[29,46,6,0],[30,2,7,0],[30,6,7,0,"_storeFavoritesStore"],[30,26,7,0],[30,29,7,0,"require"],[30,36,7,0],[30,37,7,0,"_dependencyMap"],[30,51,7,0],[31,2,8,0],[31,6,8,0,"_hooksUseAudioPlayer"],[31,26,8,0],[31,29,8,0,"require"],[31,36,8,0],[31,37,8,0,"_dependencyMap"],[31,51,8,0],[32,2,9,0],[32,6,9,0,"_servicesStationService"],[32,29,9,0],[32,32,9,0,"require"],[32,39,9,0],[32,40,9,0,"_dependencyMap"],[32,54,9,0],[33,2,9,0],[33,6,9,0,"stationService"],[33,20,9,0],[33,23,9,0,"_interopDefault"],[33,38,9,0],[33,39,9,0,"_servicesStationService"],[33,62,9,0],[34,2,1,0],[35,2,2,0],[37,2,11,0],[37,6,11,6,"PLAY_AT_LOGIN_KEY"],[37,23,11,23],[37,26,11,26],[37,49,11,49],[38,2,12,0],[38,6,12,6,"LAST_PLAYED_STATION_KEY"],[38,29,12,29],[38,32,12,32],[38,64,12,64],[39,2,14,7],[39,6,14,13,"PlayAtLoginHandler"],[39,24,14,41],[39,27,14,44,"PlayAtLoginHandler"],[39,28,14,44],[39,33,14,50],[40,4,15,2],[40,8,15,8,"hasExecuted"],[40,19,15,19],[40,22,15,22],[40,26,15,22,"useRef"],[40,32,15,28],[40,33,15,28,"useRef"],[40,39,15,28],[40,41,15,29],[40,46,15,34],[40,47,15,35],[41,4,16,2],[41,8,16,2,"_useAuthStore"],[41,21,16,2],[41,24,16,44],[41,28,16,44,"useAuthStore"],[41,43,16,56],[41,44,16,56,"useAuthStore"],[41,56,16,56],[41,58,16,57],[41,59,16,58],[42,6,16,10,"isAuthenticated"],[42,21,16,25],[42,24,16,25,"_useAuthStore"],[42,37,16,25],[42,38,16,10,"isAuthenticated"],[42,53,16,25],[43,6,16,27,"isAuthLoaded"],[43,18,16,39],[43,21,16,39,"_useAuthStore"],[43,34,16,39],[43,35,16,27,"isAuthLoaded"],[43,47,16,39],[44,4,17,2],[44,8,17,2,"_useFavoritesStore"],[44,26,17,2],[44,29,17,51],[44,33,17,51,"useFavoritesStore"],[44,53,17,68],[44,54,17,68,"useFavoritesStore"],[44,71,17,68],[44,73,17,69],[44,74,17,70],[45,6,17,10,"favorites"],[45,15,17,19],[45,18,17,19,"_useFavoritesStore"],[45,36,17,19],[45,37,17,10,"favorites"],[45,46,17,19],[46,6,17,31,"favoritesLoaded"],[46,21,17,46],[46,24,17,46,"_useFavoritesStore"],[46,42,17,46],[46,43,17,21,"isLoaded"],[46,51,17,29],[47,4,18,2],[47,8,18,2,"_useAudio"],[47,17,18,2],[47,20,18,26],[47,24,18,26,"useAudio"],[47,44,18,34],[47,45,18,34,"useAudio"],[47,53,18,34],[47,55,18,35],[47,56,18,36],[48,6,18,10,"playStation"],[48,17,18,21],[48,20,18,21,"_useAudio"],[48,29,18,21],[48,30,18,10,"playStation"],[48,41,18,21],[49,4,20,2],[49,8,20,2,"useEffect"],[49,14,20,11],[49,15,20,11,"useEffect"],[49,24,20,11],[49,26,20,12],[49,32,20,18],[50,6,21,4],[50,10,21,10,"executePlayAtLogin"],[50,28,21,28],[51,8,21,28],[51,12,21,28,"_ref"],[51,16,21,28],[51,23,21,28,"_asyncToGenerator"],[51,40,21,28],[51,41,21,28,"default"],[51,48,21,28],[51,50,21,31],[51,63,21,43],[52,10,22,6],[53,10,23,6],[53,14,23,10,"hasExecuted"],[53,25,23,21],[53,26,23,22,"current"],[53,33,23,29],[53,35,23,31],[54,12,24,8],[55,10,25,6],[57,10,27,6],[58,10,28,6],[58,14,28,10],[58,15,28,11,"isAuthLoaded"],[58,27,28,23],[58,29,28,25],[59,12,29,8,"console"],[59,19,29,15],[59,20,29,16,"log"],[59,23,29,19],[59,24,29,20],[59,71,29,67],[59,72,29,68],[60,12,30,8],[61,10,31,6],[63,10,33,6],[64,10,34,6],[64,14,34,10],[64,15,34,11,"isAuthenticated"],[64,30,34,26],[64,32,34,28],[65,12,35,8,"console"],[65,19,35,15],[65,20,35,16,"log"],[65,23,35,19],[65,24,35,20],[65,72,35,68],[65,73,35,69],[66,12,36,8,"hasExecuted"],[66,23,36,19],[66,24,36,20,"current"],[66,31,36,27],[66,34,36,30],[66,38,36,34],[66,39,36,35],[66,40,36,36],[67,12,37,8],[68,10,38,6],[70,10,40,6],[71,10,41,6],[71,16,41,12],[71,20,41,16,"Promise"],[71,27,41,23],[71,28,41,24,"resolve"],[71,35,41,31],[71,39,41,35,"setTimeout"],[71,49,41,45],[71,50,41,46,"resolve"],[71,57,41,53],[71,59,41,55],[71,62,41,58],[71,63,41,59],[71,64,41,60],[72,10,43,6],[72,14,43,10],[73,12,44,8],[73,16,44,14,"setting"],[73,23,44,21],[73,32,44,30,"AsyncStorage"],[73,44,44,42],[73,45,44,42,"default"],[73,52,44,42],[73,53,44,43,"getItem"],[73,60,44,50],[73,61,44,51,"PLAY_AT_LOGIN_KEY"],[73,78,44,68],[73,79,44,69],[74,12,45,8,"console"],[74,19,45,15],[74,20,45,16,"log"],[74,23,45,19],[74,24,45,20],[74,48,45,44],[74,50,45,46,"setting"],[74,57,45,53],[74,58,45,54],[76,12,47,8],[77,12,48,8,"hasExecuted"],[77,23,48,19],[77,24,48,20,"current"],[77,31,48,27],[77,34,48,30],[77,38,48,34],[78,12,50,8],[78,16,50,12],[78,17,50,13,"setting"],[78,24,50,20],[78,28,50,24,"setting"],[78,35,50,31],[78,40,50,36],[78,45,50,41],[78,47,50,43],[79,14,51,10,"console"],[79,21,51,17],[79,22,51,18,"log"],[79,25,51,21],[79,26,51,22],[79,61,51,57],[79,62,51,58],[80,14,52,10],[81,12,53,8],[82,12,55,8],[82,16,55,12,"stationToPlay"],[82,29,55,25],[82,32,55,28],[82,36,55,32],[83,12,57,8],[83,20,57,16,"setting"],[83,27,57,23],[84,14,58,10],[84,19,58,15],[84,32,58,28],[85,16,59,12],[86,16,60,12],[86,20,60,18,"lastPlayedJson"],[86,34,60,32],[86,43,60,41,"AsyncStorage"],[86,55,60,53],[86,56,60,53,"default"],[86,63,60,53],[86,64,60,54,"getItem"],[86,71,60,61],[86,72,60,62,"LAST_PLAYED_STATION_KEY"],[86,95,60,85],[86,96,60,86],[87,16,61,12],[87,20,61,16,"lastPlayedJson"],[87,34,61,30],[87,36,61,32],[88,18,62,14,"stationToPlay"],[88,31,62,27],[88,34,62,30,"JSON"],[88,38,62,34],[88,39,62,35,"parse"],[88,44,62,40],[88,45,62,41,"lastPlayedJson"],[88,59,62,55],[88,60,62,56],[89,18,63,14,"console"],[89,25,63,21],[89,26,63,22,"log"],[89,29,63,25],[89,30,63,26],[89,66,63,62],[89,68,63,64,"stationToPlay"],[89,81,63,77],[89,83,63,79,"name"],[89,87,63,83],[89,88,63,84],[90,16,64,12],[91,16,65,12],[92,14,67,10],[92,19,67,15],[92,29,67,25],[93,16,68,12],[94,16,69,12],[94,20,69,16,"favorites"],[94,29,69,25],[94,33,69,29,"favorites"],[94,42,69,38],[94,43,69,39,"length"],[94,49,69,45],[94,52,69,48],[94,53,69,49],[94,55,69,51],[95,18,70,14,"stationToPlay"],[95,31,70,27],[95,34,70,30,"favorites"],[95,43,70,39],[95,44,70,40],[95,45,70,41],[95,46,70,42],[96,18,71,14,"console"],[96,25,71,21],[96,26,71,22,"log"],[96,29,71,25],[96,30,71,26],[96,69,71,65],[96,71,71,67,"stationToPlay"],[96,84,71,80],[96,86,71,82,"name"],[96,90,71,86],[96,91,71,87],[97,16,72,12],[98,16,73,12],[99,14,75,10],[99,19,75,15],[99,27,75,23],[100,16,76,12],[101,16,77,12],[101,20,77,16],[102,18,78,14],[102,22,78,20,"response"],[102,30,78,28],[102,39,78,37,"stationService"],[102,53,78,51],[102,54,78,51,"default"],[102,61,78,51],[102,62,78,52,"getStations"],[102,73,78,63],[102,74,78,64],[103,20,78,66,"limit"],[103,25,78,71],[103,27,78,73],[104,18,78,76],[104,19,78,77],[104,20,78,78],[105,18,79,14],[105,22,79,18,"response"],[105,30,79,26],[105,32,79,28,"stations"],[105,40,79,36],[105,44,79,40,"response"],[105,52,79,48],[105,53,79,49,"stations"],[105,61,79,57],[105,62,79,58,"length"],[105,68,79,64],[105,71,79,67],[105,72,79,68],[105,74,79,70],[106,20,80,16],[106,24,80,22,"randomIndex"],[106,35,80,33],[106,38,80,36,"Math"],[106,42,80,40],[106,43,80,41,"floor"],[106,48,80,46],[106,49,80,47,"Math"],[106,53,80,51],[106,54,80,52,"random"],[106,60,80,58],[106,61,80,59],[106,62,80,60],[106,65,80,63,"response"],[106,73,80,71],[106,74,80,72,"stations"],[106,82,80,80],[106,83,80,81,"length"],[106,89,80,87],[106,90,80,88],[107,20,81,16,"stationToPlay"],[107,33,81,29],[107,36,81,32,"response"],[107,44,81,40],[107,45,81,41,"stations"],[107,53,81,49],[107,54,81,50,"randomIndex"],[107,65,81,61],[107,66,81,62],[108,20,82,16,"console"],[108,27,82,23],[108,28,82,24,"log"],[108,31,82,27],[108,32,82,28],[108,63,82,59],[108,65,82,61,"stationToPlay"],[108,78,82,74],[108,80,82,76,"name"],[108,84,82,80],[108,85,82,81],[109,18,83,14],[110,16,84,12],[110,17,84,13],[110,18,84,14],[110,25,84,21,"error"],[110,30,84,26],[110,32,84,28],[111,18,85,14,"console"],[111,25,85,21],[111,26,85,22,"error"],[111,31,85,27],[111,32,85,28],[111,79,85,75],[111,81,85,77,"error"],[111,86,85,82],[111,87,85,83],[112,16,86,12],[113,16,87,12],[114,12,88,8],[115,12,90,8],[115,16,90,12,"stationToPlay"],[115,29,90,25],[115,31,90,27],[116,14,91,10,"console"],[116,21,91,17],[116,22,91,18,"log"],[116,25,91,21],[116,26,91,22],[116,60,91,56],[116,62,91,58,"stationToPlay"],[116,75,91,71],[116,76,91,72,"name"],[116,80,91,76],[116,81,91,77],[117,14,92,10],[117,20,92,16,"playStation"],[117,31,92,27],[117,32,92,28,"stationToPlay"],[117,45,92,41],[117,46,92,42],[118,12,93,8],[119,10,94,6],[119,11,94,7],[119,12,94,8],[119,19,94,15,"error"],[119,24,94,20],[119,26,94,22],[120,12,95,8,"console"],[120,19,95,15],[120,20,95,16,"error"],[120,25,95,21],[120,26,95,22],[120,48,95,44],[120,50,95,46,"error"],[120,55,95,51],[120,56,95,52],[121,10,96,6],[122,8,97,4],[122,9,97,5],[123,8,97,5],[123,24,21,10,"executePlayAtLogin"],[123,42,21,28,"executePlayAtLogin"],[123,43,21,28],[124,10,21,28],[124,17,21,28,"_ref"],[124,21,21,28],[124,22,21,28,"apply"],[124,27,21,28],[124,34,21,28,"arguments"],[124,43,21,28],[125,8,21,28],[126,6,21,28],[126,9,97,5],[127,6,99,4,"executePlayAtLogin"],[127,24,99,22],[127,25,99,23],[127,26,99,24],[128,4,100,2],[128,5,100,3],[128,7,100,5],[128,8,100,6,"isAuthenticated"],[128,23,100,21],[128,25,100,23,"isAuthLoaded"],[128,37,100,35],[128,39,100,37,"favorites"],[128,48,100,46],[128,50,100,48,"favoritesLoaded"],[128,65,100,63],[128,67,100,65,"playStation"],[128,78,100,76],[128,79,100,77],[128,80,100,78],[130,4,102,2],[131,4,103,2],[131,11,103,9],[131,15,103,13],[132,2,104,0],[132,3,104,1],[133,2,106,0],[133,6,106,0,"_default"],[133,14,106,0],[133,17,106,15,"PlayAtLoginHandler"],[133,35,106,33],[134,0,106,34],[134,3]],"functionMap":{"names":["<global>","PlayAtLoginHandler","useEffect$argument_0","executePlayAtLogin","Promise$argument_0"],"mappings":"AAA;4CCa;YCM;+BCC;wBCoB,mCD;KDwD;GDG;CDI"},"hasCjsExports":false},"type":"js/module"}]}