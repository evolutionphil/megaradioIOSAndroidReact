{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo-asset","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}}],"key":"ZXJFWHziJpBZf3W7vl00wXf6fd8=","exportNames":["*"],"imports":1}},{"name":"expo-modules-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":36},"end":{"line":2,"column":45,"index":81}}],"key":"fU8WLIPqoAGygnPbZ/QJiQQfXEY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.resolveSource = resolveSource;\n  exports.resolveSourceWithDownload = resolveSourceWithDownload;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoAsset = require(_dependencyMap[1], \"expo-asset\");\n  var _expoModulesCore = require(_dependencyMap[2], \"expo-modules-core\");\n  function getAssetFromSource(source) {\n    if (!source) {\n      return null;\n    }\n    if (source instanceof _expoAsset.Asset) {\n      return source;\n    }\n    if (typeof source === 'number') {\n      return _expoAsset.Asset.fromModule(source);\n    }\n    if (typeof source === 'object') {\n      if ('assetId' in source && typeof source.assetId === 'number') {\n        return _expoAsset.Asset.fromModule(source.assetId);\n      }\n      if ('uri' in source && typeof source.uri === 'string') {\n        return _expoAsset.Asset.fromURI(source.uri);\n      }\n    }\n    if (typeof source === 'string') {\n      return _expoAsset.Asset.fromURI(source);\n    }\n    return null;\n  }\n  function createSourceFromAsset(asset) {\n    var extras = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var uri = asset.localUri ?? asset.uri;\n    var result = {\n      uri\n    };\n    if (extras.assetId != null) {\n      result.assetId = extras.assetId;\n    }\n    if (extras.headers) {\n      result.headers = extras.headers;\n    }\n    return result;\n  }\n  function resolveSource(source) {\n    if (source == null) {\n      return null;\n    }\n    if (source instanceof _expoAsset.Asset) {\n      return createSourceFromAsset(source);\n    }\n    if (typeof source === 'string') {\n      return {\n        uri: source\n      };\n    }\n    if (typeof source === 'number') {\n      var asset = _expoAsset.Asset.fromModule(source);\n      return createSourceFromAsset(asset, {\n        assetId: source\n      });\n    }\n    if (typeof source === 'object') {\n      if ('assetId' in source && typeof source.assetId === 'number') {\n        var _asset = _expoAsset.Asset.fromModule(source.assetId);\n        return {\n          ...source,\n          uri: _asset.localUri ?? _asset.uri\n        };\n      }\n      if ('uri' in source && typeof source.uri === 'string') {\n        return source;\n      }\n    }\n    return source ?? null;\n  }\n  /**\n   * Resolves and optionally downloads an audio source before loading.\n   * Similar to expo-av's getNativeSourceAndFullInitialStatusForLoadAsync but simplified for expo-audio.\n   */\n  function resolveSourceWithDownload(_x) {\n    return _resolveSourceWithDownload.apply(this, arguments);\n  }\n  function _resolveSourceWithDownload() {\n    _resolveSourceWithDownload = (0, _asyncToGenerator.default)(function* (source) {\n      var asset = getAssetFromSource(source);\n      var fallbackSource = resolveSource(source);\n      if (asset) {\n        var assetToDownload = asset;\n        try {\n          // iOS AVPlayer fails to load the asset if the type is not set or can't be inferred\n          // since this is an audio asset, we can safely set the type to mp3 or any other audio type\n          // and iOS will be able to download and play the asset\n          // Since expo-asset caches, this will only run once per asset, as long as the asset is not deleted from the cache\n          if (!assetToDownload.type) {\n            assetToDownload = new _expoAsset.Asset({\n              name: asset.name,\n              type: 'mp3',\n              uri: asset.uri\n            });\n          }\n          // FYI: downloadAsync is a no-op on web and immediately returns a promise that resolves to the original url\n          // TODO(@hirbod): evaluate if we should implement downloadAsync for web instead\n          yield assetToDownload.downloadAsync();\n          // Use the local URI if available after download\n          if (assetToDownload.localUri) {\n            var finalUri = assetToDownload.localUri;\n            // On web, we need to fetch the audio file and create a blob URL\n            // this fully downloads the file to the user's device memory and makes it available for the user to play\n            // fetch() is subject to CORS restrictions, so we need to document this for the users on web\n            // TODO(@hirbod): evaluate if we should implement a downloadAsync for web instead of using fetch here\n            if (_expoModulesCore.Platform.OS === 'web') {\n              var response = yield fetch(assetToDownload.localUri);\n              var blob = yield response.blob();\n              finalUri = URL.createObjectURL(blob);\n            }\n            if (fallbackSource && typeof fallbackSource === 'object') {\n              return {\n                ...fallbackSource,\n                uri: finalUri\n              };\n            }\n            return {\n              uri: finalUri\n            };\n          } else {\n            console.warn('No localUri found, asset may not have downloaded properly, returning the original source');\n          }\n        } catch (error) {\n          // If download fails, fall back to original source\n          console.warn('expo-audio: Failed to download asset, falling back to original source:', error);\n        }\n      }\n      // Fallback to normal resolution\n      return fallbackSource;\n    });\n    return _resolveSourceWithDownload.apply(this, arguments);\n  }\n});","lineCount":149,"map":[[12,2,37,0,"exports"],[12,9,37,0],[12,10,37,0,"resolveSource"],[12,23,37,0],[12,26,37,0,"resolveSource"],[12,39,37,0],[13,2,69,0,"exports"],[13,9,69,0],[13,10,69,0,"resolveSourceWithDownload"],[13,35,69,0],[13,38,69,0,"resolveSourceWithDownload"],[13,63,69,0],[14,2,120,1],[14,6,120,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,42,120,1],[14,45,120,1,"require"],[14,52,120,1],[14,53,120,1,"_dependencyMap"],[14,67,120,1],[15,2,120,1],[15,6,120,1,"_asyncToGenerator"],[15,23,120,1],[15,26,120,1,"_interopDefault"],[15,41,120,1],[15,42,120,1,"_babelRuntimeHelpersAsyncToGenerator"],[15,78,120,1],[16,2,1,0],[16,6,1,0,"_expoAsset"],[16,16,1,0],[16,19,1,0,"require"],[16,26,1,0],[16,27,1,0,"_dependencyMap"],[16,41,1,0],[17,2,2,0],[17,6,2,0,"_expoModulesCore"],[17,22,2,0],[17,25,2,0,"require"],[17,32,2,0],[17,33,2,0,"_dependencyMap"],[17,47,2,0],[18,2,3,0],[18,11,3,9,"getAssetFromSource"],[18,29,3,27,"getAssetFromSource"],[18,30,3,28,"source"],[18,36,3,34],[18,38,3,36],[19,4,4,4],[19,8,4,8],[19,9,4,9,"source"],[19,15,4,15],[19,17,4,17],[20,6,5,8],[20,13,5,15],[20,17,5,19],[21,4,6,4],[22,4,7,4],[22,8,7,8,"source"],[22,14,7,14],[22,26,7,26,"Asset"],[22,36,7,31],[22,37,7,31,"Asset"],[22,42,7,31],[22,44,7,33],[23,6,8,8],[23,13,8,15,"source"],[23,19,8,21],[24,4,9,4],[25,4,10,4],[25,8,10,8],[25,15,10,15,"source"],[25,21,10,21],[25,26,10,26],[25,34,10,34],[25,36,10,36],[26,6,11,8],[26,13,11,15,"Asset"],[26,23,11,20],[26,24,11,20,"Asset"],[26,29,11,20],[26,30,11,21,"fromModule"],[26,40,11,31],[26,41,11,32,"source"],[26,47,11,38],[26,48,11,39],[27,4,12,4],[28,4,13,4],[28,8,13,8],[28,15,13,15,"source"],[28,21,13,21],[28,26,13,26],[28,34,13,34],[28,36,13,36],[29,6,14,8],[29,10,14,12],[29,19,14,21],[29,23,14,25,"source"],[29,29,14,31],[29,33,14,35],[29,40,14,42,"source"],[29,46,14,48],[29,47,14,49,"assetId"],[29,54,14,56],[29,59,14,61],[29,67,14,69],[29,69,14,71],[30,8,15,12],[30,15,15,19,"Asset"],[30,25,15,24],[30,26,15,24,"Asset"],[30,31,15,24],[30,32,15,25,"fromModule"],[30,42,15,35],[30,43,15,36,"source"],[30,49,15,42],[30,50,15,43,"assetId"],[30,57,15,50],[30,58,15,51],[31,6,16,8],[32,6,17,8],[32,10,17,12],[32,15,17,17],[32,19,17,21,"source"],[32,25,17,27],[32,29,17,31],[32,36,17,38,"source"],[32,42,17,44],[32,43,17,45,"uri"],[32,46,17,48],[32,51,17,53],[32,59,17,61],[32,61,17,63],[33,8,18,12],[33,15,18,19,"Asset"],[33,25,18,24],[33,26,18,24,"Asset"],[33,31,18,24],[33,32,18,25,"fromURI"],[33,39,18,32],[33,40,18,33,"source"],[33,46,18,39],[33,47,18,40,"uri"],[33,50,18,43],[33,51,18,44],[34,6,19,8],[35,4,20,4],[36,4,21,4],[36,8,21,8],[36,15,21,15,"source"],[36,21,21,21],[36,26,21,26],[36,34,21,34],[36,36,21,36],[37,6,22,8],[37,13,22,15,"Asset"],[37,23,22,20],[37,24,22,20,"Asset"],[37,29,22,20],[37,30,22,21,"fromURI"],[37,37,22,28],[37,38,22,29,"source"],[37,44,22,35],[37,45,22,36],[38,4,23,4],[39,4,24,4],[39,11,24,11],[39,15,24,15],[40,2,25,0],[41,2,26,0],[41,11,26,9,"createSourceFromAsset"],[41,32,26,30,"createSourceFromAsset"],[41,33,26,31,"asset"],[41,38,26,36],[41,40,26,51],[42,4,26,51],[42,8,26,38,"extras"],[42,14,26,44],[42,17,26,44,"arguments"],[42,26,26,44],[42,27,26,44,"length"],[42,33,26,44],[42,41,26,44,"arguments"],[42,50,26,44],[42,58,26,44,"undefined"],[42,67,26,44],[42,70,26,44,"arguments"],[42,79,26,44],[42,85,26,47],[42,86,26,48],[42,87,26,49],[43,4,27,4],[43,8,27,10,"uri"],[43,11,27,13],[43,14,27,16,"asset"],[43,19,27,21],[43,20,27,22,"localUri"],[43,28,27,30],[43,32,27,34,"asset"],[43,37,27,39],[43,38,27,40,"uri"],[43,41,27,43],[44,4,28,4],[44,8,28,10,"result"],[44,14,28,16],[44,17,28,19],[45,6,28,21,"uri"],[46,4,28,25],[46,5,28,26],[47,4,29,4],[47,8,29,8,"extras"],[47,14,29,14],[47,15,29,15,"assetId"],[47,22,29,22],[47,26,29,26],[47,30,29,30],[47,32,29,32],[48,6,30,8,"result"],[48,12,30,14],[48,13,30,15,"assetId"],[48,20,30,22],[48,23,30,25,"extras"],[48,29,30,31],[48,30,30,32,"assetId"],[48,37,30,39],[49,4,31,4],[50,4,32,4],[50,8,32,8,"extras"],[50,14,32,14],[50,15,32,15,"headers"],[50,22,32,22],[50,24,32,24],[51,6,33,8,"result"],[51,12,33,14],[51,13,33,15,"headers"],[51,20,33,22],[51,23,33,25,"extras"],[51,29,33,31],[51,30,33,32,"headers"],[51,37,33,39],[52,4,34,4],[53,4,35,4],[53,11,35,11,"result"],[53,17,35,17],[54,2,36,0],[55,2,37,7],[55,11,37,16,"resolveSource"],[55,24,37,29,"resolveSource"],[55,25,37,30,"source"],[55,31,37,36],[55,33,37,38],[56,4,38,4],[56,8,38,8,"source"],[56,14,38,14],[56,18,38,18],[56,22,38,22],[56,24,38,24],[57,6,39,8],[57,13,39,15],[57,17,39,19],[58,4,40,4],[59,4,41,4],[59,8,41,8,"source"],[59,14,41,14],[59,26,41,26,"Asset"],[59,36,41,31],[59,37,41,31,"Asset"],[59,42,41,31],[59,44,41,33],[60,6,42,8],[60,13,42,15,"createSourceFromAsset"],[60,34,42,36],[60,35,42,37,"source"],[60,41,42,43],[60,42,42,44],[61,4,43,4],[62,4,44,4],[62,8,44,8],[62,15,44,15,"source"],[62,21,44,21],[62,26,44,26],[62,34,44,34],[62,36,44,36],[63,6,45,8],[63,13,45,15],[64,8,45,17,"uri"],[64,11,45,20],[64,13,45,22,"source"],[65,6,45,29],[65,7,45,30],[66,4,46,4],[67,4,47,4],[67,8,47,8],[67,15,47,15,"source"],[67,21,47,21],[67,26,47,26],[67,34,47,34],[67,36,47,36],[68,6,48,8],[68,10,48,14,"asset"],[68,15,48,19],[68,18,48,22,"Asset"],[68,28,48,27],[68,29,48,27,"Asset"],[68,34,48,27],[68,35,48,28,"fromModule"],[68,45,48,38],[68,46,48,39,"source"],[68,52,48,45],[68,53,48,46],[69,6,49,8],[69,13,49,15,"createSourceFromAsset"],[69,34,49,36],[69,35,49,37,"asset"],[69,40,49,42],[69,42,49,44],[70,8,49,46,"assetId"],[70,15,49,53],[70,17,49,55,"source"],[71,6,49,62],[71,7,49,63],[71,8,49,64],[72,4,50,4],[73,4,51,4],[73,8,51,8],[73,15,51,15,"source"],[73,21,51,21],[73,26,51,26],[73,34,51,34],[73,36,51,36],[74,6,52,8],[74,10,52,12],[74,19,52,21],[74,23,52,25,"source"],[74,29,52,31],[74,33,52,35],[74,40,52,42,"source"],[74,46,52,48],[74,47,52,49,"assetId"],[74,54,52,56],[74,59,52,61],[74,67,52,69],[74,69,52,71],[75,8,53,12],[75,12,53,18,"asset"],[75,18,53,23],[75,21,53,26,"Asset"],[75,31,53,31],[75,32,53,31,"Asset"],[75,37,53,31],[75,38,53,32,"fromModule"],[75,48,53,42],[75,49,53,43,"source"],[75,55,53,49],[75,56,53,50,"assetId"],[75,63,53,57],[75,64,53,58],[76,8,54,12],[76,15,54,19],[77,10,55,16],[77,13,55,19,"source"],[77,19,55,25],[78,10,56,16,"uri"],[78,13,56,19],[78,15,56,21,"asset"],[78,21,56,26],[78,22,56,27,"localUri"],[78,30,56,35],[78,34,56,39,"asset"],[78,40,56,44],[78,41,56,45,"uri"],[79,8,57,12],[79,9,57,13],[80,6,58,8],[81,6,59,8],[81,10,59,12],[81,15,59,17],[81,19,59,21,"source"],[81,25,59,27],[81,29,59,31],[81,36,59,38,"source"],[81,42,59,44],[81,43,59,45,"uri"],[81,46,59,48],[81,51,59,53],[81,59,59,61],[81,61,59,63],[82,8,60,12],[82,15,60,19,"source"],[82,21,60,25],[83,6,61,8],[84,4,62,4],[85,4,63,4],[85,11,63,11,"source"],[85,17,63,17],[85,21,63,21],[85,25,63,25],[86,2,64,0],[87,2,65,0],[88,0,66,0],[89,0,67,0],[90,0,68,0],[91,2,65,0],[91,11,69,22,"resolveSourceWithDownload"],[91,36,69,47,"resolveSourceWithDownload"],[91,37,69,47,"_x"],[91,39,69,47],[92,4,69,47],[92,11,69,47,"_resolveSourceWithDownload"],[92,37,69,47],[92,38,69,47,"apply"],[92,43,69,47],[92,50,69,47,"arguments"],[92,59,69,47],[93,2,69,47],[94,2,69,47],[94,11,69,47,"_resolveSourceWithDownload"],[94,38,69,47],[95,4,69,47,"_resolveSourceWithDownload"],[95,30,69,47],[95,37,69,47,"_asyncToGenerator"],[95,54,69,47],[95,55,69,47,"default"],[95,62,69,47],[95,64,69,7],[95,75,69,48,"source"],[95,81,69,54],[95,83,69,56],[96,6,70,4],[96,10,70,10,"asset"],[96,15,70,15],[96,18,70,18,"getAssetFromSource"],[96,36,70,36],[96,37,70,37,"source"],[96,43,70,43],[96,44,70,44],[97,6,71,4],[97,10,71,10,"fallbackSource"],[97,24,71,24],[97,27,71,27,"resolveSource"],[97,40,71,40],[97,41,71,41,"source"],[97,47,71,47],[97,48,71,48],[98,6,72,4],[98,10,72,8,"asset"],[98,15,72,13],[98,17,72,15],[99,8,73,8],[99,12,73,12,"assetToDownload"],[99,27,73,27],[99,30,73,30,"asset"],[99,35,73,35],[100,8,74,8],[100,12,74,12],[101,10,75,12],[102,10,76,12],[103,10,77,12],[104,10,78,12],[105,10,79,12],[105,14,79,16],[105,15,79,17,"assetToDownload"],[105,30,79,32],[105,31,79,33,"type"],[105,35,79,37],[105,37,79,39],[106,12,80,16,"assetToDownload"],[106,27,80,31],[106,30,80,34],[106,34,80,38,"Asset"],[106,44,80,43],[106,45,80,43,"Asset"],[106,50,80,43],[106,51,80,44],[107,14,81,20,"name"],[107,18,81,24],[107,20,81,26,"asset"],[107,25,81,31],[107,26,81,32,"name"],[107,30,81,36],[108,14,82,20,"type"],[108,18,82,24],[108,20,82,26],[108,25,82,31],[109,14,83,20,"uri"],[109,17,83,23],[109,19,83,25,"asset"],[109,24,83,30],[109,25,83,31,"uri"],[110,12,84,16],[110,13,84,17],[110,14,84,18],[111,10,85,12],[112,10,86,12],[113,10,87,12],[114,10,88,12],[114,16,88,18,"assetToDownload"],[114,31,88,33],[114,32,88,34,"downloadAsync"],[114,45,88,47],[114,46,88,48],[114,47,88,49],[115,10,89,12],[116,10,90,12],[116,14,90,16,"assetToDownload"],[116,29,90,31],[116,30,90,32,"localUri"],[116,38,90,40],[116,40,90,42],[117,12,91,16],[117,16,91,20,"finalUri"],[117,24,91,28],[117,27,91,31,"assetToDownload"],[117,42,91,46],[117,43,91,47,"localUri"],[117,51,91,55],[118,12,92,16],[119,12,93,16],[120,12,94,16],[121,12,95,16],[122,12,96,16],[122,16,96,20,"Platform"],[122,32,96,28],[122,33,96,28,"Platform"],[122,41,96,28],[122,42,96,29,"OS"],[122,44,96,31],[122,49,96,36],[122,54,96,41],[122,56,96,43],[123,14,97,20],[123,18,97,26,"response"],[123,26,97,34],[123,35,97,43,"fetch"],[123,40,97,48],[123,41,97,49,"assetToDownload"],[123,56,97,64],[123,57,97,65,"localUri"],[123,65,97,73],[123,66,97,74],[124,14,98,20],[124,18,98,26,"blob"],[124,22,98,30],[124,31,98,39,"response"],[124,39,98,47],[124,40,98,48,"blob"],[124,44,98,52],[124,45,98,53],[124,46,98,54],[125,14,99,20,"finalUri"],[125,22,99,28],[125,25,99,31,"URL"],[125,28,99,34],[125,29,99,35,"createObjectURL"],[125,44,99,50],[125,45,99,51,"blob"],[125,49,99,55],[125,50,99,56],[126,12,100,16],[127,12,101,16],[127,16,101,20,"fallbackSource"],[127,30,101,34],[127,34,101,38],[127,41,101,45,"fallbackSource"],[127,55,101,59],[127,60,101,64],[127,68,101,72],[127,70,101,74],[128,14,102,20],[128,21,102,27],[129,16,103,24],[129,19,103,27,"fallbackSource"],[129,33,103,41],[130,16,104,24,"uri"],[130,19,104,27],[130,21,104,29,"finalUri"],[131,14,105,20],[131,15,105,21],[132,12,106,16],[133,12,107,16],[133,19,107,23],[134,14,107,25,"uri"],[134,17,107,28],[134,19,107,30,"finalUri"],[135,12,107,39],[135,13,107,40],[136,10,108,12],[136,11,108,13],[136,17,109,17],[137,12,110,16,"console"],[137,19,110,23],[137,20,110,24,"warn"],[137,24,110,28],[137,25,110,29],[137,115,110,119],[137,116,110,120],[138,10,111,12],[139,8,112,8],[139,9,112,9],[139,10,113,8],[139,17,113,15,"error"],[139,22,113,20],[139,24,113,22],[140,10,114,12],[141,10,115,12,"console"],[141,17,115,19],[141,18,115,20,"warn"],[141,22,115,24],[141,23,115,25],[141,95,115,97],[141,97,115,99,"error"],[141,102,115,104],[141,103,115,105],[142,8,116,8],[143,6,117,4],[144,6,118,4],[145,6,119,4],[145,13,119,11,"fallbackSource"],[145,27,119,25],[146,4,120,0],[146,5,120,1],[147,4,120,1],[147,11,120,1,"_resolveSourceWithDownload"],[147,37,120,1],[147,38,120,1,"apply"],[147,43,120,1],[147,50,120,1,"arguments"],[147,59,120,1],[148,2,120,1],[149,0,120,1],[149,3]],"functionMap":{"names":["<global>","getAssetFromSource","createSourceFromAsset","resolveSource","resolveSourceWithDownload"],"mappings":"AAA;ACE;CDsB;AEC;CFU;OGC;CH2B;OIK;CJmD"},"hasCjsExports":false},"type":"js/module"}]}