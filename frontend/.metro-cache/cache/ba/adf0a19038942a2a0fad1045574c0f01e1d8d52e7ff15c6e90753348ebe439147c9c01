{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":73,"index":73}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":74},"end":{"line":2,"column":40,"index":114}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"../constants/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":115},"end":{"line":3,"column":48,"index":163}}],"key":"ZV0ujAFjHVGmM4aJSYIlDaiTRjE=","exportNames":["*"],"imports":1}},{"name":"../store/authStore","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":28,"column":29,"index":990},"end":{"line":28,"column":58,"index":1019}}],"key":"x4jghCEnTqsoIMgJBq6IvUNyemw=","exportNames":["*"],"imports":1,"isOptional":true}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactNative = require(_dependencyMap[2], \"react-native\");\n  var _constantsApi = require(_dependencyMap[3], \"../constants/api\");\n  // MegaRadio Internal API Key - unlimited, no rate limiting\n  var MEGARADIO_API_KEY = 'mr_VUzdIUHuXaagvWUC208Vzi_3lqEV1Vzw';\n\n  // For web preview, we cannot use credentials due to CORS\n  // Native apps will handle cookies differently\n  var isWeb = _reactNative.Platform.OS === 'web';\n\n  // Create axios instance with API key and cookie support\n  var api = axios.default.create({\n    baseURL: _constantsApi.API_BASE_URL,\n    timeout: 30000,\n    headers: {\n      'Content-Type': 'application/json',\n      'X-API-Key': MEGARADIO_API_KEY\n    },\n    // Only use credentials on native platforms where CORS isn't an issue\n    withCredentials: !isWeb\n  });\n\n  // Helper to get auth token (lazy import to avoid circular dependency)\n  var getAuthToken = () => {\n    try {\n      // Dynamic import of authStore to avoid circular dependency\n      var _require = require(_dependencyMap[4], \"../store/authStore\"),\n        useAuthStore = _require.useAuthStore;\n      return useAuthStore.getState().token;\n    } catch {\n      return null;\n    }\n  };\n\n  // Request interceptor\n  api.interceptors.request.use(config => {\n    // Ensure API key is always present\n    if (config.headers) {\n      config.headers['X-API-Key'] = MEGARADIO_API_KEY;\n\n      // Add mobile auth token if available and not already set\n      var token = getAuthToken();\n      if (token && !config.headers['Authorization']) {\n        config.headers['Authorization'] = `Bearer ${token}`;\n      }\n    }\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n\n  // Response interceptor with retry for 429\n  api.interceptors.response.use(response => {\n    return response;\n  }, /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* (error) {\n      var config = error.config;\n      // Retry on 429 (rate limit) - max 2 retries with delay\n      if (error.response?.status === 429 && (!config._retryCount || config._retryCount < 2)) {\n        config._retryCount = (config._retryCount || 0) + 1;\n        var delay = config._retryCount * 1500; // 1.5s, 3s\n        yield new Promise(r => setTimeout(r, delay));\n        return api(config);\n      }\n      // Handle 401 unauthorized globally\n      if (error.response?.status === 401) {\n        console.log('Unauthorized - session may have expired');\n      }\n      return Promise.reject(error);\n    });\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n  var _default = api;\n});","lineCount":96,"map":[[12,2,77,0,"Object"],[12,8,77,0],[12,9,77,0,"defineProperty"],[12,23,77,0],[12,24,77,0,"exports"],[12,31,77,0],[13,4,77,0,"enumerable"],[13,14,77,0],[14,4,77,0,"get"],[14,7,77,0],[14,18,77,0,"get"],[14,19,77,0],[15,6,77,0],[15,13,77,0,"_default"],[15,21,77,0],[16,4,77,0],[17,2,77,0],[18,2,77,19],[18,6,77,19,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,77,19],[18,45,77,19,"require"],[18,52,77,19],[18,53,77,19,"_dependencyMap"],[18,67,77,19],[19,2,77,19],[19,6,77,19,"_asyncToGenerator"],[19,23,77,19],[19,26,77,19,"_interopDefault"],[19,41,77,19],[19,42,77,19,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,77,19],[20,2,1,0],[20,6,1,0,"_axios"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,1,0],[21,6,1,0,"axios"],[21,11,1,0],[21,14,1,0,"_interopDefault"],[21,29,1,0],[21,30,1,0,"_axios"],[21,36,1,0],[22,2,2,0],[22,6,2,0,"_reactNative"],[22,18,2,0],[22,21,2,0,"require"],[22,28,2,0],[22,29,2,0,"_dependencyMap"],[22,43,2,0],[23,2,3,0],[23,6,3,0,"_constantsApi"],[23,19,3,0],[23,22,3,0,"require"],[23,29,3,0],[23,30,3,0,"_dependencyMap"],[23,44,3,0],[24,2,5,0],[25,2,6,0],[25,6,6,6,"MEGARADIO_API_KEY"],[25,23,6,23],[25,26,6,26],[25,63,6,63],[27,2,8,0],[28,2,9,0],[29,2,10,0],[29,6,10,6,"isWeb"],[29,11,10,11],[29,14,10,14,"Platform"],[29,26,10,22],[29,27,10,22,"Platform"],[29,35,10,22],[29,36,10,23,"OS"],[29,38,10,25],[29,43,10,30],[29,48,10,35],[31,2,12,0],[32,2,13,0],[32,6,13,6,"api"],[32,9,13,24],[32,12,13,27,"axios"],[32,17,13,32],[32,18,13,32,"default"],[32,25,13,32],[32,26,13,33,"create"],[32,32,13,39],[32,33,13,40],[33,4,14,2,"baseURL"],[33,11,14,9],[33,13,14,11,"API_BASE_URL"],[33,26,14,23],[33,27,14,23,"API_BASE_URL"],[33,39,14,23],[34,4,15,2,"timeout"],[34,11,15,9],[34,13,15,11],[34,18,15,16],[35,4,16,2,"headers"],[35,11,16,9],[35,13,16,11],[36,6,17,4],[36,20,17,18],[36,22,17,20],[36,40,17,38],[37,6,18,4],[37,17,18,15],[37,19,18,17,"MEGARADIO_API_KEY"],[38,4,19,2],[38,5,19,3],[39,4,20,2],[40,4,21,2,"withCredentials"],[40,19,21,17],[40,21,21,19],[40,22,21,20,"isWeb"],[41,2,22,0],[41,3,22,1],[41,4,22,2],[43,2,24,0],[44,2,25,0],[44,6,25,6,"getAuthToken"],[44,18,25,18],[44,21,25,21,"getAuthToken"],[44,22,25,21],[44,27,25,42],[45,4,26,2],[45,8,26,6],[46,6,27,4],[47,6,28,4],[47,10,28,4,"_require"],[47,18,28,4],[47,21,28,29,"require"],[47,28,28,36],[47,29,28,36,"_dependencyMap"],[47,43,28,36],[47,68,28,57],[47,69,28,58],[48,8,28,12,"useAuthStore"],[48,20,28,24],[48,23,28,24,"_require"],[48,31,28,24],[48,32,28,12,"useAuthStore"],[48,44,28,24],[49,6,29,4],[49,13,29,11,"useAuthStore"],[49,25,29,23],[49,26,29,24,"getState"],[49,34,29,32],[49,35,29,33],[49,36,29,34],[49,37,29,35,"token"],[49,42,29,40],[50,4,30,2],[50,5,30,3],[50,6,30,4],[50,12,30,10],[51,6,31,4],[51,13,31,11],[51,17,31,15],[52,4,32,2],[53,2,33,0],[53,3,33,1],[55,2,35,0],[56,2,36,0,"api"],[56,5,36,3],[56,6,36,4,"interceptors"],[56,18,36,16],[56,19,36,17,"request"],[56,26,36,24],[56,27,36,25,"use"],[56,30,36,28],[56,31,37,3,"config"],[56,37,37,37],[56,41,37,42],[57,4,38,4],[58,4,39,4],[58,8,39,8,"config"],[58,14,39,14],[58,15,39,15,"headers"],[58,22,39,22],[58,24,39,24],[59,6,40,6,"config"],[59,12,40,12],[59,13,40,13,"headers"],[59,20,40,20],[59,21,40,21],[59,32,40,32],[59,33,40,33],[59,36,40,36,"MEGARADIO_API_KEY"],[59,53,40,53],[61,6,42,6],[62,6,43,6],[62,10,43,12,"token"],[62,15,43,17],[62,18,43,20,"getAuthToken"],[62,30,43,32],[62,31,43,33],[62,32,43,34],[63,6,44,6],[63,10,44,10,"token"],[63,15,44,15],[63,19,44,19],[63,20,44,20,"config"],[63,26,44,26],[63,27,44,27,"headers"],[63,34,44,34],[63,35,44,35],[63,50,44,50],[63,51,44,51],[63,53,44,53],[64,8,45,8,"config"],[64,14,45,14],[64,15,45,15,"headers"],[64,22,45,22],[64,23,45,23],[64,38,45,38],[64,39,45,39],[64,42,45,42],[64,52,45,52,"token"],[64,57,45,57],[64,59,45,59],[65,6,46,6],[66,4,47,4],[67,4,48,4],[67,11,48,11,"config"],[67,17,48,17],[68,2,49,2],[68,3,49,3],[68,5,50,3,"error"],[68,10,50,8],[68,14,50,13],[69,4,51,4],[69,11,51,11,"Promise"],[69,18,51,18],[69,19,51,19,"reject"],[69,25,51,25],[69,26,51,26,"error"],[69,31,51,31],[69,32,51,32],[70,2,52,2],[70,3,53,0],[70,4,53,1],[72,2,55,0],[73,2,56,0,"api"],[73,5,56,3],[73,6,56,4,"interceptors"],[73,18,56,16],[73,19,56,17,"response"],[73,27,56,25],[73,28,56,26,"use"],[73,31,56,29],[73,32,57,3,"response"],[73,40,57,11],[73,44,57,16],[74,4,58,4],[74,11,58,11,"response"],[74,19,58,19],[75,2,59,2],[75,3,59,3],[76,4,59,3],[76,8,59,3,"_ref"],[76,12,59,3],[76,19,59,3,"_asyncToGenerator"],[76,36,59,3],[76,37,59,3,"default"],[76,44,59,3],[76,46,60,2],[76,57,60,9,"error"],[76,62,60,14],[76,64,60,19],[77,6,61,4],[77,10,61,10,"config"],[77,16,61,16],[77,19,61,19,"error"],[77,24,61,24],[77,25,61,25,"config"],[77,31,61,31],[78,6,62,4],[79,6,63,4],[79,10,63,8,"error"],[79,15,63,13],[79,16,63,14,"response"],[79,24,63,22],[79,26,63,24,"status"],[79,32,63,30],[79,37,63,35],[79,40,63,38],[79,45,63,43],[79,46,63,44,"config"],[79,52,63,50],[79,53,63,51,"_retryCount"],[79,64,63,62],[79,68,63,66,"config"],[79,74,63,72],[79,75,63,73,"_retryCount"],[79,86,63,84],[79,89,63,87],[79,90,63,88],[79,91,63,89],[79,93,63,91],[80,8,64,6,"config"],[80,14,64,12],[80,15,64,13,"_retryCount"],[80,26,64,24],[80,29,64,27],[80,30,64,28,"config"],[80,36,64,34],[80,37,64,35,"_retryCount"],[80,48,64,46],[80,52,64,50],[80,53,64,51],[80,57,64,55],[80,58,64,56],[81,8,65,6],[81,12,65,12,"delay"],[81,17,65,17],[81,20,65,20,"config"],[81,26,65,26],[81,27,65,27,"_retryCount"],[81,38,65,38],[81,41,65,41],[81,45,65,45],[81,46,65,46],[81,47,65,47],[82,8,66,6],[82,14,66,12],[82,18,66,16,"Promise"],[82,25,66,23],[82,26,66,24,"r"],[82,27,66,25],[82,31,66,29,"setTimeout"],[82,41,66,39],[82,42,66,40,"r"],[82,43,66,41],[82,45,66,43,"delay"],[82,50,66,48],[82,51,66,49],[82,52,66,50],[83,8,67,6],[83,15,67,13,"api"],[83,18,67,16],[83,19,67,17,"config"],[83,25,67,23],[83,26,67,24],[84,6,68,4],[85,6,69,4],[86,6,70,4],[86,10,70,8,"error"],[86,15,70,13],[86,16,70,14,"response"],[86,24,70,22],[86,26,70,24,"status"],[86,32,70,30],[86,37,70,35],[86,40,70,38],[86,42,70,40],[87,8,71,6,"console"],[87,15,71,13],[87,16,71,14,"log"],[87,19,71,17],[87,20,71,18],[87,61,71,59],[87,62,71,60],[88,6,72,4],[89,6,73,4],[89,13,73,11,"Promise"],[89,20,73,18],[89,21,73,19,"reject"],[89,27,73,25],[89,28,73,26,"error"],[89,33,73,31],[89,34,73,32],[90,4,74,2],[90,5,74,3],[91,4,74,3],[91,21,74,3,"_x"],[91,23,74,3],[92,6,74,3],[92,13,74,3,"_ref"],[92,17,74,3],[92,18,74,3,"apply"],[92,23,74,3],[92,30,74,3,"arguments"],[92,39,74,3],[93,4,74,3],[94,2,74,3],[94,5,75,0],[94,6,75,1],[95,2,77,0],[95,6,77,0,"_default"],[95,14,77,0],[95,17,77,15,"api"],[95,20,77,18],[96,0,77,19],[96,3]],"functionMap":{"names":["<global>","getAuthToken","interceptors.request.use$argument_0","interceptors.request.use$argument_1","interceptors.response.use$argument_0","interceptors.response.use$argument_1","Promise$argument_0"],"mappings":"AAA;qBCwB;CDQ;EEI;GFY;EGC;GHE;EIK;GJE;EKC;wBCM,yBD;GLQ"},"hasCjsExports":false},"type":"js/module"}]}