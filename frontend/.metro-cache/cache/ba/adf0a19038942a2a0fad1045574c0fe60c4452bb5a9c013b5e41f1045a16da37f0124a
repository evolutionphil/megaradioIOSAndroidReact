{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":73,"index":73}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":74},"end":{"line":2,"column":40,"index":114}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"../constants/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":115},"end":{"line":3,"column":48,"index":163}}],"key":"ZV0ujAFjHVGmM4aJSYIlDaiTRjE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactNative = require(_dependencyMap[2], \"react-native\");\n  var _constantsApi = require(_dependencyMap[3], \"../constants/api\");\n  // MegaRadio Internal API Key - unlimited, no rate limiting\n  var MEGARADIO_API_KEY = 'mr_VUzdIUHuXaagvWUC208Vzi_3lqEV1Vzw';\n\n  // For web preview, we cannot use credentials due to CORS\n  // Native apps will handle cookies differently\n  var isWeb = _reactNative.Platform.OS === 'web';\n\n  // Create axios instance with API key and cookie support\n  var api = axios.default.create({\n    baseURL: _constantsApi.API_BASE_URL,\n    timeout: 30000,\n    headers: {\n      'Content-Type': 'application/json',\n      'X-API-Key': MEGARADIO_API_KEY\n    },\n    // Only use credentials on native platforms where CORS isn't an issue\n    withCredentials: !isWeb\n  });\n\n  // Request interceptor\n  api.interceptors.request.use(config => {\n    // Ensure API key is always present\n    if (config.headers) {\n      config.headers['X-API-Key'] = MEGARADIO_API_KEY;\n    }\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n\n  // Response interceptor with retry for 429\n  api.interceptors.response.use(response => {\n    return response;\n  }, /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* (error) {\n      var config = error.config;\n      // Retry on 429 (rate limit) - max 2 retries with delay\n      if (error.response?.status === 429 && (!config._retryCount || config._retryCount < 2)) {\n        config._retryCount = (config._retryCount || 0) + 1;\n        var delay = config._retryCount * 1500; // 1.5s, 3s\n        yield new Promise(r => setTimeout(r, delay));\n        return api(config);\n      }\n      // Handle 401 unauthorized globally\n      if (error.response?.status === 401) {\n        console.log('Unauthorized - session may have expired');\n      }\n      return Promise.reject(error);\n    });\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n  var _default = api;\n});","lineCount":78,"map":[[12,2,60,0,"Object"],[12,8,60,0],[12,9,60,0,"defineProperty"],[12,23,60,0],[12,24,60,0,"exports"],[12,31,60,0],[13,4,60,0,"enumerable"],[13,14,60,0],[14,4,60,0,"get"],[14,7,60,0],[14,18,60,0,"get"],[14,19,60,0],[15,6,60,0],[15,13,60,0,"_default"],[15,21,60,0],[16,4,60,0],[17,2,60,0],[18,2,60,19],[18,6,60,19,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,60,19],[18,45,60,19,"require"],[18,52,60,19],[18,53,60,19,"_dependencyMap"],[18,67,60,19],[19,2,60,19],[19,6,60,19,"_asyncToGenerator"],[19,23,60,19],[19,26,60,19,"_interopDefault"],[19,41,60,19],[19,42,60,19,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,60,19],[20,2,1,0],[20,6,1,0,"_axios"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,1,0],[21,6,1,0,"axios"],[21,11,1,0],[21,14,1,0,"_interopDefault"],[21,29,1,0],[21,30,1,0,"_axios"],[21,36,1,0],[22,2,2,0],[22,6,2,0,"_reactNative"],[22,18,2,0],[22,21,2,0,"require"],[22,28,2,0],[22,29,2,0,"_dependencyMap"],[22,43,2,0],[23,2,3,0],[23,6,3,0,"_constantsApi"],[23,19,3,0],[23,22,3,0,"require"],[23,29,3,0],[23,30,3,0,"_dependencyMap"],[23,44,3,0],[24,2,5,0],[25,2,6,0],[25,6,6,6,"MEGARADIO_API_KEY"],[25,23,6,23],[25,26,6,26],[25,63,6,63],[27,2,8,0],[28,2,9,0],[29,2,10,0],[29,6,10,6,"isWeb"],[29,11,10,11],[29,14,10,14,"Platform"],[29,26,10,22],[29,27,10,22,"Platform"],[29,35,10,22],[29,36,10,23,"OS"],[29,38,10,25],[29,43,10,30],[29,48,10,35],[31,2,12,0],[32,2,13,0],[32,6,13,6,"api"],[32,9,13,24],[32,12,13,27,"axios"],[32,17,13,32],[32,18,13,32,"default"],[32,25,13,32],[32,26,13,33,"create"],[32,32,13,39],[32,33,13,40],[33,4,14,2,"baseURL"],[33,11,14,9],[33,13,14,11,"API_BASE_URL"],[33,26,14,23],[33,27,14,23,"API_BASE_URL"],[33,39,14,23],[34,4,15,2,"timeout"],[34,11,15,9],[34,13,15,11],[34,18,15,16],[35,4,16,2,"headers"],[35,11,16,9],[35,13,16,11],[36,6,17,4],[36,20,17,18],[36,22,17,20],[36,40,17,38],[37,6,18,4],[37,17,18,15],[37,19,18,17,"MEGARADIO_API_KEY"],[38,4,19,2],[38,5,19,3],[39,4,20,2],[40,4,21,2,"withCredentials"],[40,19,21,17],[40,21,21,19],[40,22,21,20,"isWeb"],[41,2,22,0],[41,3,22,1],[41,4,22,2],[43,2,24,0],[44,2,25,0,"api"],[44,5,25,3],[44,6,25,4,"interceptors"],[44,18,25,16],[44,19,25,17,"request"],[44,26,25,24],[44,27,25,25,"use"],[44,30,25,28],[44,31,26,3,"config"],[44,37,26,37],[44,41,26,42],[45,4,27,4],[46,4,28,4],[46,8,28,8,"config"],[46,14,28,14],[46,15,28,15,"headers"],[46,22,28,22],[46,24,28,24],[47,6,29,6,"config"],[47,12,29,12],[47,13,29,13,"headers"],[47,20,29,20],[47,21,29,21],[47,32,29,32],[47,33,29,33],[47,36,29,36,"MEGARADIO_API_KEY"],[47,53,29,53],[48,4,30,4],[49,4,31,4],[49,11,31,11,"config"],[49,17,31,17],[50,2,32,2],[50,3,32,3],[50,5,33,3,"error"],[50,10,33,8],[50,14,33,13],[51,4,34,4],[51,11,34,11,"Promise"],[51,18,34,18],[51,19,34,19,"reject"],[51,25,34,25],[51,26,34,26,"error"],[51,31,34,31],[51,32,34,32],[52,2,35,2],[52,3,36,0],[52,4,36,1],[54,2,38,0],[55,2,39,0,"api"],[55,5,39,3],[55,6,39,4,"interceptors"],[55,18,39,16],[55,19,39,17,"response"],[55,27,39,25],[55,28,39,26,"use"],[55,31,39,29],[55,32,40,3,"response"],[55,40,40,11],[55,44,40,16],[56,4,41,4],[56,11,41,11,"response"],[56,19,41,19],[57,2,42,2],[57,3,42,3],[58,4,42,3],[58,8,42,3,"_ref"],[58,12,42,3],[58,19,42,3,"_asyncToGenerator"],[58,36,42,3],[58,37,42,3,"default"],[58,44,42,3],[58,46,43,2],[58,57,43,9,"error"],[58,62,43,14],[58,64,43,19],[59,6,44,4],[59,10,44,10,"config"],[59,16,44,16],[59,19,44,19,"error"],[59,24,44,24],[59,25,44,25,"config"],[59,31,44,31],[60,6,45,4],[61,6,46,4],[61,10,46,8,"error"],[61,15,46,13],[61,16,46,14,"response"],[61,24,46,22],[61,26,46,24,"status"],[61,32,46,30],[61,37,46,35],[61,40,46,38],[61,45,46,43],[61,46,46,44,"config"],[61,52,46,50],[61,53,46,51,"_retryCount"],[61,64,46,62],[61,68,46,66,"config"],[61,74,46,72],[61,75,46,73,"_retryCount"],[61,86,46,84],[61,89,46,87],[61,90,46,88],[61,91,46,89],[61,93,46,91],[62,8,47,6,"config"],[62,14,47,12],[62,15,47,13,"_retryCount"],[62,26,47,24],[62,29,47,27],[62,30,47,28,"config"],[62,36,47,34],[62,37,47,35,"_retryCount"],[62,48,47,46],[62,52,47,50],[62,53,47,51],[62,57,47,55],[62,58,47,56],[63,8,48,6],[63,12,48,12,"delay"],[63,17,48,17],[63,20,48,20,"config"],[63,26,48,26],[63,27,48,27,"_retryCount"],[63,38,48,38],[63,41,48,41],[63,45,48,45],[63,46,48,46],[63,47,48,47],[64,8,49,6],[64,14,49,12],[64,18,49,16,"Promise"],[64,25,49,23],[64,26,49,24,"r"],[64,27,49,25],[64,31,49,29,"setTimeout"],[64,41,49,39],[64,42,49,40,"r"],[64,43,49,41],[64,45,49,43,"delay"],[64,50,49,48],[64,51,49,49],[64,52,49,50],[65,8,50,6],[65,15,50,13,"api"],[65,18,50,16],[65,19,50,17,"config"],[65,25,50,23],[65,26,50,24],[66,6,51,4],[67,6,52,4],[68,6,53,4],[68,10,53,8,"error"],[68,15,53,13],[68,16,53,14,"response"],[68,24,53,22],[68,26,53,24,"status"],[68,32,53,30],[68,37,53,35],[68,40,53,38],[68,42,53,40],[69,8,54,6,"console"],[69,15,54,13],[69,16,54,14,"log"],[69,19,54,17],[69,20,54,18],[69,61,54,59],[69,62,54,60],[70,6,55,4],[71,6,56,4],[71,13,56,11,"Promise"],[71,20,56,18],[71,21,56,19,"reject"],[71,27,56,25],[71,28,56,26,"error"],[71,33,56,31],[71,34,56,32],[72,4,57,2],[72,5,57,3],[73,4,57,3],[73,21,57,3,"_x"],[73,23,57,3],[74,6,57,3],[74,13,57,3,"_ref"],[74,17,57,3],[74,18,57,3,"apply"],[74,23,57,3],[74,30,57,3,"arguments"],[74,39,57,3],[75,4,57,3],[76,2,57,3],[76,5,58,0],[76,6,58,1],[77,2,60,0],[77,6,60,0,"_default"],[77,14,60,0],[77,17,60,15,"api"],[77,20,60,18],[78,0,60,19],[78,3]],"functionMap":{"names":["<global>","interceptors.request.use$argument_0","interceptors.request.use$argument_1","interceptors.response.use$argument_0","interceptors.response.use$argument_1","Promise$argument_0"],"mappings":"AAA;ECyB;GDM;EEC;GFE;EGK;GHE;EIC;wBCM,yBD;GJQ"},"hasCjsExports":false},"type":"js/module"}]}