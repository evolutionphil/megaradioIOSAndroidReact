{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":156},"end":{"line":4,"column":42,"index":198}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":199},"end":{"line":5,"column":69,"index":268}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../store/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":269},"end":{"line":6,"column":50,"index":319}}],"key":"/4BDl/hqolvw7T4CXD8jWAtZK4M=","exportNames":["*"],"imports":1}},{"name":"../store/favoritesStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":320},"end":{"line":7,"column":60,"index":380}}],"key":"rQmi7ZiN3wSYC/3oB9X28qKmXrY=","exportNames":["*"],"imports":1}},{"name":"../hooks/useAudioPlayer","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":381},"end":{"line":8,"column":51,"index":432}}],"key":"pUckzGairsxi/1vGHJirSPNjmRQ=","exportNames":["*"],"imports":1}},{"name":"../services/stationService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":433},"end":{"line":9,"column":56,"index":489}}],"key":"uwHKYj7/xzUyIn0NC/c691Hz7MQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$(); // PlayAtLoginHandler - Handles automatic playback on app start based on user settings\n  // Must be used inside AudioProvider to access playStation function\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"PlayAtLoginHandler\", {\n    enumerable: true,\n    get: function () {\n      return PlayAtLoginHandler;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _storeAuthStore = require(_dependencyMap[2], \"../store/authStore\");\n  var _storeFavoritesStore = require(_dependencyMap[3], \"../store/favoritesStore\");\n  var _hooksUseAudioPlayer = require(_dependencyMap[4], \"../hooks/useAudioPlayer\");\n  var _servicesStationService = require(_dependencyMap[5], \"../services/stationService\");\n  var stationService = _interopDefault(_servicesStationService);\n  const PLAY_AT_LOGIN_KEY = 'play_at_login_setting';\n  const LAST_PLAYED_STATION_KEY = '@megaradio_last_played_station';\n  const PlayAtLoginHandler = () => {\n    _s();\n    const hasExecuted = (0, _react.useRef)(false);\n    const {\n      isAuthenticated,\n      isAuthLoaded\n    } = (0, _storeAuthStore.useAuthStore)();\n    const {\n      favorites,\n      isLoaded: favoritesLoaded\n    } = (0, _storeFavoritesStore.useFavoritesStore)();\n    const {\n      playStation\n    } = (0, _hooksUseAudioPlayer.useAudio)();\n    (0, _react.useEffect)(() => {\n      const executePlayAtLogin = async () => {\n        // Only execute once per app session\n        if (hasExecuted.current) {\n          return;\n        }\n\n        // Wait for auth to be loaded from storage first\n        if (!isAuthLoaded) {\n          console.log('[PlayAtLogin] Auth not loaded yet, waiting...');\n          return;\n        }\n\n        // Check if user is authenticated\n        if (!isAuthenticated) {\n          console.log('[PlayAtLogin] User not authenticated, skipping');\n          hasExecuted.current = true; // Mark as executed to prevent re-running\n          return;\n        }\n\n        // Wait a bit for app to fully initialize after auth confirmed\n        await new Promise(resolve => setTimeout(resolve, 500));\n        try {\n          const setting = await AsyncStorage.default.getItem(PLAY_AT_LOGIN_KEY);\n          console.log('[PlayAtLogin] Setting:', setting);\n\n          // Mark as executed regardless of setting to prevent re-runs\n          hasExecuted.current = true;\n          if (!setting || setting === 'off') {\n            console.log('[PlayAtLogin] Disabled or not set');\n            return;\n          }\n          let stationToPlay = null;\n          switch (setting) {\n            case 'last_played':\n              // Get last played station from storage\n              const lastPlayedJson = await AsyncStorage.default.getItem(LAST_PLAYED_STATION_KEY);\n              if (lastPlayedJson) {\n                stationToPlay = JSON.parse(lastPlayedJson);\n                console.log('[PlayAtLogin] Last played station:', stationToPlay?.name);\n              }\n              break;\n            case 'favorite':\n              // Get first favorite station\n              if (favorites && favorites.length > 0) {\n                stationToPlay = favorites[0];\n                console.log('[PlayAtLogin] First favorite station:', stationToPlay?.name);\n              }\n              break;\n            case 'random':\n              // Get random station from API\n              try {\n                const response = await stationService.default.getStations({\n                  limit: 50\n                });\n                if (response?.stations && response.stations.length > 0) {\n                  const randomIndex = Math.floor(Math.random() * response.stations.length);\n                  stationToPlay = response.stations[randomIndex];\n                  console.log('[PlayAtLogin] Random station:', stationToPlay?.name);\n                }\n              } catch (error) {\n                console.error('[PlayAtLogin] Failed to fetch random station:', error);\n              }\n              break;\n          }\n          if (stationToPlay) {\n            console.log('[PlayAtLogin] Starting playback:', stationToPlay.name);\n            await playStation(stationToPlay);\n          }\n        } catch (error) {\n          console.error('[PlayAtLogin] Error:', error);\n        }\n      };\n      executePlayAtLogin();\n    }, [isAuthenticated, isAuthLoaded, favorites, favoritesLoaded, playStation]);\n\n    // This component doesn't render anything\n    return null;\n  };\n  _s(PlayAtLoginHandler, \"FhxNo4xKueyOvRJXCJiqiR+37pQ=\", false, function () {\n    return [_storeAuthStore.useAuthStore, _storeFavoritesStore.useFavoritesStore, _hooksUseAudioPlayer.useAudio];\n  });\n  _c = PlayAtLoginHandler;\n  var _default = PlayAtLoginHandler;\n  var _c;\n  $RefreshReg$(_c, \"PlayAtLoginHandler\");\n});","lineCount":136,"map":[[4,27,1,0],[5,2,2,0],[6,2,2,0,"Object"],[6,8,2,0],[6,9,2,0,"defineProperty"],[6,23,2,0],[6,24,2,0,"exports"],[6,31,2,0],[7,4,2,0,"value"],[7,9,2,0],[8,2,2,0],[9,2,2,0],[9,11,2,0,"_interopDefault"],[9,27,2,0,"e"],[9,28,2,0],[10,4,2,0],[10,11,2,0,"e"],[10,12,2,0],[10,16,2,0,"e"],[10,17,2,0],[10,18,2,0,"__esModule"],[10,28,2,0],[10,31,2,0,"e"],[10,32,2,0],[11,6,2,0,"default"],[11,13,2,0],[11,15,2,0,"e"],[12,4,2,0],[13,2,2,0],[14,2,106,0,"Object"],[14,8,106,0],[14,9,106,0,"defineProperty"],[14,23,106,0],[14,24,106,0,"exports"],[14,31,106,0],[15,4,106,0,"enumerable"],[15,14,106,0],[16,4,106,0,"get"],[16,7,106,0],[16,18,106,0,"get"],[16,19,106,0],[17,6,106,0],[17,13,106,0,"_default"],[17,21,106,0],[18,4,106,0],[19,2,106,0],[20,2,14,0,"Object"],[20,8,14,0],[20,9,14,0,"defineProperty"],[20,23,14,0],[20,24,14,0,"exports"],[20,31,14,0],[21,4,14,0,"enumerable"],[21,14,14,0],[22,4,14,0,"get"],[22,7,14,0],[22,18,14,0,"get"],[22,19,14,0],[23,6,14,0],[23,13,14,0,"PlayAtLoginHandler"],[23,31,14,0],[24,4,14,0],[25,2,14,0],[26,2,4,0],[26,6,4,0,"_react"],[26,12,4,0],[26,15,4,0,"require"],[26,22,4,0],[26,23,4,0,"_dependencyMap"],[26,37,4,0],[27,2,5,0],[27,6,5,0,"_reactNativeAsyncStorageAsyncStorage"],[27,42,5,0],[27,45,5,0,"require"],[27,52,5,0],[27,53,5,0,"_dependencyMap"],[27,67,5,0],[28,2,5,0],[28,6,5,0,"AsyncStorage"],[28,18,5,0],[28,21,5,0,"_interopDefault"],[28,36,5,0],[28,37,5,0,"_reactNativeAsyncStorageAsyncStorage"],[28,73,5,0],[29,2,6,0],[29,6,6,0,"_storeAuthStore"],[29,21,6,0],[29,24,6,0,"require"],[29,31,6,0],[29,32,6,0,"_dependencyMap"],[29,46,6,0],[30,2,7,0],[30,6,7,0,"_storeFavoritesStore"],[30,26,7,0],[30,29,7,0,"require"],[30,36,7,0],[30,37,7,0,"_dependencyMap"],[30,51,7,0],[31,2,8,0],[31,6,8,0,"_hooksUseAudioPlayer"],[31,26,8,0],[31,29,8,0,"require"],[31,36,8,0],[31,37,8,0,"_dependencyMap"],[31,51,8,0],[32,2,9,0],[32,6,9,0,"_servicesStationService"],[32,29,9,0],[32,32,9,0,"require"],[32,39,9,0],[32,40,9,0,"_dependencyMap"],[32,54,9,0],[33,2,9,0],[33,6,9,0,"stationService"],[33,20,9,0],[33,23,9,0,"_interopDefault"],[33,38,9,0],[33,39,9,0,"_servicesStationService"],[33,62,9,0],[34,2,11,0],[34,8,11,6,"PLAY_AT_LOGIN_KEY"],[34,25,11,23],[34,28,11,26],[34,51,11,49],[35,2,12,0],[35,8,12,6,"LAST_PLAYED_STATION_KEY"],[35,31,12,29],[35,34,12,32],[35,66,12,64],[36,2,14,7],[36,8,14,13,"PlayAtLoginHandler"],[36,26,14,41],[36,29,14,44,"PlayAtLoginHandler"],[36,30,14,44],[36,35,14,50],[37,4,14,50,"_s"],[37,6,14,50],[38,4,15,2],[38,10,15,8,"hasExecuted"],[38,21,15,19],[38,24,15,22],[38,28,15,22,"useRef"],[38,34,15,28],[38,35,15,28,"useRef"],[38,41,15,28],[38,43,15,29],[38,48,15,34],[38,49,15,35],[39,4,16,2],[39,10,16,8],[40,6,16,10,"isAuthenticated"],[40,21,16,25],[41,6,16,27,"isAuthLoaded"],[42,4,16,40],[42,5,16,41],[42,8,16,44],[42,12,16,44,"useAuthStore"],[42,27,16,56],[42,28,16,56,"useAuthStore"],[42,40,16,56],[42,42,16,57],[42,43,16,58],[43,4,17,2],[43,10,17,8],[44,6,17,10,"favorites"],[44,15,17,19],[45,6,17,21,"isLoaded"],[45,14,17,29],[45,16,17,31,"favoritesLoaded"],[46,4,17,47],[46,5,17,48],[46,8,17,51],[46,12,17,51,"useFavoritesStore"],[46,32,17,68],[46,33,17,68,"useFavoritesStore"],[46,50,17,68],[46,52,17,69],[46,53,17,70],[47,4,18,2],[47,10,18,8],[48,6,18,10,"playStation"],[49,4,18,22],[49,5,18,23],[49,8,18,26],[49,12,18,26,"useAudio"],[49,32,18,34],[49,33,18,34,"useAudio"],[49,41,18,34],[49,43,18,35],[49,44,18,36],[50,4,20,2],[50,8,20,2,"useEffect"],[50,14,20,11],[50,15,20,11,"useEffect"],[50,24,20,11],[50,26,20,12],[50,32,20,18],[51,6,21,4],[51,12,21,10,"executePlayAtLogin"],[51,30,21,28],[51,33,21,31],[51,39,21,31,"executePlayAtLogin"],[51,40,21,31],[51,45,21,43],[52,8,22,6],[53,8,23,6],[53,12,23,10,"hasExecuted"],[53,23,23,21],[53,24,23,22,"current"],[53,31,23,29],[53,33,23,31],[54,10,24,8],[55,8,25,6],[57,8,27,6],[58,8,28,6],[58,12,28,10],[58,13,28,11,"isAuthLoaded"],[58,25,28,23],[58,27,28,25],[59,10,29,8,"console"],[59,17,29,15],[59,18,29,16,"log"],[59,21,29,19],[59,22,29,20],[59,69,29,67],[59,70,29,68],[60,10,30,8],[61,8,31,6],[63,8,33,6],[64,8,34,6],[64,12,34,10],[64,13,34,11,"isAuthenticated"],[64,28,34,26],[64,30,34,28],[65,10,35,8,"console"],[65,17,35,15],[65,18,35,16,"log"],[65,21,35,19],[65,22,35,20],[65,70,35,68],[65,71,35,69],[66,10,36,8,"hasExecuted"],[66,21,36,19],[66,22,36,20,"current"],[66,29,36,27],[66,32,36,30],[66,36,36,34],[66,37,36,35],[66,38,36,36],[67,10,37,8],[68,8,38,6],[70,8,40,6],[71,8,41,6],[71,14,41,12],[71,18,41,16,"Promise"],[71,25,41,23],[71,26,41,24,"resolve"],[71,33,41,31],[71,37,41,35,"setTimeout"],[71,47,41,45],[71,48,41,46,"resolve"],[71,55,41,53],[71,57,41,55],[71,60,41,58],[71,61,41,59],[71,62,41,60],[72,8,43,6],[72,12,43,10],[73,10,44,8],[73,16,44,14,"setting"],[73,23,44,21],[73,26,44,24],[73,32,44,30,"AsyncStorage"],[73,44,44,42],[73,45,44,42,"default"],[73,52,44,42],[73,53,44,43,"getItem"],[73,60,44,50],[73,61,44,51,"PLAY_AT_LOGIN_KEY"],[73,78,44,68],[73,79,44,69],[74,10,45,8,"console"],[74,17,45,15],[74,18,45,16,"log"],[74,21,45,19],[74,22,45,20],[74,46,45,44],[74,48,45,46,"setting"],[74,55,45,53],[74,56,45,54],[76,10,47,8],[77,10,48,8,"hasExecuted"],[77,21,48,19],[77,22,48,20,"current"],[77,29,48,27],[77,32,48,30],[77,36,48,34],[78,10,50,8],[78,14,50,12],[78,15,50,13,"setting"],[78,22,50,20],[78,26,50,24,"setting"],[78,33,50,31],[78,38,50,36],[78,43,50,41],[78,45,50,43],[79,12,51,10,"console"],[79,19,51,17],[79,20,51,18,"log"],[79,23,51,21],[79,24,51,22],[79,59,51,57],[79,60,51,58],[80,12,52,10],[81,10,53,8],[82,10,55,8],[82,14,55,12,"stationToPlay"],[82,27,55,25],[82,30,55,28],[82,34,55,32],[83,10,57,8],[83,18,57,16,"setting"],[83,25,57,23],[84,12,58,10],[84,17,58,15],[84,30,58,28],[85,14,59,12],[86,14,60,12],[86,20,60,18,"lastPlayedJson"],[86,34,60,32],[86,37,60,35],[86,43,60,41,"AsyncStorage"],[86,55,60,53],[86,56,60,53,"default"],[86,63,60,53],[86,64,60,54,"getItem"],[86,71,60,61],[86,72,60,62,"LAST_PLAYED_STATION_KEY"],[86,95,60,85],[86,96,60,86],[87,14,61,12],[87,18,61,16,"lastPlayedJson"],[87,32,61,30],[87,34,61,32],[88,16,62,14,"stationToPlay"],[88,29,62,27],[88,32,62,30,"JSON"],[88,36,62,34],[88,37,62,35,"parse"],[88,42,62,40],[88,43,62,41,"lastPlayedJson"],[88,57,62,55],[88,58,62,56],[89,16,63,14,"console"],[89,23,63,21],[89,24,63,22,"log"],[89,27,63,25],[89,28,63,26],[89,64,63,62],[89,66,63,64,"stationToPlay"],[89,79,63,77],[89,81,63,79,"name"],[89,85,63,83],[89,86,63,84],[90,14,64,12],[91,14,65,12],[92,12,67,10],[92,17,67,15],[92,27,67,25],[93,14,68,12],[94,14,69,12],[94,18,69,16,"favorites"],[94,27,69,25],[94,31,69,29,"favorites"],[94,40,69,38],[94,41,69,39,"length"],[94,47,69,45],[94,50,69,48],[94,51,69,49],[94,53,69,51],[95,16,70,14,"stationToPlay"],[95,29,70,27],[95,32,70,30,"favorites"],[95,41,70,39],[95,42,70,40],[95,43,70,41],[95,44,70,42],[96,16,71,14,"console"],[96,23,71,21],[96,24,71,22,"log"],[96,27,71,25],[96,28,71,26],[96,67,71,65],[96,69,71,67,"stationToPlay"],[96,82,71,80],[96,84,71,82,"name"],[96,88,71,86],[96,89,71,87],[97,14,72,12],[98,14,73,12],[99,12,75,10],[99,17,75,15],[99,25,75,23],[100,14,76,12],[101,14,77,12],[101,18,77,16],[102,16,78,14],[102,22,78,20,"response"],[102,30,78,28],[102,33,78,31],[102,39,78,37,"stationService"],[102,53,78,51],[102,54,78,51,"default"],[102,61,78,51],[102,62,78,52,"getStations"],[102,73,78,63],[102,74,78,64],[103,18,78,66,"limit"],[103,23,78,71],[103,25,78,73],[104,16,78,76],[104,17,78,77],[104,18,78,78],[105,16,79,14],[105,20,79,18,"response"],[105,28,79,26],[105,30,79,28,"stations"],[105,38,79,36],[105,42,79,40,"response"],[105,50,79,48],[105,51,79,49,"stations"],[105,59,79,57],[105,60,79,58,"length"],[105,66,79,64],[105,69,79,67],[105,70,79,68],[105,72,79,70],[106,18,80,16],[106,24,80,22,"randomIndex"],[106,35,80,33],[106,38,80,36,"Math"],[106,42,80,40],[106,43,80,41,"floor"],[106,48,80,46],[106,49,80,47,"Math"],[106,53,80,51],[106,54,80,52,"random"],[106,60,80,58],[106,61,80,59],[106,62,80,60],[106,65,80,63,"response"],[106,73,80,71],[106,74,80,72,"stations"],[106,82,80,80],[106,83,80,81,"length"],[106,89,80,87],[106,90,80,88],[107,18,81,16,"stationToPlay"],[107,31,81,29],[107,34,81,32,"response"],[107,42,81,40],[107,43,81,41,"stations"],[107,51,81,49],[107,52,81,50,"randomIndex"],[107,63,81,61],[107,64,81,62],[108,18,82,16,"console"],[108,25,82,23],[108,26,82,24,"log"],[108,29,82,27],[108,30,82,28],[108,61,82,59],[108,63,82,61,"stationToPlay"],[108,76,82,74],[108,78,82,76,"name"],[108,82,82,80],[108,83,82,81],[109,16,83,14],[110,14,84,12],[110,15,84,13],[110,16,84,14],[110,23,84,21,"error"],[110,28,84,26],[110,30,84,28],[111,16,85,14,"console"],[111,23,85,21],[111,24,85,22,"error"],[111,29,85,27],[111,30,85,28],[111,77,85,75],[111,79,85,77,"error"],[111,84,85,82],[111,85,85,83],[112,14,86,12],[113,14,87,12],[114,10,88,8],[115,10,90,8],[115,14,90,12,"stationToPlay"],[115,27,90,25],[115,29,90,27],[116,12,91,10,"console"],[116,19,91,17],[116,20,91,18,"log"],[116,23,91,21],[116,24,91,22],[116,58,91,56],[116,60,91,58,"stationToPlay"],[116,73,91,71],[116,74,91,72,"name"],[116,78,91,76],[116,79,91,77],[117,12,92,10],[117,18,92,16,"playStation"],[117,29,92,27],[117,30,92,28,"stationToPlay"],[117,43,92,41],[117,44,92,42],[118,10,93,8],[119,8,94,6],[119,9,94,7],[119,10,94,8],[119,17,94,15,"error"],[119,22,94,20],[119,24,94,22],[120,10,95,8,"console"],[120,17,95,15],[120,18,95,16,"error"],[120,23,95,21],[120,24,95,22],[120,46,95,44],[120,48,95,46,"error"],[120,53,95,51],[120,54,95,52],[121,8,96,6],[122,6,97,4],[122,7,97,5],[123,6,99,4,"executePlayAtLogin"],[123,24,99,22],[123,25,99,23],[123,26,99,24],[124,4,100,2],[124,5,100,3],[124,7,100,5],[124,8,100,6,"isAuthenticated"],[124,23,100,21],[124,25,100,23,"isAuthLoaded"],[124,37,100,35],[124,39,100,37,"favorites"],[124,48,100,46],[124,50,100,48,"favoritesLoaded"],[124,65,100,63],[124,67,100,65,"playStation"],[124,78,100,76],[124,79,100,77],[124,80,100,78],[126,4,102,2],[127,4,103,2],[127,11,103,9],[127,15,103,13],[128,2,104,0],[128,3,104,1],[129,2,104,2,"_s"],[129,4,104,2],[129,5,14,13,"PlayAtLoginHandler"],[129,23,14,41],[130,4,14,41],[130,12,16,44,"useAuthStore"],[130,27,16,56],[130,28,16,56,"useAuthStore"],[130,40,16,56],[130,42,17,51,"useFavoritesStore"],[130,62,17,68],[130,63,17,68,"useFavoritesStore"],[130,80,17,68],[130,82,18,26,"useAudio"],[130,102,18,34],[130,103,18,34,"useAudio"],[130,111,18,34],[131,2,18,34],[132,2,18,34,"_c"],[132,4,18,34],[132,7,14,13,"PlayAtLoginHandler"],[132,25,14,41],[133,2,106,0],[133,6,106,0,"_default"],[133,14,106,0],[133,17,106,15,"PlayAtLoginHandler"],[133,35,106,33],[134,2,106,34],[134,6,106,34,"_c"],[134,8,106,34],[135,2,106,34,"$RefreshReg$"],[135,14,106,34],[135,15,106,34,"_c"],[135,17,106,34],[136,0,106,34],[136,3]],"functionMap":{"names":["<global>","PlayAtLoginHandler","useEffect$argument_0","executePlayAtLogin","Promise$argument_0"],"mappings":"AAA;4CCa;YCM;+BCC;wBCoB,mCD;KDwD;GDG;CDI"},"hasCjsExports":false},"type":"js/module"}]}