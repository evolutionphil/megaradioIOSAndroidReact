{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":5,"column":21,"index":90}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return CastChannel;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[1]);\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[2]);\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _reactNative = require(_dependencyMap[3]);\n  var Native = _reactNative.NativeModules.RNGCCastSession;\n\n  /**\n   * A channel for sending custom messages between this sender and the Cast receiver. Use when you've built a custom receiver and want to communicate with it.\n   *\n   * @see [Custom Channels](../../guides/custom-channels)\n   *\n   * @example\n   * ```js\n   * import { CastChannel } from 'react-native-google-cast'\n   *\n   * const channel = await castSession.addChannel('urn:x-cast:com.example.custom')\n   *\n   * channel.sendMessage('...')\n   * ```\n   */\n  var CastChannel = /*#__PURE__*/function () {\n    /** A flag indicating whether this channel is currently connected. */\n\n    /** A custom channel identifier starting with `urn:x-cast:`. */\n\n    /** A flag indicating whether this channel is currently writable. */\n\n    function CastChannel(data, onMessage) {\n      (0, _classCallCheck.default)(this, CastChannel);\n      this.connected = data.connected;\n      this.namespace = data.namespace;\n      this.writable = data.writable;\n      if (onMessage) this.onMessage(onMessage);\n      this.onUpdate();\n    }\n\n    /**\n     * Add a custom channel to a connected session. This method is equivalent to {@link CastSession#addChannel}.\n     *\n     * @param namespace A custom channel identifier starting with `urn:x-cast:`, for example `urn:x-cast:com.reactnative.googlecast.example`. The namespace name is arbitrary; just make sure it's unique.\n     * @param onMessage function to be invoked when we receive a message from the connected Cast receiver.\n     */\n    return (0, _createClass.default)(CastChannel, [{\n      key: \"onMessage\",\n      value:\n      /**\n       * Register a message listener. If one already exists, it will be replaced.\n       *\n       * @param listener function to be invoked when we receive a message from the connected Cast receiver.\n       */\n      function onMessage(listener) {\n        this.offMessage();\n        var eventEmitter = new _reactNative.NativeEventEmitter(Native);\n        this.messageListener = eventEmitter.addListener(Native.CHANNEL_MESSAGE_RECEIVED, _ref => {\n          var namespace = _ref.namespace,\n            message = _ref.message;\n          this.namespace === namespace && listener(message);\n        });\n      }\n\n      /**\n       * Unregister a message listener.\n       */\n    }, {\n      key: \"offMessage\",\n      value: function offMessage() {\n        this.messageListener?.remove();\n        this.messageListener = undefined;\n      }\n    }, {\n      key: \"onUpdate\",\n      value: function onUpdate() {\n        var eventEmitter = new _reactNative.NativeEventEmitter(Native);\n        this.channelListener = eventEmitter.addListener(Native.CHANNEL_UPDATED, ch => {\n          if (this.namespace !== ch.namespace) return;\n          this.connected = ch.connected;\n          this.writable = ch.writable;\n        });\n      }\n    }, {\n      key: \"offUpdate\",\n      value: function offUpdate() {\n        this.channelListener?.remove();\n        this.channelListener = undefined;\n      }\n\n      /**\n       * Remove the channel when it's no longer needed.\n       * By calling this method, the underlying channel will be destroyed.\n       */\n    }, {\n      key: \"remove\",\n      value: function remove() {\n        this.offMessage();\n        this.offUpdate();\n        return Native.removeChannel(this.namespace);\n      }\n\n      /**\n       * Send a message to the connected Cast receiver using this channel. Note that by default you need to send the message as a JSON object, unless you've initialized the namespace on the receiver to be of the string type.\n       *\n       * To listen for responses, register an {#onMessage} listener.\n       */\n    }, {\n      key: \"sendMessage\",\n      value: function sendMessage(message) {\n        return Native.sendMessage(this.namespace, typeof message === 'string' ? message : JSON.stringify(message));\n      }\n    }], [{\n      key: \"add\",\n      value: (function () {\n        var _add = (0, _asyncToGenerator.default)(function* (namespace, onMessage) {\n          if (namespace === 'urn:x-cast:com.google.cast.media') throw new Error('The namespace \"urn:x-cast:com.google.cast.media\" is reserved. Please use a different name.');\n          var channel = yield Native.addChannel(namespace);\n          if (!channel.connected) {\n            console.warn(`Channel ${namespace} not connected. Make sure a session is established and you've set a listener in your custom receiver https://developers.google.com/cast/docs/web_receiver/core_features#custom_messages`);\n          }\n          return new CastChannel(channel, onMessage);\n        });\n        function add(_x, _x2) {\n          return _add.apply(this, arguments);\n        }\n        return add;\n      }())\n    }]);\n  }();\n});","lineCount":147,"map":[[15,13,23,21,"CastChannel"],[15,24,23,32],[16,4,23,32],[17,2,23,32],[18,2,23,32],[18,6,23,32,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,23,32],[18,45,23,32,"require"],[18,52,23,32],[18,53,23,32,"_dependencyMap"],[18,67,23,32],[19,2,23,32],[19,6,23,32,"_asyncToGenerator"],[19,23,23,32],[19,26,23,32,"_interopDefault"],[19,41,23,32],[19,42,23,32,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,23,32],[20,2,23,32],[20,6,23,32,"_babelRuntimeHelpersClassCallCheck"],[20,40,23,32],[20,43,23,32,"require"],[20,50,23,32],[20,51,23,32,"_dependencyMap"],[20,65,23,32],[21,2,23,32],[21,6,23,32,"_classCallCheck"],[21,21,23,32],[21,24,23,32,"_interopDefault"],[21,39,23,32],[21,40,23,32,"_babelRuntimeHelpersClassCallCheck"],[21,74,23,32],[22,2,23,32],[22,6,23,32,"_babelRuntimeHelpersCreateClass"],[22,37,23,32],[22,40,23,32,"require"],[22,47,23,32],[22,48,23,32,"_dependencyMap"],[22,62,23,32],[23,2,23,32],[23,6,23,32,"_createClass"],[23,18,23,32],[23,21,23,32,"_interopDefault"],[23,36,23,32],[23,37,23,32,"_babelRuntimeHelpersCreateClass"],[23,68,23,32],[24,2,1,0],[24,6,1,0,"_reactNative"],[24,18,1,0],[24,21,1,0,"require"],[24,28,1,0],[24,29,1,0,"_dependencyMap"],[24,43,1,0],[25,2,7,0],[25,6,7,25,"Native"],[25,12,7,31],[25,15,7,36,"NativeModules"],[25,27,7,49],[25,28,7,49,"NativeModules"],[25,41,7,49],[25,42,7,8,"RNGCCastSession"],[25,57,7,23],[27,2,9,0],[28,0,10,0],[29,0,11,0],[30,0,12,0],[31,0,13,0],[32,0,14,0],[33,0,15,0],[34,0,16,0],[35,0,17,0],[36,0,18,0],[37,0,19,0],[38,0,20,0],[39,0,21,0],[40,0,22,0],[41,2,9,0],[41,6,23,21,"CastChannel"],[41,17,23,32],[42,4,27,2],[44,4,30,2],[46,4,33,2],[48,4,36,2],[48,13,36,2,"CastChannel"],[48,25,37,4,"data"],[48,29,37,21],[48,31,38,4,"onMessage"],[48,40,38,63],[48,42,39,4],[49,6,39,4],[49,10,39,4,"_classCallCheck"],[49,25,39,4],[49,26,39,4,"default"],[49,33,39,4],[49,41,39,4,"CastChannel"],[49,52,39,4],[50,6,40,4],[50,10,40,8],[50,11,40,9,"connected"],[50,20,40,18],[50,23,40,21,"data"],[50,27,40,25],[50,28,40,26,"connected"],[50,37,40,35],[51,6,41,4],[51,10,41,8],[51,11,41,9,"namespace"],[51,20,41,18],[51,23,41,21,"data"],[51,27,41,25],[51,28,41,26,"namespace"],[51,37,41,35],[52,6,42,4],[52,10,42,8],[52,11,42,9,"writable"],[52,19,42,17],[52,22,42,20,"data"],[52,26,42,24],[52,27,42,25,"writable"],[52,35,42,33],[53,6,44,4],[53,10,44,8,"onMessage"],[53,19,44,17],[53,21,44,19],[53,25,44,23],[53,26,44,24,"onMessage"],[53,35,44,33],[53,36,44,34,"onMessage"],[53,45,44,43],[53,46,44,44],[54,6,45,4],[54,10,45,8],[54,11,45,9,"onUpdate"],[54,19,45,17],[54,20,45,18],[54,21,45,19],[55,4,46,2],[57,4,48,2],[58,0,49,0],[59,0,50,0],[60,0,51,0],[61,0,52,0],[62,0,53,0],[63,4,48,2],[63,15,48,2,"_createClass"],[63,27,48,2],[63,28,48,2,"default"],[63,35,48,2],[63,37,48,2,"CastChannel"],[63,48,48,2],[64,6,48,2,"key"],[64,9,48,2],[65,6,48,2,"value"],[65,11,48,2],[66,6,74,2],[67,0,75,0],[68,0,76,0],[69,0,77,0],[70,0,78,0],[71,6,79,2],[71,15,79,2,"onMessage"],[71,24,79,11,"onMessage"],[71,25,79,12,"listener"],[71,33,79,69],[71,35,79,71],[72,8,80,4],[72,12,80,8],[72,13,80,9,"offMessage"],[72,23,80,19],[72,24,80,20],[72,25,80,21],[73,8,81,4],[73,12,81,10,"eventEmitter"],[73,24,81,22],[73,27,81,25],[73,31,81,29,"NativeEventEmitter"],[73,43,81,47],[73,44,81,47,"NativeEventEmitter"],[73,62,81,47],[73,63,81,48,"Native"],[73,69,81,54],[73,70,81,55],[74,8,82,4],[74,12,82,8],[74,13,82,9,"messageListener"],[74,28,82,24],[74,31,82,27,"eventEmitter"],[74,43,82,39],[74,44,82,40,"addListener"],[74,55,82,51],[74,56,83,6,"Native"],[74,62,83,12],[74,63,83,13,"CHANNEL_MESSAGE_RECEIVED"],[74,87,83,37],[74,89,84,6,"_ref"],[74,93,84,6],[74,97,84,34],[75,10,84,34],[75,14,84,9,"namespace"],[75,23,84,18],[75,26,84,18,"_ref"],[75,30,84,18],[75,31,84,9,"namespace"],[75,40,84,18],[76,12,84,20,"message"],[76,19,84,27],[76,22,84,27,"_ref"],[76,26,84,27],[76,27,84,20,"message"],[76,34,84,27],[77,10,85,8],[77,14,85,12],[77,15,85,13,"namespace"],[77,24,85,22],[77,29,85,27,"namespace"],[77,38,85,36],[77,42,85,40,"listener"],[77,50,85,48],[77,51,85,49,"message"],[77,58,85,56],[77,59,85,57],[78,8,86,6],[78,9,87,4],[78,10,87,5],[79,6,88,2],[81,6,90,2],[82,0,91,0],[83,0,92,0],[84,4,90,2],[85,6,90,2,"key"],[85,9,90,2],[86,6,90,2,"value"],[86,11,90,2],[86,13,93,2],[86,22,93,2,"offMessage"],[86,32,93,12,"offMessage"],[86,33,93,12],[86,35,93,21],[87,8,94,4],[87,12,94,8],[87,13,94,9,"messageListener"],[87,28,94,24],[87,30,94,26,"remove"],[87,36,94,32],[87,37,94,33],[87,38,94,34],[88,8,95,4],[88,12,95,8],[88,13,95,9,"messageListener"],[88,28,95,24],[88,31,95,27,"undefined"],[88,40,95,36],[89,6,96,2],[90,4,96,3],[91,6,96,3,"key"],[91,9,96,3],[92,6,96,3,"value"],[92,11,96,3],[92,13,98,2],[92,22,98,10,"onUpdate"],[92,30,98,18,"onUpdate"],[92,31,98,18],[92,33,98,21],[93,8,99,4],[93,12,99,10,"eventEmitter"],[93,24,99,22],[93,27,99,25],[93,31,99,29,"NativeEventEmitter"],[93,43,99,47],[93,44,99,47,"NativeEventEmitter"],[93,62,99,47],[93,63,99,48,"Native"],[93,69,99,54],[93,70,99,55],[94,8,100,4],[94,12,100,8],[94,13,100,9,"channelListener"],[94,28,100,24],[94,31,100,27,"eventEmitter"],[94,43,100,39],[94,44,100,40,"addListener"],[94,55,100,51],[94,56,101,6,"Native"],[94,62,101,12],[94,63,101,13,"CHANNEL_UPDATED"],[94,78,101,28],[94,80,102,7,"ch"],[94,82,102,9],[94,86,102,14],[95,10,103,8],[95,14,103,12],[95,18,103,16],[95,19,103,17,"namespace"],[95,28,103,26],[95,33,103,31,"ch"],[95,35,103,33],[95,36,103,34,"namespace"],[95,45,103,43],[95,47,103,45],[96,10,104,8],[96,14,104,12],[96,15,104,13,"connected"],[96,24,104,22],[96,27,104,25,"ch"],[96,29,104,27],[96,30,104,28,"connected"],[96,39,104,37],[97,10,105,8],[97,14,105,12],[97,15,105,13,"writable"],[97,23,105,21],[97,26,105,24,"ch"],[97,28,105,26],[97,29,105,27,"writable"],[97,37,105,35],[98,8,106,6],[98,9,107,4],[98,10,107,5],[99,6,108,2],[100,4,108,3],[101,6,108,3,"key"],[101,9,108,3],[102,6,108,3,"value"],[102,11,108,3],[102,13,110,2],[102,22,110,10,"offUpdate"],[102,31,110,19,"offUpdate"],[102,32,110,19],[102,34,110,22],[103,8,111,4],[103,12,111,8],[103,13,111,9,"channelListener"],[103,28,111,24],[103,30,111,26,"remove"],[103,36,111,32],[103,37,111,33],[103,38,111,34],[104,8,112,4],[104,12,112,8],[104,13,112,9,"channelListener"],[104,28,112,24],[104,31,112,27,"undefined"],[104,40,112,36],[105,6,113,2],[107,6,115,2],[108,0,116,0],[109,0,117,0],[110,0,118,0],[111,4,115,2],[112,6,115,2,"key"],[112,9,115,2],[113,6,115,2,"value"],[113,11,115,2],[113,13,119,2],[113,22,119,2,"remove"],[113,28,119,8,"remove"],[113,29,119,8],[113,31,119,26],[114,8,120,4],[114,12,120,8],[114,13,120,9,"offMessage"],[114,23,120,19],[114,24,120,20],[114,25,120,21],[115,8,121,4],[115,12,121,8],[115,13,121,9,"offUpdate"],[115,22,121,18],[115,23,121,19],[115,24,121,20],[116,8,122,4],[116,15,122,11,"Native"],[116,21,122,17],[116,22,122,18,"removeChannel"],[116,35,122,31],[116,36,122,32],[116,40,122,36],[116,41,122,37,"namespace"],[116,50,122,46],[116,51,122,47],[117,6,123,2],[119,6,125,2],[120,0,126,0],[121,0,127,0],[122,0,128,0],[123,0,129,0],[124,4,125,2],[125,6,125,2,"key"],[125,9,125,2],[126,6,125,2,"value"],[126,11,125,2],[126,13,130,2],[126,22,130,2,"sendMessage"],[126,33,130,13,"sendMessage"],[126,34,130,14,"message"],[126,41,130,51],[126,43,130,68],[127,8,131,4],[127,15,131,11,"Native"],[127,21,131,17],[127,22,131,18,"sendMessage"],[127,33,131,29],[127,34,132,6],[127,38,132,10],[127,39,132,11,"namespace"],[127,48,132,20],[127,50,133,6],[127,57,133,13,"message"],[127,64,133,20],[127,69,133,25],[127,77,133,33],[127,80,133,36,"message"],[127,87,133,43],[127,90,133,46,"JSON"],[127,94,133,50],[127,95,133,51,"stringify"],[127,104,133,60],[127,105,133,61,"message"],[127,112,133,68],[127,113,134,4],[127,114,134,5],[128,6,135,2],[129,4,135,3],[130,6,135,3,"key"],[130,9,135,3],[131,6,135,3,"value"],[131,11,135,3],[132,8,135,3],[132,12,135,3,"_add"],[132,16,135,3],[132,23,135,3,"_asyncToGenerator"],[132,40,135,3],[132,41,135,3,"default"],[132,48,135,3],[132,50,54,2],[132,61,55,4,"namespace"],[132,70,55,21],[132,72,56,4,"onMessage"],[132,81,56,63],[132,83,57,26],[133,10,58,4],[133,14,58,8,"namespace"],[133,23,58,17],[133,28,58,22],[133,62,58,56],[133,64,59,6],[133,70,59,12],[133,74,59,16,"Error"],[133,79,59,21],[133,80,60,8],[133,172,61,6],[133,173,61,7],[134,10,63,4],[134,14,63,10,"channel"],[134,21,63,17],[134,30,63,26,"Native"],[134,36,63,32],[134,37,63,33,"addChannel"],[134,47,63,43],[134,48,63,44,"namespace"],[134,57,63,53],[134,58,63,54],[135,10,65,4],[135,14,65,8],[135,15,65,9,"channel"],[135,22,65,16],[135,23,65,17,"connected"],[135,32,65,26],[135,34,65,28],[136,12,66,6,"console"],[136,19,66,13],[136,20,66,14,"warn"],[136,24,66,18],[136,25,67,8],[136,36,67,19,"namespace"],[136,45,67,28],[136,230,68,6],[136,231,68,7],[137,10,69,4],[138,10,71,4],[138,17,71,11],[138,21,71,15,"CastChannel"],[138,32,71,26],[138,33,71,27,"channel"],[138,40,71,34],[138,42,71,36,"onMessage"],[138,51,71,45],[138,52,71,46],[139,8,72,2],[139,9,72,3],[140,8,72,3],[140,17,54,22,"add"],[140,20,54,25,"add"],[140,21,54,25,"_x"],[140,23,54,25],[140,25,54,25,"_x2"],[140,28,54,25],[141,10,54,25],[141,17,54,25,"_add"],[141,21,54,25],[141,22,54,25,"apply"],[141,27,54,25],[141,34,54,25,"arguments"],[141,43,54,25],[142,8,54,25],[143,8,54,25],[143,15,54,22,"add"],[143,18,54,25],[144,6,54,25],[145,4,54,25],[146,2,54,25],[147,0,54,25],[147,3]],"functionMap":{"names":["<global>","CastChannel","constructor","add","onMessage","eventEmitter.addListener$argument_1","offMessage","onUpdate","offUpdate","remove","sendMessage"],"mappings":"AAA;eCsB;ECa;GDU;EEQ;GFkB;EGO;MCK;ODE;GHE;EKK;GLG;EME;MFI;OEI;GNE;EOE;GPG;EQM;GRI;ESO;GTK;CDC"},"hasCjsExports":false},"type":"js/module"}]}