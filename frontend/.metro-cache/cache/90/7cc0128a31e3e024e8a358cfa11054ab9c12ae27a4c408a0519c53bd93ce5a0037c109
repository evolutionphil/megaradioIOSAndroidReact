{"dependencies":[{"name":"react-native-web/dist/index","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"55efhPHw3gz2FoQtoN2yI1VuhbM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.Dashboard = void 0;\n  const react_native_1 = require(_dependencyMap[0], \"react-native-web/dist/index\");\n  class Dashboard {\n    connected = false;\n    window = null;\n    onConnectCallbacks = new Set();\n    onDisconnectCallbacks = new Set();\n    stateSubscription = null;\n    buttonSubscription = null;\n    constructor(bridge, emitter) {\n      this.bridge = bridge;\n      this.emitter = emitter;\n      this.emitter.addListener('dashboardDidConnect', window => {\n        this.connected = true;\n        this.window = window;\n        this.onConnectCallbacks.forEach(callback => {\n          callback(window);\n        });\n      });\n      this.emitter.addListener('dashboardDidDisconnect', () => {\n        this.connected = false;\n        this.window = null;\n        this.onDisconnectCallbacks.forEach(callback => {\n          callback();\n        });\n      });\n      // check if already connected this will fire any 'dashboardDidDisconnect' events\n      // if a connected is already present.\n      this.bridge.checkForDashboardConnection();\n    }\n    create(config) {\n      for (const subscription of [this.stateSubscription, this.buttonSubscription]) {\n        subscription?.remove();\n      }\n      const {\n        id,\n        component,\n        shortcutButtons,\n        onStateChanged\n      } = config;\n      if (shortcutButtons.length === 0 || shortcutButtons.length > 2) {\n        throw new Error(`invalid number of dashboard shortcut buttons, got ${shortcutButtons.length} when it has to be a min of 1 and a max of 2`);\n      }\n      const dashboardConfig = {\n        shortcutButtons: []\n      };\n      if (shortcutButtons != null) {\n        for (let index = 0; index < shortcutButtons.length; index++) {\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          const {\n            onPress,\n            ...button\n          } = shortcutButtons[index];\n          dashboardConfig.shortcutButtons.push({\n            ...button,\n            index,\n            image: react_native_1.Image.resolveAssetSource(button.image),\n            launchCarplayScene: button.launchCarplayScene ?? false\n          });\n        }\n        this.buttonSubscription = this.emitter.addListener('dashboardButtonPressed', e => {\n          shortcutButtons[e.index]?.onPress?.();\n        });\n        if (onStateChanged != null) {\n          this.stateSubscription = this.emitter.addListener('dashboardStateDidChange', ({\n            isVisible\n          }) => {\n            onStateChanged(isVisible);\n          });\n        }\n      }\n      react_native_1.AppRegistry.registerComponent(id, () => component);\n      this.bridge.createDashboard(id, dashboardConfig);\n    }\n    checkForConnection() {\n      this.bridge.checkForDashboardConnection();\n    }\n    updateShortcutButtons(shortcutButtons) {\n      const config = {\n        shortcutButtons: []\n      };\n      this.buttonSubscription?.remove();\n      for (let index = 0; index < shortcutButtons.length; index++) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const {\n          onPress,\n          ...button\n        } = shortcutButtons[index];\n        config.shortcutButtons.push({\n          ...button,\n          index,\n          image: react_native_1.Image.resolveAssetSource(button.image),\n          launchCarplayScene: button.launchCarplayScene ?? false\n        });\n      }\n      this.buttonSubscription = this.emitter.addListener('dashboardButtonPressed', e => {\n        shortcutButtons[e.index]?.onPress?.();\n      });\n      this.bridge.updateDashboardShortcutButtons(config);\n    }\n    /**\n     * Fired when CarPlay is connected to the dashboard scene.\n     */\n    registerOnConnect = callback => {\n      this.onConnectCallbacks.add(callback);\n      return {\n        remove: () => this.onConnectCallbacks.delete(callback)\n      };\n    };\n    /**\n     * Fired when CarPlay is disconnected from the dashboard scene.\n     */\n    registerOnDisconnect = callback => {\n      this.onDisconnectCallbacks.add(callback);\n      return {\n        remove: () => this.onDisconnectCallbacks.delete(callback)\n      };\n    };\n  }\n  exports.Dashboard = Dashboard;\n});","lineCount":127,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"Dashboard"],[7,19,3,17],[7,22,3,20],[7,27,3,25],[7,28,3,26],[8,2,3,27],[8,8,3,27,"react_native_1"],[8,22,3,27],[8,25,3,27,"require"],[8,32,3,27],[8,33,3,27,"_dependencyMap"],[8,47,3,27],[9,2,5,0],[9,8,5,6,"Dashboard"],[9,17,5,15],[9,18,5,16],[10,4,8,4,"connected"],[10,13,8,13],[10,16,8,16],[10,21,8,21],[11,4,9,4,"window"],[11,10,9,10],[11,13,9,13],[11,17,9,17],[12,4,10,4,"onConnectCallbacks"],[12,22,10,22],[12,25,10,25],[12,29,10,29,"Set"],[12,32,10,32],[12,33,10,33],[12,34,10,34],[13,4,11,4,"onDisconnectCallbacks"],[13,25,11,25],[13,28,11,28],[13,32,11,32,"Set"],[13,35,11,35],[13,36,11,36],[13,37,11,37],[14,4,12,4,"stateSubscription"],[14,21,12,21],[14,24,12,24],[14,28,12,28],[15,4,13,4,"buttonSubscription"],[15,22,13,22],[15,25,13,25],[15,29,13,29],[16,4,14,4,"constructor"],[16,15,14,15,"constructor"],[16,16,14,16,"bridge"],[16,22,14,22],[16,24,14,24,"emitter"],[16,31,14,31],[16,33,14,33],[17,6,15,8],[17,10,15,12],[17,11,15,13,"bridge"],[17,17,15,19],[17,20,15,22,"bridge"],[17,26,15,28],[18,6,16,8],[18,10,16,12],[18,11,16,13,"emitter"],[18,18,16,20],[18,21,16,23,"emitter"],[18,28,16,30],[19,6,17,8],[19,10,17,12],[19,11,17,13,"emitter"],[19,18,17,20],[19,19,17,21,"addListener"],[19,30,17,32],[19,31,17,33],[19,52,17,54],[19,54,17,57,"window"],[19,60,17,63],[19,64,17,68],[20,8,18,12],[20,12,18,16],[20,13,18,17,"connected"],[20,22,18,26],[20,25,18,29],[20,29,18,33],[21,8,19,12],[21,12,19,16],[21,13,19,17,"window"],[21,19,19,23],[21,22,19,26,"window"],[21,28,19,32],[22,8,20,12],[22,12,20,16],[22,13,20,17,"onConnectCallbacks"],[22,31,20,35],[22,32,20,36,"forEach"],[22,39,20,43],[22,40,20,44,"callback"],[22,48,20,52],[22,52,20,56],[23,10,21,16,"callback"],[23,18,21,24],[23,19,21,25,"window"],[23,25,21,31],[23,26,21,32],[24,8,22,12],[24,9,22,13],[24,10,22,14],[25,6,23,8],[25,7,23,9],[25,8,23,10],[26,6,24,8],[26,10,24,12],[26,11,24,13,"emitter"],[26,18,24,20],[26,19,24,21,"addListener"],[26,30,24,32],[26,31,24,33],[26,55,24,57],[26,57,24,59],[26,63,24,65],[27,8,25,12],[27,12,25,16],[27,13,25,17,"connected"],[27,22,25,26],[27,25,25,29],[27,30,25,34],[28,8,26,12],[28,12,26,16],[28,13,26,17,"window"],[28,19,26,23],[28,22,26,26],[28,26,26,30],[29,8,27,12],[29,12,27,16],[29,13,27,17,"onDisconnectCallbacks"],[29,34,27,38],[29,35,27,39,"forEach"],[29,42,27,46],[29,43,27,47,"callback"],[29,51,27,55],[29,55,27,59],[30,10,28,16,"callback"],[30,18,28,24],[30,19,28,25],[30,20,28,26],[31,8,29,12],[31,9,29,13],[31,10,29,14],[32,6,30,8],[32,7,30,9],[32,8,30,10],[33,6,31,8],[34,6,32,8],[35,6,33,8],[35,10,33,12],[35,11,33,13,"bridge"],[35,17,33,19],[35,18,33,20,"checkForDashboardConnection"],[35,45,33,47],[35,46,33,48],[35,47,33,49],[36,4,34,4],[37,4,35,4,"create"],[37,10,35,10,"create"],[37,11,35,11,"config"],[37,17,35,17],[37,19,35,19],[38,6,36,8],[38,11,36,13],[38,17,36,19,"subscription"],[38,29,36,31],[38,33,36,35],[38,34,36,36],[38,38,36,40],[38,39,36,41,"stateSubscription"],[38,56,36,58],[38,58,36,60],[38,62,36,64],[38,63,36,65,"buttonSubscription"],[38,81,36,83],[38,82,36,84],[38,84,36,86],[39,8,37,12,"subscription"],[39,20,37,24],[39,22,37,26,"remove"],[39,28,37,32],[39,29,37,33],[39,30,37,34],[40,6,38,8],[41,6,39,8],[41,12,39,14],[42,8,39,16,"id"],[42,10,39,18],[43,8,39,20,"component"],[43,17,39,29],[44,8,39,31,"shortcutButtons"],[44,23,39,46],[45,8,39,48,"onStateChanged"],[46,6,39,63],[46,7,39,64],[46,10,39,67,"config"],[46,16,39,73],[47,6,40,8],[47,10,40,12,"shortcutButtons"],[47,25,40,27],[47,26,40,28,"length"],[47,32,40,34],[47,37,40,39],[47,38,40,40],[47,42,40,44,"shortcutButtons"],[47,57,40,59],[47,58,40,60,"length"],[47,64,40,66],[47,67,40,69],[47,68,40,70],[47,70,40,72],[48,8,41,12],[48,14,41,18],[48,18,41,22,"Error"],[48,23,41,27],[48,24,41,28],[48,77,41,81,"shortcutButtons"],[48,92,41,96],[48,93,41,97,"length"],[48,99,41,103],[48,145,41,149],[48,146,41,150],[49,6,42,8],[50,6,43,8],[50,12,43,14,"dashboardConfig"],[50,27,43,29],[50,30,43,32],[51,8,44,12,"shortcutButtons"],[51,23,44,27],[51,25,44,29],[52,6,45,8],[52,7,45,9],[53,6,46,8],[53,10,46,12,"shortcutButtons"],[53,25,46,27],[53,29,46,31],[53,33,46,35],[53,35,46,37],[54,8,47,12],[54,13,47,17],[54,17,47,21,"index"],[54,22,47,26],[54,25,47,29],[54,26,47,30],[54,28,47,32,"index"],[54,33,47,37],[54,36,47,40,"shortcutButtons"],[54,51,47,55],[54,52,47,56,"length"],[54,58,47,62],[54,60,47,64,"index"],[54,65,47,69],[54,67,47,71],[54,69,47,73],[55,10,48,16],[56,10,49,16],[56,16,49,22],[57,12,49,24,"onPress"],[57,19,49,31],[58,12,49,33],[58,15,49,36,"button"],[59,10,49,43],[59,11,49,44],[59,14,49,47,"shortcutButtons"],[59,29,49,62],[59,30,49,63,"index"],[59,35,49,68],[59,36,49,69],[60,10,50,16,"dashboardConfig"],[60,25,50,31],[60,26,50,32,"shortcutButtons"],[60,41,50,47],[60,42,50,48,"push"],[60,46,50,52],[60,47,50,53],[61,12,51,20],[61,15,51,23,"button"],[61,21,51,29],[62,12,52,20,"index"],[62,17,52,25],[63,12,53,20,"image"],[63,17,53,25],[63,19,53,27,"react_native_1"],[63,33,53,41],[63,34,53,42,"Image"],[63,39,53,47],[63,40,53,48,"resolveAssetSource"],[63,58,53,66],[63,59,53,67,"button"],[63,65,53,73],[63,66,53,74,"image"],[63,71,53,79],[63,72,53,80],[64,12,54,20,"launchCarplayScene"],[64,30,54,38],[64,32,54,40,"button"],[64,38,54,46],[64,39,54,47,"launchCarplayScene"],[64,57,54,65],[64,61,54,69],[65,10,55,16],[65,11,55,17],[65,12,55,18],[66,8,56,12],[67,8,57,12],[67,12,57,16],[67,13,57,17,"buttonSubscription"],[67,31,57,35],[67,34,57,38],[67,38,57,42],[67,39,57,43,"emitter"],[67,46,57,50],[67,47,57,51,"addListener"],[67,58,57,62],[67,59,57,63],[67,83,57,87],[67,85,57,89,"e"],[67,86,57,90],[67,90,57,94],[68,10,58,16,"shortcutButtons"],[68,25,58,31],[68,26,58,32,"e"],[68,27,58,33],[68,28,58,34,"index"],[68,33,58,39],[68,34,58,40],[68,36,58,42,"onPress"],[68,43,58,49],[68,46,58,52],[68,47,58,53],[69,8,59,12],[69,9,59,13],[69,10,59,14],[70,8,60,12],[70,12,60,16,"onStateChanged"],[70,26,60,30],[70,30,60,34],[70,34,60,38],[70,36,60,40],[71,10,61,16],[71,14,61,20],[71,15,61,21,"stateSubscription"],[71,32,61,38],[71,35,61,41],[71,39,61,45],[71,40,61,46,"emitter"],[71,47,61,53],[71,48,61,54,"addListener"],[71,59,61,65],[71,60,61,66],[71,85,61,91],[71,87,61,93],[71,88,61,94],[72,12,61,96,"isVisible"],[73,10,61,106],[73,11,61,107],[73,16,61,112],[74,12,62,20,"onStateChanged"],[74,26,62,34],[74,27,62,35,"isVisible"],[74,36,62,44],[74,37,62,45],[75,10,63,16],[75,11,63,17],[75,12,63,18],[76,8,64,12],[77,6,65,8],[78,6,66,8,"react_native_1"],[78,20,66,22],[78,21,66,23,"AppRegistry"],[78,32,66,34],[78,33,66,35,"registerComponent"],[78,50,66,52],[78,51,66,53,"id"],[78,53,66,55],[78,55,66,57],[78,61,66,63,"component"],[78,70,66,72],[78,71,66,73],[79,6,67,8],[79,10,67,12],[79,11,67,13,"bridge"],[79,17,67,19],[79,18,67,20,"createDashboard"],[79,33,67,35],[79,34,67,36,"id"],[79,36,67,38],[79,38,67,40,"dashboardConfig"],[79,53,67,55],[79,54,67,56],[80,4,68,4],[81,4,69,4,"checkForConnection"],[81,22,69,22,"checkForConnection"],[81,23,69,22],[81,25,69,25],[82,6,70,8],[82,10,70,12],[82,11,70,13,"bridge"],[82,17,70,19],[82,18,70,20,"checkForDashboardConnection"],[82,45,70,47],[82,46,70,48],[82,47,70,49],[83,4,71,4],[84,4,72,4,"updateShortcutButtons"],[84,25,72,25,"updateShortcutButtons"],[84,26,72,26,"shortcutButtons"],[84,41,72,41],[84,43,72,43],[85,6,73,8],[85,12,73,14,"config"],[85,18,73,20],[85,21,73,23],[86,8,74,12,"shortcutButtons"],[86,23,74,27],[86,25,74,29],[87,6,75,8],[87,7,75,9],[88,6,76,8],[88,10,76,12],[88,11,76,13,"buttonSubscription"],[88,29,76,31],[88,31,76,33,"remove"],[88,37,76,39],[88,38,76,40],[88,39,76,41],[89,6,77,8],[89,11,77,13],[89,15,77,17,"index"],[89,20,77,22],[89,23,77,25],[89,24,77,26],[89,26,77,28,"index"],[89,31,77,33],[89,34,77,36,"shortcutButtons"],[89,49,77,51],[89,50,77,52,"length"],[89,56,77,58],[89,58,77,60,"index"],[89,63,77,65],[89,65,77,67],[89,67,77,69],[90,8,78,12],[91,8,79,12],[91,14,79,18],[92,10,79,20,"onPress"],[92,17,79,27],[93,10,79,29],[93,13,79,32,"button"],[94,8,79,39],[94,9,79,40],[94,12,79,43,"shortcutButtons"],[94,27,79,58],[94,28,79,59,"index"],[94,33,79,64],[94,34,79,65],[95,8,80,12,"config"],[95,14,80,18],[95,15,80,19,"shortcutButtons"],[95,30,80,34],[95,31,80,35,"push"],[95,35,80,39],[95,36,80,40],[96,10,81,16],[96,13,81,19,"button"],[96,19,81,25],[97,10,82,16,"index"],[97,15,82,21],[98,10,83,16,"image"],[98,15,83,21],[98,17,83,23,"react_native_1"],[98,31,83,37],[98,32,83,38,"Image"],[98,37,83,43],[98,38,83,44,"resolveAssetSource"],[98,56,83,62],[98,57,83,63,"button"],[98,63,83,69],[98,64,83,70,"image"],[98,69,83,75],[98,70,83,76],[99,10,84,16,"launchCarplayScene"],[99,28,84,34],[99,30,84,36,"button"],[99,36,84,42],[99,37,84,43,"launchCarplayScene"],[99,55,84,61],[99,59,84,65],[100,8,85,12],[100,9,85,13],[100,10,85,14],[101,6,86,8],[102,6,87,8],[102,10,87,12],[102,11,87,13,"buttonSubscription"],[102,29,87,31],[102,32,87,34],[102,36,87,38],[102,37,87,39,"emitter"],[102,44,87,46],[102,45,87,47,"addListener"],[102,56,87,58],[102,57,87,59],[102,81,87,83],[102,83,87,85,"e"],[102,84,87,86],[102,88,87,90],[103,8,88,12,"shortcutButtons"],[103,23,88,27],[103,24,88,28,"e"],[103,25,88,29],[103,26,88,30,"index"],[103,31,88,35],[103,32,88,36],[103,34,88,38,"onPress"],[103,41,88,45],[103,44,88,48],[103,45,88,49],[104,6,89,8],[104,7,89,9],[104,8,89,10],[105,6,90,8],[105,10,90,12],[105,11,90,13,"bridge"],[105,17,90,19],[105,18,90,20,"updateDashboardShortcutButtons"],[105,48,90,50],[105,49,90,51,"config"],[105,55,90,57],[105,56,90,58],[106,4,91,4],[107,4,92,4],[108,0,93,0],[109,0,94,0],[110,4,95,4,"registerOnConnect"],[110,21,95,21],[110,24,95,25,"callback"],[110,32,95,33],[110,36,95,38],[111,6,96,8],[111,10,96,12],[111,11,96,13,"onConnectCallbacks"],[111,29,96,31],[111,30,96,32,"add"],[111,33,96,35],[111,34,96,36,"callback"],[111,42,96,44],[111,43,96,45],[112,6,97,8],[112,13,97,15],[113,8,98,12,"remove"],[113,14,98,18],[113,16,98,20,"remove"],[113,17,98,20],[113,22,98,26],[113,26,98,30],[113,27,98,31,"onConnectCallbacks"],[113,45,98,49],[113,46,98,50,"delete"],[113,52,98,56],[113,53,98,57,"callback"],[113,61,98,65],[114,6,99,8],[114,7,99,9],[115,4,100,4],[115,5,100,5],[116,4,101,4],[117,0,102,0],[118,0,103,0],[119,4,104,4,"registerOnDisconnect"],[119,24,104,24],[119,27,104,28,"callback"],[119,35,104,36],[119,39,104,41],[120,6,105,8],[120,10,105,12],[120,11,105,13,"onDisconnectCallbacks"],[120,32,105,34],[120,33,105,35,"add"],[120,36,105,38],[120,37,105,39,"callback"],[120,45,105,47],[120,46,105,48],[121,6,106,8],[121,13,106,15],[122,8,107,12,"remove"],[122,14,107,18],[122,16,107,20,"remove"],[122,17,107,20],[122,22,107,26],[122,26,107,30],[122,27,107,31,"onDisconnectCallbacks"],[122,48,107,52],[122,49,107,53,"delete"],[122,55,107,59],[122,56,107,60,"callback"],[122,64,107,68],[123,6,108,8],[123,7,108,9],[124,4,109,4],[124,5,109,5],[125,2,110,0],[126,2,111,0,"exports"],[126,9,111,7],[126,10,111,8,"Dashboard"],[126,19,111,17],[126,22,111,20,"Dashboard"],[126,31,111,29],[127,0,111,30],[127,3]],"functionMap":{"names":["<global>","Dashboard","constructor","emitter.addListener$argument_1","onConnectCallbacks.forEach$argument_0","onDisconnectCallbacks.forEach$argument_0","create","react_native_1.AppRegistry.registerComponent$argument_1","checkForConnection","updateShortcutButtons","registerOnConnect","remove","registerOnDisconnect"],"mappings":"AAA;ACI;ICS;wDCG;4CCG;aDE;SDC;2DCC;+CEG;aFE;SDC;KDI;IKC;yFHsB;aGE;6FHE;iBGE;yDCG,eD;KLE;IOC;KPE;IQC;qFNe;SME;KRE;wBSI;oBCG,8CD;KTE;2BWI;oBDG,iDC;KXE;CDC"},"hasCjsExports":true},"type":"js/module"}]}