{"dependencies":[{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":38,"index":91}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":92},"end":{"line":3,"column":39,"index":131}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":173},"end":{"line":5,"column":69,"index":242}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":243},"end":{"line":6,"column":37,"index":280}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"./api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":281},"end":{"line":7,"column":24,"index":305}}],"key":"FbKPDeRJ9TF3vg1eKYKz12urgic=","exportNames":["*"],"imports":1}},{"name":"../constants/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":306},"end":{"line":8,"column":49,"index":355}}],"key":"ZV0ujAFjHVGmM4aJSYIlDaiTRjE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,_d){\"use strict\";function e(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(o){var n=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,n.get?n:{enumerable:!0,get:function(){return e[o]}})}),t.default=e,t}function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return p}});var o=e(r(_d[0])),n=e(r(_d[1])),s=t(r(_d[2]));r(_d[3]);var u=t(r(_d[4])),c=r(_d[5]),l=t(r(_d[6])),d=r(_d[7]);const f='@megaradio_push_token',h='@megaradio_notifications_enabled';var p={async registerForPushNotifications(){let e=null;if(!n.isDevice)return console.log('[PushNotification] Must use physical device for Push Notifications'),null;const{status:t}=await o.getPermissionsAsync();let c=t;if('granted'!==t){const{status:e}=await o.requestPermissionsAsync();c=e}if('granted'!==c)return console.log('[PushNotification] Permission not granted'),null;try{const t=s.default.expoConfig?.extra?.eas?.projectId??s.default.easConfig?.projectId;console.log('[PushNotification] Project ID:',t);return e=(await o.getExpoPushTokenAsync({projectId:t})).data,console.log('[PushNotification] Token:',e),await u.default.setItem(f,e),await u.default.setItem(h,'true'),e}catch(e){return console.error('[PushNotification] Error getting token:',e),null}},async sendPushTokenToBackend(e){try{await l.default.post(d.API_ENDPOINTS.user.pushToken,{token:e,platform:\"web\",deviceName:n.deviceName??'Unknown'}),console.log('[PushNotification] Token sent to backend successfully')}catch(e){console.error('[PushNotification] Failed to send token to backend:',e)}},async deletePushTokenFromBackend(e){try{await l.default.delete(d.API_ENDPOINTS.user.deletePushToken,{data:{token:e}}),console.log('[PushNotification] Token deleted from backend'),await u.default.removeItem(f)}catch(e){console.error('[PushNotification] Failed to delete token from backend:',e)}},async getStoredPushToken(){try{return await u.default.getItem(f)}catch{return null}},addNotificationListener(e){const t=o.addNotificationReceivedListener(e);return()=>t.remove()},addNotificationResponseListener(e){const t=o.addNotificationResponseReceivedListener(e);return()=>t.remove()},handleNotificationNavigation(e){console.log('[PushNotification] Handling navigation with data:',e),e&&('follow'===e.type&&e.followerSlug?c.router.push({pathname:'/user-profile',params:{userId:e.followerSlug,userName:e.followerName||'User'}}):'player'===e.screen&&e.stationId?c.router.push({pathname:'/player',params:{stationId:e.stationId}}):'genre'===e.screen&&e.genreSlug?c.router.push({pathname:'/genre-detail',params:{slug:e.genreSlug}}):'user-profile'===e.screen&&(e.userId||e.userSlug)?c.router.push({pathname:'/user-profile',params:{userId:e.userId||e.userSlug}}):'notifications'===e.screen?c.router.push('/notifications'):e.url&&c.router.push(e.url))},async isNotificationsEnabled(){try{return'true'===await u.default.getItem(h)}catch{return!1}},async setNotificationsEnabled(e){try{await u.default.setItem(h,e?'true':'false')}catch(e){console.error('[PushNotification] Failed to set notifications enabled:',e)}}}});","lineCount":1,"map":[[1,378,250,0,"Object"],[1,385,250,0,"defineProperty"],[1,400,250,0,"_e"],[1,403,250,0],[1,414,250,0,"enumerable"],[1,426,250,0],[1,428,250,0,"get"],[1,432,250,0],[1,450,250,0,"_default"],[1,451,250,0],[1,455,1,0],[1,459,1,0,"Notifications"],[1,461,1,0,"_interopNamespace"],[1,463,1,0,"r"],[1,465,1,0,"_d"],[1,468,1,0],[1,473,2,0,"Device"],[1,475,2,0,"_interopNamespace"],[1,477,2,0,"r"],[1,479,2,0,"_d"],[1,482,2,0],[1,487,3,0,"Constants"],[1,489,3,0,"_interopDefault"],[1,491,3,0,"r"],[1,493,3,0,"_d"],[1,496,3,0],[1,501,3,39,"r"],[1,503,3,39,"_d"],[1,506,3,39],[1,510,5,0],[1,514,5,0,"AsyncStorage"],[1,516,5,0,"_interopDefault"],[1,518,5,0,"r"],[1,520,5,0,"_d"],[1,523,5,0],[1,528,6,0,"_expoRouter"],[1,530,6,0,"r"],[1,532,6,0,"_d"],[1,535,6,0],[1,539,7,0,"api"],[1,541,7,0,"_interopDefault"],[1,543,7,0,"r"],[1,545,7,0,"_d"],[1,548,7,0],[1,553,8,0,"_constantsApi"],[1,555,8,0,"r"],[1,557,8,0,"_d"],[1,560,8,0],[1,564,10,0],[1,570,10,6,"PUSH_TOKEN_KEY"],[1,572,10,23],[1,596,11,6,"NOTIFICATIONS_ENABLED_KEY"],[1,598,11,34],[1,633,250,0],[1,637,250,0,"_default"],[1,639,36,57],[1,640,41,2],[1,674,41,8,"registerForPushNotifications"],[1,677,42,4],[1,681,42,8,"token"],[1,683,42,31],[1,688,45,4],[1,692,45,9,"Device"],[1,694,45,16,"isDevice"],[1,703,47,6],[1,710,46,6,"console"],[1,718,46,14,"log"],[1,722,46,18],[1,792,47,13],[1,797,51,4],[1,803,51,12,"status"],[1,810,51,20,"existingStatus"],[1,819,51,45,"Notifications"],[1,821,51,59,"getPermissionsAsync"],[1,843,52,4],[1,847,52,8,"finalStatus"],[1,849,52,22,"existingStatus"],[1,851,55,4],[1,854,55,27],[1,866,55,8,"existingStatus"],[1,868,55,38],[1,869,56,6],[1,875,56,12,"status"],[1,882,56,14,"status"],[1,891,56,31,"Notifications"],[1,893,56,45,"requestPermissionsAsync"],[1,919,57,6,"finalStatus"],[1,921,57,20,"status"],[1,922,58,4],[1,923,60,4],[1,926,60,24],[1,938,60,8,"finalStatus"],[1,940,62,6],[1,947,61,6,"console"],[1,955,61,14,"log"],[1,959,61,18],[1,1004,62,13],[1,1009,65,4],[1,1013,67,6],[1,1019,67,12,"projectId"],[1,1021,67,24,"Constants"],[1,1023,67,33,"default"],[1,1031,67,34,"expoConfig"],[1,1043,67,46,"extra"],[1,1050,67,53,"eas"],[1,1055,67,58,"projectId"],[1,1066,67,71,"Constants"],[1,1068,67,80,"default"],[1,1076,67,81,"easConfig"],[1,1087,67,92,"projectId"],[1,1097,69,6,"console"],[1,1105,69,14,"log"],[1,1109,69,18],[1,1142,69,52,"projectId"],[1,1145,115,6],[1,1152,75,6,"token"],[1,1161,72,30,"Notifications"],[1,1163,72,44,"getExpoPushTokenAsync"],[1,1185,72,66],[1,1186,73,8,"projectId"],[1,1196,73,19,"projectId"],[1,1201,75,24,"data"],[1,1206,76,6,"console"],[1,1214,76,14,"log"],[1,1218,76,18],[1,1246,76,47,"token"],[1,1255,79,12,"AsyncStorage"],[1,1257,79,24,"default"],[1,1265,79,25,"setItem"],[1,1273,79,33,"PUSH_TOKEN_KEY"],[1,1275,79,49,"token"],[1,1284,80,12,"AsyncStorage"],[1,1286,80,24,"default"],[1,1294,80,25,"setItem"],[1,1302,80,33,"NOTIFICATIONS_ENABLED_KEY"],[1,1304,80,60],[1,1312,115,13,"token"],[1,1313,116,4],[1,1314,116,6],[1,1320,116,13,"error"],[1,1323,118,6],[1,1330,117,6,"console"],[1,1338,117,14,"error"],[1,1344,117,20],[1,1386,117,63,"error"],[1,1389,118,13],[1,1393,119,4],[1,1394,120,2],[1,1396,126,2],[1,1424,126,8,"sendPushTokenToBackend"],[1,1425,126,31,"token"],[1,1428,127,4],[1,1438,128,12,"api"],[1,1440,128,15,"default"],[1,1448,128,16,"post"],[1,1453,128,21,"API_ENDPOINTS"],[1,1455,128,34,"API_ENDPOINTS"],[1,1469,128,35,"user"],[1,1474,128,40,"pushToken"],[1,1484,128,51],[1,1485,129,8,"token"],[1,1493,130,8,"platform"],[1,1502,130,16],[1,1508,131,8,"deviceName"],[1,1519,131,20,"Device"],[1,1521,131,27,"deviceName"],[1,1533,131,41],[1,1545,133,6,"console"],[1,1553,133,14,"log"],[1,1557,133,18],[1,1613,134,4],[1,1614,134,6],[1,1620,134,13,"error"],[1,1623,135,6,"console"],[1,1631,135,14,"error"],[1,1637,135,20],[1,1691,135,75,"error"],[1,1693,136,4],[1,1694,137,2],[1,1696,142,2],[1,1728,142,8,"deletePushTokenFromBackend"],[1,1729,142,35,"token"],[1,1732,143,4],[1,1742,144,12,"api"],[1,1744,144,15,"default"],[1,1752,144,16,"delete"],[1,1759,144,23,"API_ENDPOINTS"],[1,1761,144,36,"API_ENDPOINTS"],[1,1775,144,37,"user"],[1,1780,144,42,"deletePushToken"],[1,1796,144,59],[1,1797,145,8,"data"],[1,1802,145,14],[1,1803,145,16,"token"],[1,1814,147,6,"console"],[1,1822,147,14,"log"],[1,1826,147,18],[1,1881,150,12,"AsyncStorage"],[1,1883,150,24,"default"],[1,1891,150,25,"removeItem"],[1,1902,150,36,"PUSH_TOKEN_KEY"],[1,1904,151,4],[1,1905,151,6],[1,1911,151,13,"error"],[1,1914,152,6,"console"],[1,1922,152,14,"error"],[1,1928,152,20],[1,1986,152,79,"error"],[1,1988,153,4],[1,1989,154,2],[1,1991,159,2],[1,2015,159,8,"getStoredPushToken"],[1,2018,160,4],[1,2022,161,6],[1,2035,161,19,"AsyncStorage"],[1,2037,161,31,"default"],[1,2045,161,32,"getItem"],[1,2053,161,40,"PUSH_TOKEN_KEY"],[1,2055,162,4],[1,2056,162,6],[1,2062,163,6],[1,2069,163,13],[1,2073,164,4],[1,2074,165,2],[1,2076,170,2,"addNotificationListener"],[1,2100,170,26,"callback"],[1,2103,171,4],[1,2109,171,10,"subscription"],[1,2111,171,25,"Notifications"],[1,2113,171,39,"addNotificationReceivedListener"],[1,2145,171,71,"callback"],[1,2148,172,4],[1,2154,172,11],[1,2158,172,17,"subscription"],[1,2160,172,30,"remove"],[1,2168,173,2],[1,2170,178,2,"addNotificationResponseListener"],[1,2202,178,34,"callback"],[1,2205,179,4],[1,2211,179,10,"subscription"],[1,2213,179,25,"Notifications"],[1,2215,179,39,"addNotificationResponseReceivedListener"],[1,2255,179,79,"callback"],[1,2258,180,4],[1,2264,180,11],[1,2268,180,17,"subscription"],[1,2270,180,30,"remove"],[1,2278,181,2],[1,2280,186,2,"handleNotificationNavigation"],[1,2309,186,31,"data"],[1,2312,187,4,"console"],[1,2320,187,12,"log"],[1,2324,187,16],[1,2376,187,69,"data"],[1,2379,189,9,"data"],[1,2383,192,22],[1,2394,192,8,"data"],[1,2396,192,13,"type"],[1,2402,192,34,"data"],[1,2404,192,39,"followerSlug"],[1,2417,193,6,"router"],[1,2419,193,12,"router"],[1,2426,193,13,"push"],[1,2431,193,18],[1,2432,194,8,"pathname"],[1,2441,194,18],[1,2457,195,8,"params"],[1,2464,195,16],[1,2465,196,10,"userId"],[1,2472,196,18,"data"],[1,2474,196,23,"followerSlug"],[1,2487,197,10,"userName"],[1,2496,197,20,"data"],[1,2498,197,25,"followerName"],[1,2512,197,41],[1,2522,204,24],[1,2533,204,8,"data"],[1,2535,204,13,"screen"],[1,2543,204,36,"data"],[1,2545,204,41,"stationId"],[1,2555,205,6,"router"],[1,2557,205,12,"router"],[1,2564,205,13,"push"],[1,2569,205,18],[1,2570,206,8,"pathname"],[1,2579,206,18],[1,2589,207,8,"params"],[1,2596,207,16],[1,2597,207,18,"stationId"],[1,2607,207,29,"data"],[1,2609,207,34,"stationId"],[1,2622,209,31],[1,2632,209,15,"data"],[1,2634,209,20,"screen"],[1,2642,209,42,"data"],[1,2644,209,47,"genreSlug"],[1,2654,210,6,"router"],[1,2656,210,12,"router"],[1,2663,210,13,"push"],[1,2668,210,18],[1,2669,211,8,"pathname"],[1,2678,211,18],[1,2694,212,8,"params"],[1,2701,212,16],[1,2702,212,18,"slug"],[1,2707,212,24,"data"],[1,2709,212,29,"genreSlug"],[1,2722,214,31],[1,2739,214,15,"data"],[1,2741,214,20,"screen"],[1,2750,214,50,"data"],[1,2752,214,55,"userId"],[1,2760,214,65,"data"],[1,2762,214,70,"userSlug"],[1,2772,215,6,"router"],[1,2774,215,12,"router"],[1,2781,215,13,"push"],[1,2786,215,18],[1,2787,216,8,"pathname"],[1,2796,216,18],[1,2812,217,8,"params"],[1,2819,217,16],[1,2820,217,18,"userId"],[1,2827,217,26,"data"],[1,2829,217,31,"userId"],[1,2837,217,41,"data"],[1,2839,217,46,"userSlug"],[1,2851,219,31],[1,2869,219,15,"data"],[1,2871,219,20,"screen"],[1,2878,220,6,"router"],[1,2880,220,12,"router"],[1,2887,220,13,"push"],[1,2892,220,18],[1,2910,221,15,"data"],[1,2912,221,20,"url"],[1,2917,222,6,"router"],[1,2919,222,12,"router"],[1,2926,222,13,"push"],[1,2931,222,18,"data"],[1,2933,222,23,"url"],[1,2938,224,2],[1,2940,229,2],[1,2968,229,8,"isNotificationsEnabled"],[1,2971,230,4],[1,2975,232,6],[1,2981,232,25],[1,2996,231,28,"AsyncStorage"],[1,2998,231,40,"default"],[1,3006,231,41,"getItem"],[1,3014,231,49,"NOTIFICATIONS_ENABLED_KEY"],[1,3016,233,4],[1,3017,233,6],[1,3023,234,6],[1,3030,234,13],[1,3031,235,4],[1,3032,236,2],[1,3034,241,2],[1,3063,241,8,"setNotificationsEnabled"],[1,3064,241,32,"enabled"],[1,3067,242,4],[1,3077,243,12,"AsyncStorage"],[1,3079,243,24,"default"],[1,3087,243,25,"setItem"],[1,3095,243,33,"NOTIFICATIONS_ENABLED_KEY"],[1,3097,243,60,"enabled"],[1,3099,243,70],[1,3106,243,79],[1,3114,244,4],[1,3115,244,6],[1,3121,244,13,"error"],[1,3124,245,6,"console"],[1,3132,245,14,"error"],[1,3138,245,20],[1,3196,245,79,"error"],[1,3198,246,4],[1,3199,247,2],[1,3201,250,39],[1,3204]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","registerForPushNotifications","sendPushTokenToBackend","deletePushTokenFromBackend","getStoredPushToken","addNotificationListener","<anonymous>","addNotificationResponseListener","handleNotificationNavigation","isNotificationsEnabled","setNotificationsEnabled"],"mappings":"AAA;wBCe;MDI;EEqB;GF+E;EGM;GHW;EIK;GJY;EKK;GLM;EMK;WCE,2BD;GNC;EQK;WDE,2BC;GRC;ESK;GTsC;EUK;GVO;EWK;GXM"},"hasCjsExports":false},"type":"js/module"}]}