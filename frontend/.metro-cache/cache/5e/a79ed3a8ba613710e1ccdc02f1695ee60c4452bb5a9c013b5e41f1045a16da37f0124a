{"dependencies":[{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":73,"index":73}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"../constants/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":115},"end":{"line":3,"column":48,"index":163}}],"key":"ZV0ujAFjHVGmM4aJSYIlDaiTRjE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _axios = require(_dependencyMap[0], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[1], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _constantsApi = require(_dependencyMap[2], \"../constants/api\");\n  // MegaRadio Internal API Key - unlimited, no rate limiting\n  const MEGARADIO_API_KEY = 'mr_VUzdIUHuXaagvWUC208Vzi_3lqEV1Vzw';\n\n  // For web preview, we cannot use credentials due to CORS\n  // Native apps will handle cookies differently\n  const isWeb = Platform.default.OS === 'web';\n\n  // Create axios instance with API key and cookie support\n  const api = axios.default.create({\n    baseURL: _constantsApi.API_BASE_URL,\n    timeout: 30000,\n    headers: {\n      'Content-Type': 'application/json',\n      'X-API-Key': MEGARADIO_API_KEY\n    },\n    // Only use credentials on native platforms where CORS isn't an issue\n    withCredentials: !isWeb\n  });\n\n  // Request interceptor\n  api.interceptors.request.use(config => {\n    // Ensure API key is always present\n    if (config.headers) {\n      config.headers['X-API-Key'] = MEGARADIO_API_KEY;\n    }\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n\n  // Response interceptor with retry for 429\n  api.interceptors.response.use(response => {\n    return response;\n  }, async error => {\n    const config = error.config;\n    // Retry on 429 (rate limit) - max 2 retries with delay\n    if (error.response?.status === 429 && (!config._retryCount || config._retryCount < 2)) {\n      config._retryCount = (config._retryCount || 0) + 1;\n      const delay = config._retryCount * 1500; // 1.5s, 3s\n      await new Promise(r => setTimeout(r, delay));\n      return api(config);\n    }\n    // Handle 401 unauthorized globally\n    if (error.response?.status === 401) {\n      console.log('Unauthorized - session may have expired');\n    }\n    return Promise.reject(error);\n  });\n  var _default = api;\n});","lineCount":72,"map":[[12,2,60,0,"Object"],[12,8,60,0],[12,9,60,0,"defineProperty"],[12,23,60,0],[12,24,60,0,"exports"],[12,31,60,0],[13,4,60,0,"enumerable"],[13,14,60,0],[14,4,60,0,"get"],[14,7,60,0],[14,18,60,0,"get"],[14,19,60,0],[15,6,60,0],[15,13,60,0,"_default"],[15,21,60,0],[16,4,60,0],[17,2,60,0],[18,2,1,0],[18,6,1,0,"_axios"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,1,0],[19,6,1,0,"axios"],[19,11,1,0],[19,14,1,0,"_interopDefault"],[19,29,1,0],[19,30,1,0,"_axios"],[19,36,1,0],[20,2,1,73],[20,6,1,73,"_reactNativeWebDistExportsPlatform"],[20,40,1,73],[20,43,1,73,"require"],[20,50,1,73],[20,51,1,73,"_dependencyMap"],[20,65,1,73],[21,2,1,73],[21,6,1,73,"Platform"],[21,14,1,73],[21,17,1,73,"_interopDefault"],[21,32,1,73],[21,33,1,73,"_reactNativeWebDistExportsPlatform"],[21,67,1,73],[22,2,3,0],[22,6,3,0,"_constantsApi"],[22,19,3,0],[22,22,3,0,"require"],[22,29,3,0],[22,30,3,0,"_dependencyMap"],[22,44,3,0],[23,2,5,0],[24,2,6,0],[24,8,6,6,"MEGARADIO_API_KEY"],[24,25,6,23],[24,28,6,26],[24,65,6,63],[26,2,8,0],[27,2,9,0],[28,2,10,0],[28,8,10,6,"isWeb"],[28,13,10,11],[28,16,10,14,"Platform"],[28,24,10,22],[28,25,10,22,"default"],[28,32,10,22],[28,33,10,23,"OS"],[28,35,10,25],[28,40,10,30],[28,45,10,35],[30,2,12,0],[31,2,13,0],[31,8,13,6,"api"],[31,11,13,24],[31,14,13,27,"axios"],[31,19,13,32],[31,20,13,32,"default"],[31,27,13,32],[31,28,13,33,"create"],[31,34,13,39],[31,35,13,40],[32,4,14,2,"baseURL"],[32,11,14,9],[32,13,14,11,"API_BASE_URL"],[32,26,14,23],[32,27,14,23,"API_BASE_URL"],[32,39,14,23],[33,4,15,2,"timeout"],[33,11,15,9],[33,13,15,11],[33,18,15,16],[34,4,16,2,"headers"],[34,11,16,9],[34,13,16,11],[35,6,17,4],[35,20,17,18],[35,22,17,20],[35,40,17,38],[36,6,18,4],[36,17,18,15],[36,19,18,17,"MEGARADIO_API_KEY"],[37,4,19,2],[37,5,19,3],[38,4,20,2],[39,4,21,2,"withCredentials"],[39,19,21,17],[39,21,21,19],[39,22,21,20,"isWeb"],[40,2,22,0],[40,3,22,1],[40,4,22,2],[42,2,24,0],[43,2,25,0,"api"],[43,5,25,3],[43,6,25,4,"interceptors"],[43,18,25,16],[43,19,25,17,"request"],[43,26,25,24],[43,27,25,25,"use"],[43,30,25,28],[43,31,26,3,"config"],[43,37,26,37],[43,41,26,42],[44,4,27,4],[45,4,28,4],[45,8,28,8,"config"],[45,14,28,14],[45,15,28,15,"headers"],[45,22,28,22],[45,24,28,24],[46,6,29,6,"config"],[46,12,29,12],[46,13,29,13,"headers"],[46,20,29,20],[46,21,29,21],[46,32,29,32],[46,33,29,33],[46,36,29,36,"MEGARADIO_API_KEY"],[46,53,29,53],[47,4,30,4],[48,4,31,4],[48,11,31,11,"config"],[48,17,31,17],[49,2,32,2],[49,3,32,3],[49,5,33,3,"error"],[49,10,33,8],[49,14,33,13],[50,4,34,4],[50,11,34,11,"Promise"],[50,18,34,18],[50,19,34,19,"reject"],[50,25,34,25],[50,26,34,26,"error"],[50,31,34,31],[50,32,34,32],[51,2,35,2],[51,3,36,0],[51,4,36,1],[53,2,38,0],[54,2,39,0,"api"],[54,5,39,3],[54,6,39,4,"interceptors"],[54,18,39,16],[54,19,39,17,"response"],[54,27,39,25],[54,28,39,26,"use"],[54,31,39,29],[54,32,40,3,"response"],[54,40,40,11],[54,44,40,16],[55,4,41,4],[55,11,41,11,"response"],[55,19,41,19],[56,2,42,2],[56,3,42,3],[56,5,43,2],[56,11,43,9,"error"],[56,16,43,14],[56,20,43,19],[57,4,44,4],[57,10,44,10,"config"],[57,16,44,16],[57,19,44,19,"error"],[57,24,44,24],[57,25,44,25,"config"],[57,31,44,31],[58,4,45,4],[59,4,46,4],[59,8,46,8,"error"],[59,13,46,13],[59,14,46,14,"response"],[59,22,46,22],[59,24,46,24,"status"],[59,30,46,30],[59,35,46,35],[59,38,46,38],[59,43,46,43],[59,44,46,44,"config"],[59,50,46,50],[59,51,46,51,"_retryCount"],[59,62,46,62],[59,66,46,66,"config"],[59,72,46,72],[59,73,46,73,"_retryCount"],[59,84,46,84],[59,87,46,87],[59,88,46,88],[59,89,46,89],[59,91,46,91],[60,6,47,6,"config"],[60,12,47,12],[60,13,47,13,"_retryCount"],[60,24,47,24],[60,27,47,27],[60,28,47,28,"config"],[60,34,47,34],[60,35,47,35,"_retryCount"],[60,46,47,46],[60,50,47,50],[60,51,47,51],[60,55,47,55],[60,56,47,56],[61,6,48,6],[61,12,48,12,"delay"],[61,17,48,17],[61,20,48,20,"config"],[61,26,48,26],[61,27,48,27,"_retryCount"],[61,38,48,38],[61,41,48,41],[61,45,48,45],[61,46,48,46],[61,47,48,47],[62,6,49,6],[62,12,49,12],[62,16,49,16,"Promise"],[62,23,49,23],[62,24,49,24,"r"],[62,25,49,25],[62,29,49,29,"setTimeout"],[62,39,49,39],[62,40,49,40,"r"],[62,41,49,41],[62,43,49,43,"delay"],[62,48,49,48],[62,49,49,49],[62,50,49,50],[63,6,50,6],[63,13,50,13,"api"],[63,16,50,16],[63,17,50,17,"config"],[63,23,50,23],[63,24,50,24],[64,4,51,4],[65,4,52,4],[66,4,53,4],[66,8,53,8,"error"],[66,13,53,13],[66,14,53,14,"response"],[66,22,53,22],[66,24,53,24,"status"],[66,30,53,30],[66,35,53,35],[66,38,53,38],[66,40,53,40],[67,6,54,6,"console"],[67,13,54,13],[67,14,54,14,"log"],[67,17,54,17],[67,18,54,18],[67,59,54,59],[67,60,54,60],[68,4,55,4],[69,4,56,4],[69,11,56,11,"Promise"],[69,18,56,18],[69,19,56,19,"reject"],[69,25,56,25],[69,26,56,26,"error"],[69,31,56,31],[69,32,56,32],[70,2,57,2],[70,3,58,0],[70,4,58,1],[71,2,60,0],[71,6,60,0,"_default"],[71,14,60,0],[71,17,60,15,"api"],[71,20,60,18],[72,0,60,19],[72,3]],"functionMap":{"names":["<global>","interceptors.request.use$argument_0","interceptors.request.use$argument_1","interceptors.response.use$argument_0","interceptors.response.use$argument_1","Promise$argument_0"],"mappings":"AAA;ECyB;GDM;EEC;GFE;EGK;GHE;EIC;wBCM,yBD;GJQ"},"hasCjsExports":false},"type":"js/module"}]}