{"dependencies":[{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":73,"index":73}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"../constants/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":115},"end":{"line":3,"column":48,"index":163}}],"key":"ZV0ujAFjHVGmM4aJSYIlDaiTRjE=","exportNames":["*"],"imports":1}},{"name":"../store/authStore","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":28,"column":29,"index":990},"end":{"line":28,"column":58,"index":1019}}],"key":"x4jghCEnTqsoIMgJBq6IvUNyemw=","exportNames":["*"],"imports":1,"isOptional":true}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _axios = require(_dependencyMap[0], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[1], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _constantsApi = require(_dependencyMap[2], \"../constants/api\");\n  // MegaRadio Internal API Key - unlimited, no rate limiting\n  const MEGARADIO_API_KEY = 'mr_VUzdIUHuXaagvWUC208Vzi_3lqEV1Vzw';\n\n  // For web preview, we cannot use credentials due to CORS\n  // Native apps will handle cookies differently\n  const isWeb = Platform.default.OS === 'web';\n\n  // Create axios instance with API key and cookie support\n  const api = axios.default.create({\n    baseURL: _constantsApi.API_BASE_URL,\n    timeout: 30000,\n    headers: {\n      'Content-Type': 'application/json',\n      'X-API-Key': MEGARADIO_API_KEY\n    },\n    // Only use credentials on native platforms where CORS isn't an issue\n    withCredentials: !isWeb\n  });\n\n  // Helper to get auth token (lazy import to avoid circular dependency)\n  const getAuthToken = () => {\n    try {\n      // Dynamic import of authStore to avoid circular dependency\n      const {\n        useAuthStore\n      } = require(_dependencyMap[3], \"../store/authStore\");\n      return useAuthStore.getState().token;\n    } catch {\n      return null;\n    }\n  };\n\n  // Request interceptor\n  api.interceptors.request.use(config => {\n    // Ensure API key is always present\n    if (config.headers) {\n      config.headers['X-API-Key'] = MEGARADIO_API_KEY;\n\n      // Add mobile auth token if available and not already set\n      const token = getAuthToken();\n      if (token && !config.headers['Authorization']) {\n        config.headers['Authorization'] = `Bearer ${token}`;\n      }\n    }\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n\n  // Response interceptor with retry for 429\n  api.interceptors.response.use(response => {\n    return response;\n  }, async error => {\n    const config = error.config;\n    // Retry on 429 (rate limit) - max 2 retries with delay\n    if (error.response?.status === 429 && (!config._retryCount || config._retryCount < 2)) {\n      config._retryCount = (config._retryCount || 0) + 1;\n      const delay = config._retryCount * 1500; // 1.5s, 3s\n      await new Promise(r => setTimeout(r, delay));\n      return api(config);\n    }\n    // Handle 401 unauthorized globally\n    if (error.response?.status === 401) {\n      console.log('Unauthorized - session may have expired');\n    }\n    return Promise.reject(error);\n  });\n  var _default = api;\n});","lineCount":91,"map":[[12,2,77,0,"Object"],[12,8,77,0],[12,9,77,0,"defineProperty"],[12,23,77,0],[12,24,77,0,"exports"],[12,31,77,0],[13,4,77,0,"enumerable"],[13,14,77,0],[14,4,77,0,"get"],[14,7,77,0],[14,18,77,0,"get"],[14,19,77,0],[15,6,77,0],[15,13,77,0,"_default"],[15,21,77,0],[16,4,77,0],[17,2,77,0],[18,2,1,0],[18,6,1,0,"_axios"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,1,0],[19,6,1,0,"axios"],[19,11,1,0],[19,14,1,0,"_interopDefault"],[19,29,1,0],[19,30,1,0,"_axios"],[19,36,1,0],[20,2,1,73],[20,6,1,73,"_reactNativeWebDistExportsPlatform"],[20,40,1,73],[20,43,1,73,"require"],[20,50,1,73],[20,51,1,73,"_dependencyMap"],[20,65,1,73],[21,2,1,73],[21,6,1,73,"Platform"],[21,14,1,73],[21,17,1,73,"_interopDefault"],[21,32,1,73],[21,33,1,73,"_reactNativeWebDistExportsPlatform"],[21,67,1,73],[22,2,3,0],[22,6,3,0,"_constantsApi"],[22,19,3,0],[22,22,3,0,"require"],[22,29,3,0],[22,30,3,0,"_dependencyMap"],[22,44,3,0],[23,2,5,0],[24,2,6,0],[24,8,6,6,"MEGARADIO_API_KEY"],[24,25,6,23],[24,28,6,26],[24,65,6,63],[26,2,8,0],[27,2,9,0],[28,2,10,0],[28,8,10,6,"isWeb"],[28,13,10,11],[28,16,10,14,"Platform"],[28,24,10,22],[28,25,10,22,"default"],[28,32,10,22],[28,33,10,23,"OS"],[28,35,10,25],[28,40,10,30],[28,45,10,35],[30,2,12,0],[31,2,13,0],[31,8,13,6,"api"],[31,11,13,24],[31,14,13,27,"axios"],[31,19,13,32],[31,20,13,32,"default"],[31,27,13,32],[31,28,13,33,"create"],[31,34,13,39],[31,35,13,40],[32,4,14,2,"baseURL"],[32,11,14,9],[32,13,14,11,"API_BASE_URL"],[32,26,14,23],[32,27,14,23,"API_BASE_URL"],[32,39,14,23],[33,4,15,2,"timeout"],[33,11,15,9],[33,13,15,11],[33,18,15,16],[34,4,16,2,"headers"],[34,11,16,9],[34,13,16,11],[35,6,17,4],[35,20,17,18],[35,22,17,20],[35,40,17,38],[36,6,18,4],[36,17,18,15],[36,19,18,17,"MEGARADIO_API_KEY"],[37,4,19,2],[37,5,19,3],[38,4,20,2],[39,4,21,2,"withCredentials"],[39,19,21,17],[39,21,21,19],[39,22,21,20,"isWeb"],[40,2,22,0],[40,3,22,1],[40,4,22,2],[42,2,24,0],[43,2,25,0],[43,8,25,6,"getAuthToken"],[43,20,25,18],[43,23,25,21,"getAuthToken"],[43,24,25,21],[43,29,25,42],[44,4,26,2],[44,8,26,6],[45,6,27,4],[46,6,28,4],[46,12,28,10],[47,8,28,12,"useAuthStore"],[48,6,28,25],[48,7,28,26],[48,10,28,29,"require"],[48,17,28,36],[48,18,28,36,"_dependencyMap"],[48,32,28,36],[48,57,28,57],[48,58,28,58],[49,6,29,4],[49,13,29,11,"useAuthStore"],[49,25,29,23],[49,26,29,24,"getState"],[49,34,29,32],[49,35,29,33],[49,36,29,34],[49,37,29,35,"token"],[49,42,29,40],[50,4,30,2],[50,5,30,3],[50,6,30,4],[50,12,30,10],[51,6,31,4],[51,13,31,11],[51,17,31,15],[52,4,32,2],[53,2,33,0],[53,3,33,1],[55,2,35,0],[56,2,36,0,"api"],[56,5,36,3],[56,6,36,4,"interceptors"],[56,18,36,16],[56,19,36,17,"request"],[56,26,36,24],[56,27,36,25,"use"],[56,30,36,28],[56,31,37,3,"config"],[56,37,37,37],[56,41,37,42],[57,4,38,4],[58,4,39,4],[58,8,39,8,"config"],[58,14,39,14],[58,15,39,15,"headers"],[58,22,39,22],[58,24,39,24],[59,6,40,6,"config"],[59,12,40,12],[59,13,40,13,"headers"],[59,20,40,20],[59,21,40,21],[59,32,40,32],[59,33,40,33],[59,36,40,36,"MEGARADIO_API_KEY"],[59,53,40,53],[61,6,42,6],[62,6,43,6],[62,12,43,12,"token"],[62,17,43,17],[62,20,43,20,"getAuthToken"],[62,32,43,32],[62,33,43,33],[62,34,43,34],[63,6,44,6],[63,10,44,10,"token"],[63,15,44,15],[63,19,44,19],[63,20,44,20,"config"],[63,26,44,26],[63,27,44,27,"headers"],[63,34,44,34],[63,35,44,35],[63,50,44,50],[63,51,44,51],[63,53,44,53],[64,8,45,8,"config"],[64,14,45,14],[64,15,45,15,"headers"],[64,22,45,22],[64,23,45,23],[64,38,45,38],[64,39,45,39],[64,42,45,42],[64,52,45,52,"token"],[64,57,45,57],[64,59,45,59],[65,6,46,6],[66,4,47,4],[67,4,48,4],[67,11,48,11,"config"],[67,17,48,17],[68,2,49,2],[68,3,49,3],[68,5,50,3,"error"],[68,10,50,8],[68,14,50,13],[69,4,51,4],[69,11,51,11,"Promise"],[69,18,51,18],[69,19,51,19,"reject"],[69,25,51,25],[69,26,51,26,"error"],[69,31,51,31],[69,32,51,32],[70,2,52,2],[70,3,53,0],[70,4,53,1],[72,2,55,0],[73,2,56,0,"api"],[73,5,56,3],[73,6,56,4,"interceptors"],[73,18,56,16],[73,19,56,17,"response"],[73,27,56,25],[73,28,56,26,"use"],[73,31,56,29],[73,32,57,3,"response"],[73,40,57,11],[73,44,57,16],[74,4,58,4],[74,11,58,11,"response"],[74,19,58,19],[75,2,59,2],[75,3,59,3],[75,5,60,2],[75,11,60,9,"error"],[75,16,60,14],[75,20,60,19],[76,4,61,4],[76,10,61,10,"config"],[76,16,61,16],[76,19,61,19,"error"],[76,24,61,24],[76,25,61,25,"config"],[76,31,61,31],[77,4,62,4],[78,4,63,4],[78,8,63,8,"error"],[78,13,63,13],[78,14,63,14,"response"],[78,22,63,22],[78,24,63,24,"status"],[78,30,63,30],[78,35,63,35],[78,38,63,38],[78,43,63,43],[78,44,63,44,"config"],[78,50,63,50],[78,51,63,51,"_retryCount"],[78,62,63,62],[78,66,63,66,"config"],[78,72,63,72],[78,73,63,73,"_retryCount"],[78,84,63,84],[78,87,63,87],[78,88,63,88],[78,89,63,89],[78,91,63,91],[79,6,64,6,"config"],[79,12,64,12],[79,13,64,13,"_retryCount"],[79,24,64,24],[79,27,64,27],[79,28,64,28,"config"],[79,34,64,34],[79,35,64,35,"_retryCount"],[79,46,64,46],[79,50,64,50],[79,51,64,51],[79,55,64,55],[79,56,64,56],[80,6,65,6],[80,12,65,12,"delay"],[80,17,65,17],[80,20,65,20,"config"],[80,26,65,26],[80,27,65,27,"_retryCount"],[80,38,65,38],[80,41,65,41],[80,45,65,45],[80,46,65,46],[80,47,65,47],[81,6,66,6],[81,12,66,12],[81,16,66,16,"Promise"],[81,23,66,23],[81,24,66,24,"r"],[81,25,66,25],[81,29,66,29,"setTimeout"],[81,39,66,39],[81,40,66,40,"r"],[81,41,66,41],[81,43,66,43,"delay"],[81,48,66,48],[81,49,66,49],[81,50,66,50],[82,6,67,6],[82,13,67,13,"api"],[82,16,67,16],[82,17,67,17,"config"],[82,23,67,23],[82,24,67,24],[83,4,68,4],[84,4,69,4],[85,4,70,4],[85,8,70,8,"error"],[85,13,70,13],[85,14,70,14,"response"],[85,22,70,22],[85,24,70,24,"status"],[85,30,70,30],[85,35,70,35],[85,38,70,38],[85,40,70,40],[86,6,71,6,"console"],[86,13,71,13],[86,14,71,14,"log"],[86,17,71,17],[86,18,71,18],[86,59,71,59],[86,60,71,60],[87,4,72,4],[88,4,73,4],[88,11,73,11,"Promise"],[88,18,73,18],[88,19,73,19,"reject"],[88,25,73,25],[88,26,73,26,"error"],[88,31,73,31],[88,32,73,32],[89,2,74,2],[89,3,75,0],[89,4,75,1],[90,2,77,0],[90,6,77,0,"_default"],[90,14,77,0],[90,17,77,15,"api"],[90,20,77,18],[91,0,77,19],[91,3]],"functionMap":{"names":["<global>","getAuthToken","interceptors.request.use$argument_0","interceptors.request.use$argument_1","interceptors.response.use$argument_0","interceptors.response.use$argument_1","Promise$argument_0"],"mappings":"AAA;qBCwB;CDQ;EEI;GFY;EGC;GHE;EIK;GJE;EKC;wBCM,yBD;GLQ"},"hasCjsExports":false},"type":"js/module"}]}