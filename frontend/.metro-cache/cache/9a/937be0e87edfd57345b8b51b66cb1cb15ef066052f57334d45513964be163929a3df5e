{"dependencies":[{"name":"react-native-web/dist/index","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"55efhPHw3gz2FoQtoN2yI1VuhbM=","exportNames":["*"],"imports":1}},{"name":"../CarPlay","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":18,"index":170},"end":{"line":5,"column":39,"index":191}}],"key":"RiNCvoWyZI7K4qdFELl/VaTk1+4=","exportNames":["*"],"imports":1}},{"name":"../interfaces/AndroidRenderTemplates","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":33,"index":226},"end":{"line":6,"column":80,"index":273}}],"key":"9doz68CRm7Mf+czwof+XJGQdqKA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.Template = void 0;\n  const react_native_1 = require(_dependencyMap[0], \"react-native-web/dist/index\");\n  const CarPlay_1 = require(_dependencyMap[1], \"../CarPlay\");\n  const AndroidRenderTemplates_1 = require(_dependencyMap[2], \"../interfaces/AndroidRenderTemplates\");\n  class Template {\n    get type() {\n      return 'unset';\n    }\n    listenerSubscriptions = [];\n    get eventMap() {\n      return {};\n    }\n    constructor(config) {\n      this.config = config;\n      if (config.id) {\n        this.id = config.id;\n      }\n      if (!this.id) {\n        this.id = `${this.type}-${Date.now()}-${Math.round(Math.random() * Number.MAX_SAFE_INTEGER)}`;\n      }\n      const eventMap = Object.assign({\n        barButtonPressed: 'onBarButtonPressed',\n        didAppear: 'onDidAppear',\n        didDisappear: 'onDidDisappear',\n        willAppear: 'onWillAppear',\n        willDisappear: 'onWillDisappear',\n        poppedToRoot: 'onPoppedToRoot'\n      }, this.eventMap || {});\n      Object.entries(eventMap).forEach(([eventName, callbackName]) => {\n        const subscription = CarPlay_1.CarPlay.emitter.addListener(eventName, e => {\n          // stateDidChange is fired by the scene which does not know anything about the template id but affects only MapTemplate\n          const isStateChangedEvent = eventName === 'stateDidChange';\n          if (isStateChangedEvent) {\n            e = e.isVisible;\n          }\n          const isAlertDismissedEvent = eventName === 'didDismissNavigationAlert' || eventName === 'willShowNavigationAlert';\n          const callback = (e.templateId === this.id || isStateChangedEvent || isAlertDismissedEvent) && callbackName in config ? config[callbackName] : null;\n          if (callback == null || typeof callback !== 'function') {\n            return;\n          }\n          callback(e);\n        });\n        this.listenerSubscriptions.push(subscription);\n      });\n      // all these templates call createTemplate on their own\n      const types = Object.values(AndroidRenderTemplates_1.AndroidRenderTemplates).concat(['list', 'signin', 'message']);\n      if (!types.includes(this.type)) {\n        const callbackFn = react_native_1.Platform.select({\n          android: ({\n            error\n          } = {}) => {\n            error && console.error(error);\n          }\n        });\n        CarPlay_1.CarPlay.bridge.createTemplate(this.id, this.parseConfig(Object.assign({\n          type: this.type\n        }, config)), callbackFn);\n      }\n    }\n    updateTemplate = config => {\n      this.config = this.parseConfig(Object.assign({\n        type: this.type\n      }, config));\n      CarPlay_1.CarPlay.bridge.updateTemplate(this.id, this.config);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    parseConfig(config) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      function traverse(obj) {\n        for (const key in obj) {\n          if (obj[key] != null && typeof obj[key] === 'object') {\n            traverse(obj[key]);\n          }\n          if (key === 'image') {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            obj[key] = react_native_1.Image.resolveAssetSource(obj[key]);\n          }\n        }\n      }\n      const result = JSON.parse(JSON.stringify(config));\n      traverse(result);\n      return result;\n    }\n    destroy() {\n      this.listenerSubscriptions.forEach(listener => listener.remove());\n      this.listenerSubscriptions = [];\n    }\n  }\n  exports.Template = Template;\n});","lineCount":96,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"Template"],[7,18,3,16],[7,21,3,19],[7,26,3,24],[7,27,3,25],[8,2,3,26],[8,8,3,26,"react_native_1"],[8,22,3,26],[8,25,3,26,"require"],[8,32,3,26],[8,33,3,26,"_dependencyMap"],[8,47,3,26],[9,2,5,0],[9,8,5,6,"CarPlay_1"],[9,17,5,15],[9,20,5,18,"require"],[9,27,5,25],[9,28,5,25,"_dependencyMap"],[9,42,5,25],[9,59,5,38],[9,60,5,39],[10,2,6,0],[10,8,6,6,"AndroidRenderTemplates_1"],[10,32,6,30],[10,35,6,33,"require"],[10,42,6,40],[10,43,6,40,"_dependencyMap"],[10,57,6,40],[10,100,6,79],[10,101,6,80],[11,2,7,0],[11,8,7,6,"Template"],[11,16,7,14],[11,17,7,15],[12,4,9,4],[12,8,9,8,"type"],[12,12,9,12,"type"],[12,13,9,12],[12,15,9,15],[13,6,10,8],[13,13,10,15],[13,20,10,22],[14,4,11,4],[15,4,13,4,"listenerSubscriptions"],[15,25,13,25],[15,28,13,28],[15,30,13,30],[16,4,14,4],[16,8,14,8,"eventMap"],[16,16,14,16,"eventMap"],[16,17,14,16],[16,19,14,19],[17,6,15,8],[17,13,15,15],[17,14,15,16],[17,15,15,17],[18,4,16,4],[19,4,17,4,"constructor"],[19,15,17,15,"constructor"],[19,16,17,16,"config"],[19,22,17,22],[19,24,17,24],[20,6,18,8],[20,10,18,12],[20,11,18,13,"config"],[20,17,18,19],[20,20,18,22,"config"],[20,26,18,28],[21,6,19,8],[21,10,19,12,"config"],[21,16,19,18],[21,17,19,19,"id"],[21,19,19,21],[21,21,19,23],[22,8,20,12],[22,12,20,16],[22,13,20,17,"id"],[22,15,20,19],[22,18,20,22,"config"],[22,24,20,28],[22,25,20,29,"id"],[22,27,20,31],[23,6,21,8],[24,6,22,8],[24,10,22,12],[24,11,22,13],[24,15,22,17],[24,16,22,18,"id"],[24,18,22,20],[24,20,22,22],[25,8,23,12],[25,12,23,16],[25,13,23,17,"id"],[25,15,23,19],[25,18,23,22],[25,21,23,25],[25,25,23,29],[25,26,23,30,"type"],[25,30,23,34],[25,34,23,38,"Date"],[25,38,23,42],[25,39,23,43,"now"],[25,42,23,46],[25,43,23,47],[25,44,23,48],[25,48,23,52,"Math"],[25,52,23,56],[25,53,23,57,"round"],[25,58,23,62],[25,59,23,63,"Math"],[25,63,23,67],[25,64,23,68,"random"],[25,70,23,74],[25,71,23,75],[25,72,23,76],[25,75,23,79,"Number"],[25,81,23,85],[25,82,23,86,"MAX_SAFE_INTEGER"],[25,98,23,102],[25,99,23,103],[25,101,23,105],[26,6,24,8],[27,6,25,8],[27,12,25,14,"eventMap"],[27,20,25,22],[27,23,25,22,"Object"],[27,29,25,22],[27,30,25,22,"assign"],[27,36,25,22],[28,8,26,12,"barButtonPressed"],[28,24,26,28],[28,26,26,30],[28,46,26,50],[29,8,27,12,"didAppear"],[29,17,27,21],[29,19,27,23],[29,32,27,36],[30,8,28,12,"didDisappear"],[30,20,28,24],[30,22,28,26],[30,38,28,42],[31,8,29,12,"willAppear"],[31,18,29,22],[31,20,29,24],[31,34,29,38],[32,8,30,12,"willDisappear"],[32,21,30,25],[32,23,30,27],[32,40,30,44],[33,8,31,12,"poppedToRoot"],[33,20,31,24],[33,22,31,26],[34,6,31,42],[34,9,32,16],[34,13,32,20],[34,14,32,21,"eventMap"],[34,22,32,29],[34,26,32,33],[34,27,32,34],[34,28,32,35],[34,29,33,9],[35,6,34,8,"Object"],[35,12,34,14],[35,13,34,15,"entries"],[35,20,34,22],[35,21,34,23,"eventMap"],[35,29,34,31],[35,30,34,32],[35,31,34,33,"forEach"],[35,38,34,40],[35,39,34,41],[35,40,34,42],[35,41,34,43,"eventName"],[35,50,34,52],[35,52,34,54,"callbackName"],[35,64,34,66],[35,65,34,67],[35,70,34,72],[36,8,35,12],[36,14,35,18,"subscription"],[36,26,35,30],[36,29,35,33,"CarPlay_1"],[36,38,35,42],[36,39,35,43,"CarPlay"],[36,46,35,50],[36,47,35,51,"emitter"],[36,54,35,58],[36,55,35,59,"addListener"],[36,66,35,70],[36,67,35,71,"eventName"],[36,76,35,80],[36,78,35,82,"e"],[36,79,35,83],[36,83,35,87],[37,10,36,16],[38,10,37,16],[38,16,37,22,"isStateChangedEvent"],[38,35,37,41],[38,38,37,44,"eventName"],[38,47,37,53],[38,52,37,58],[38,68,37,74],[39,10,38,16],[39,14,38,20,"isStateChangedEvent"],[39,33,38,39],[39,35,38,41],[40,12,39,20,"e"],[40,13,39,21],[40,16,39,24,"e"],[40,17,39,25],[40,18,39,26,"isVisible"],[40,27,39,35],[41,10,40,16],[42,10,41,16],[42,16,41,22,"isAlertDismissedEvent"],[42,37,41,43],[42,40,41,46,"eventName"],[42,49,41,55],[42,54,41,60],[42,81,41,87],[42,85,41,91,"eventName"],[42,94,41,100],[42,99,41,105],[42,124,41,130],[43,10,42,16],[43,16,42,22,"callback"],[43,24,42,30],[43,27,42,33],[43,28,42,34,"e"],[43,29,42,35],[43,30,42,36,"templateId"],[43,40,42,46],[43,45,42,51],[43,49,42,55],[43,50,42,56,"id"],[43,52,42,58],[43,56,42,62,"isStateChangedEvent"],[43,75,42,81],[43,79,42,85,"isAlertDismissedEvent"],[43,100,42,106],[43,105,42,111,"callbackName"],[43,117,42,123],[43,121,42,127,"config"],[43,127,42,133],[43,130,43,22,"config"],[43,136,43,28],[43,137,43,29,"callbackName"],[43,149,43,41],[43,150,43,42],[43,153,44,22],[43,157,44,26],[44,10,45,16],[44,14,45,20,"callback"],[44,22,45,28],[44,26,45,32],[44,30,45,36],[44,34,45,40],[44,41,45,47,"callback"],[44,49,45,55],[44,54,45,60],[44,64,45,70],[44,66,45,72],[45,12,46,20],[46,10,47,16],[47,10,48,16,"callback"],[47,18,48,24],[47,19,48,25,"e"],[47,20,48,26],[47,21,48,27],[48,8,49,12],[48,9,49,13],[48,10,49,14],[49,8,50,12],[49,12,50,16],[49,13,50,17,"listenerSubscriptions"],[49,34,50,38],[49,35,50,39,"push"],[49,39,50,43],[49,40,50,44,"subscription"],[49,52,50,56],[49,53,50,57],[50,6,51,8],[50,7,51,9],[50,8,51,10],[51,6,52,8],[52,6,53,8],[52,12,53,14,"types"],[52,17,53,19],[52,20,53,22,"Object"],[52,26,53,28],[52,27,53,29,"values"],[52,33,53,35],[52,34,53,36,"AndroidRenderTemplates_1"],[52,58,53,60],[52,59,53,61,"AndroidRenderTemplates"],[52,81,53,83],[52,82,53,84],[52,83,53,85,"concat"],[52,89,53,91],[52,90,53,92],[52,91,53,93],[52,97,53,99],[52,99,53,101],[52,107,53,109],[52,109,53,111],[52,118,53,120],[52,119,53,121],[52,120,53,122],[53,6,54,8],[53,10,54,12],[53,11,54,13,"types"],[53,16,54,18],[53,17,54,19,"includes"],[53,25,54,27],[53,26,54,28],[53,30,54,32],[53,31,54,33,"type"],[53,35,54,37],[53,36,54,38],[53,38,54,40],[54,8,55,12],[54,14,55,18,"callbackFn"],[54,24,55,28],[54,27,55,31,"react_native_1"],[54,41,55,45],[54,42,55,46,"Platform"],[54,50,55,54],[54,51,55,55,"select"],[54,57,55,61],[54,58,55,62],[55,10,56,16,"android"],[55,17,56,23],[55,19,56,25,"android"],[55,20,56,26],[56,12,56,28,"error"],[57,10,56,34],[57,11,56,35],[57,14,56,38],[57,15,56,39],[57,16,56,40],[57,21,56,45],[58,12,57,20,"error"],[58,17,57,25],[58,21,57,29,"console"],[58,28,57,36],[58,29,57,37,"error"],[58,34,57,42],[58,35,57,43,"error"],[58,40,57,48],[58,41,57,49],[59,10,58,16],[60,8,59,12],[60,9,59,13],[60,10,59,14],[61,8,60,12,"CarPlay_1"],[61,17,60,21],[61,18,60,22,"CarPlay"],[61,25,60,29],[61,26,60,30,"bridge"],[61,32,60,36],[61,33,60,37,"createTemplate"],[61,47,60,51],[61,48,60,52],[61,52,60,56],[61,53,60,57,"id"],[61,55,60,59],[61,57,60,61],[61,61,60,65],[61,62,60,66,"parseConfig"],[61,73,60,77],[61,74,60,77,"Object"],[61,80,60,77],[61,81,60,77,"assign"],[61,87,60,77],[62,10,60,80,"type"],[62,14,60,84],[62,16,60,86],[62,20,60,90],[62,21,60,91,"type"],[63,8,60,95],[63,11,60,100,"config"],[63,17,60,106],[63,18,60,108],[63,19,60,109],[63,21,60,111,"callbackFn"],[63,31,60,121],[63,32,60,122],[64,6,61,8],[65,4,62,4],[66,4,63,4,"updateTemplate"],[66,18,63,18],[66,21,63,22,"config"],[66,27,63,28],[66,31,63,33],[67,6,64,8],[67,10,64,12],[67,11,64,13,"config"],[67,17,64,19],[67,20,64,22],[67,24,64,26],[67,25,64,27,"parseConfig"],[67,36,64,38],[67,37,64,38,"Object"],[67,43,64,38],[67,44,64,38,"assign"],[67,50,64,38],[68,8,64,41,"type"],[68,12,64,45],[68,14,64,47],[68,18,64,51],[68,19,64,52,"type"],[69,6,64,56],[69,9,64,61,"config"],[69,15,64,67],[69,16,64,69],[69,17,64,70],[70,6,65,8,"CarPlay_1"],[70,15,65,17],[70,16,65,18,"CarPlay"],[70,23,65,25],[70,24,65,26,"bridge"],[70,30,65,32],[70,31,65,33,"updateTemplate"],[70,45,65,47],[70,46,65,48],[70,50,65,52],[70,51,65,53,"id"],[70,53,65,55],[70,55,65,57],[70,59,65,61],[70,60,65,62,"config"],[70,66,65,68],[70,67,65,69],[71,4,66,4],[71,5,66,5],[72,4,67,4],[73,4,68,4,"parseConfig"],[73,15,68,15,"parseConfig"],[73,16,68,16,"config"],[73,22,68,22],[73,24,68,24],[74,6,69,8],[75,6,70,8],[75,15,70,17,"traverse"],[75,23,70,25,"traverse"],[75,24,70,26,"obj"],[75,27,70,29],[75,29,70,31],[76,8,71,12],[76,13,71,17],[76,19,71,23,"key"],[76,22,71,26],[76,26,71,30,"obj"],[76,29,71,33],[76,31,71,35],[77,10,72,16],[77,14,72,20,"obj"],[77,17,72,23],[77,18,72,24,"key"],[77,21,72,27],[77,22,72,28],[77,26,72,32],[77,30,72,36],[77,34,72,40],[77,41,72,47,"obj"],[77,44,72,50],[77,45,72,51,"key"],[77,48,72,54],[77,49,72,55],[77,54,72,60],[77,62,72,68],[77,64,72,70],[78,12,73,20,"traverse"],[78,20,73,28],[78,21,73,29,"obj"],[78,24,73,32],[78,25,73,33,"key"],[78,28,73,36],[78,29,73,37],[78,30,73,38],[79,10,74,16],[80,10,75,16],[80,14,75,20,"key"],[80,17,75,23],[80,22,75,28],[80,29,75,35],[80,31,75,37],[81,12,76,20],[82,12,77,20,"obj"],[82,15,77,23],[82,16,77,24,"key"],[82,19,77,27],[82,20,77,28],[82,23,77,31,"react_native_1"],[82,37,77,45],[82,38,77,46,"Image"],[82,43,77,51],[82,44,77,52,"resolveAssetSource"],[82,62,77,70],[82,63,77,71,"obj"],[82,66,77,74],[82,67,77,75,"key"],[82,70,77,78],[82,71,77,79],[82,72,77,80],[83,10,78,16],[84,8,79,12],[85,6,80,8],[86,6,81,8],[86,12,81,14,"result"],[86,18,81,20],[86,21,81,23,"JSON"],[86,25,81,27],[86,26,81,28,"parse"],[86,31,81,33],[86,32,81,34,"JSON"],[86,36,81,38],[86,37,81,39,"stringify"],[86,46,81,48],[86,47,81,49,"config"],[86,53,81,55],[86,54,81,56],[86,55,81,57],[87,6,82,8,"traverse"],[87,14,82,16],[87,15,82,17,"result"],[87,21,82,23],[87,22,82,24],[88,6,83,8],[88,13,83,15,"result"],[88,19,83,21],[89,4,84,4],[90,4,85,4,"destroy"],[90,11,85,11,"destroy"],[90,12,85,11],[90,14,85,14],[91,6,86,8],[91,10,86,12],[91,11,86,13,"listenerSubscriptions"],[91,32,86,34],[91,33,86,35,"forEach"],[91,40,86,42],[91,41,86,43,"listener"],[91,49,86,51],[91,53,86,55,"listener"],[91,61,86,63],[91,62,86,64,"remove"],[91,68,86,70],[91,69,86,71],[91,70,86,72],[91,71,86,73],[92,6,87,8],[92,10,87,12],[92,11,87,13,"listenerSubscriptions"],[92,32,87,34],[92,35,87,37],[92,37,87,39],[93,4,88,4],[94,2,89,0],[95,2,90,0,"exports"],[95,9,90,7],[95,10,90,8,"Template"],[95,18,90,16],[95,21,90,19,"Template"],[95,29,90,27],[96,0,90,28],[96,3]],"functionMap":{"names":["<global>","Template","get__type","get__eventMap","constructor","Object.entries.forEach$argument_0","CarPlay_1.CarPlay.emitter.addListener$argument_1","react_native_1.Platform.select$argument_0.android","updateTemplate","parseConfig","traverse","destroy","listenerSubscriptions.forEach$argument_0"],"mappings":"AAA;ACM;ICE;KDE;IEG;KFE;IGC;yCCiB;kFCC;aDc;SDE;yBGK;iBHE;KHI;qBOC;KPG;IQE;QCE;SDU;KRI;IUC;2CCC,6BD;KVE;CDC"},"hasCjsExports":true},"type":"js/module"}]}