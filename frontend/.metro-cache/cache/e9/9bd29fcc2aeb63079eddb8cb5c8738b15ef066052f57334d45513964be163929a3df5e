{"dependencies":[{"name":"react-native-web/dist/index","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"55efhPHw3gz2FoQtoN2yI1VuhbM=","exportNames":["*"],"imports":1}},{"name":"../CarPlay","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":18,"index":170},"end":{"line":5,"column":39,"index":191}}],"key":"RiNCvoWyZI7K4qdFELl/VaTk1+4=","exportNames":["*"],"imports":1}},{"name":"../interfaces/AndroidRenderTemplates","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":33,"index":226},"end":{"line":6,"column":80,"index":273}}],"key":"9doz68CRm7Mf+czwof+XJGQdqKA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.Template = void 0;\n  const react_native_1 = require(_dependencyMap[0], \"react-native-web/dist/index\");\n  const CarPlay_1 = require(_dependencyMap[1], \"../CarPlay\");\n  const AndroidRenderTemplates_1 = require(_dependencyMap[2], \"../interfaces/AndroidRenderTemplates\");\n  class Template {\n    get type() {\n      return 'unset';\n    }\n    listenerSubscriptions = [];\n    get eventMap() {\n      return {};\n    }\n    constructor(config) {\n      this.config = config;\n      if (config.id) {\n        this.id = config.id;\n      }\n      if (!this.id) {\n        this.id = `${this.type}-${Date.now()}-${Math.round(Math.random() * Number.MAX_SAFE_INTEGER)}`;\n      }\n      const eventMap = {\n        barButtonPressed: 'onBarButtonPressed',\n        didAppear: 'onDidAppear',\n        didDisappear: 'onDidDisappear',\n        willAppear: 'onWillAppear',\n        willDisappear: 'onWillDisappear',\n        poppedToRoot: 'onPoppedToRoot',\n        ...(this.eventMap || {})\n      };\n      Object.entries(eventMap).forEach(([eventName, callbackName]) => {\n        const subscription = CarPlay_1.CarPlay.emitter.addListener(eventName, e => {\n          // stateDidChange is fired by the scene which does not know anything about the template id but affects only MapTemplate\n          const isStateChangedEvent = eventName === 'stateDidChange';\n          if (isStateChangedEvent) {\n            e = e.isVisible;\n          }\n          const isAlertDismissedEvent = eventName === 'didDismissNavigationAlert' || eventName === 'willShowNavigationAlert';\n          const callback = (e.templateId === this.id || isStateChangedEvent || isAlertDismissedEvent) && callbackName in config ? config[callbackName] : null;\n          if (callback == null || typeof callback !== 'function') {\n            return;\n          }\n          callback(e);\n        });\n        this.listenerSubscriptions.push(subscription);\n      });\n      // all these templates call createTemplate on their own\n      const types = Object.values(AndroidRenderTemplates_1.AndroidRenderTemplates).concat(['list', 'signin', 'message']);\n      if (!types.includes(this.type)) {\n        const callbackFn = react_native_1.Platform.select({\n          android: ({\n            error\n          } = {}) => {\n            error && console.error(error);\n          }\n        });\n        CarPlay_1.CarPlay.bridge.createTemplate(this.id, this.parseConfig({\n          type: this.type,\n          ...config\n        }), callbackFn);\n      }\n    }\n    updateTemplate = config => {\n      this.config = this.parseConfig({\n        type: this.type,\n        ...config\n      });\n      CarPlay_1.CarPlay.bridge.updateTemplate(this.id, this.config);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    parseConfig(config) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      function traverse(obj) {\n        for (const key in obj) {\n          if (obj[key] != null && typeof obj[key] === 'object') {\n            traverse(obj[key]);\n          }\n          if (key === 'image') {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            obj[key] = react_native_1.Image.resolveAssetSource(obj[key]);\n          }\n        }\n      }\n      const result = JSON.parse(JSON.stringify(config));\n      traverse(result);\n      return result;\n    }\n    destroy() {\n      this.listenerSubscriptions.forEach(listener => listener.remove());\n      this.listenerSubscriptions = [];\n    }\n  }\n  exports.Template = Template;\n});","lineCount":99,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"Template"],[7,18,3,16],[7,21,3,19],[7,26,3,24],[7,27,3,25],[8,2,3,26],[8,8,3,26,"react_native_1"],[8,22,3,26],[8,25,3,26,"require"],[8,32,3,26],[8,33,3,26,"_dependencyMap"],[8,47,3,26],[9,2,5,0],[9,8,5,6,"CarPlay_1"],[9,17,5,15],[9,20,5,18,"require"],[9,27,5,25],[9,28,5,25,"_dependencyMap"],[9,42,5,25],[9,59,5,38],[9,60,5,39],[10,2,6,0],[10,8,6,6,"AndroidRenderTemplates_1"],[10,32,6,30],[10,35,6,33,"require"],[10,42,6,40],[10,43,6,40,"_dependencyMap"],[10,57,6,40],[10,100,6,79],[10,101,6,80],[11,2,7,0],[11,8,7,6,"Template"],[11,16,7,14],[11,17,7,15],[12,4,9,4],[12,8,9,8,"type"],[12,12,9,12,"type"],[12,13,9,12],[12,15,9,15],[13,6,10,8],[13,13,10,15],[13,20,10,22],[14,4,11,4],[15,4,13,4,"listenerSubscriptions"],[15,25,13,25],[15,28,13,28],[15,30,13,30],[16,4,14,4],[16,8,14,8,"eventMap"],[16,16,14,16,"eventMap"],[16,17,14,16],[16,19,14,19],[17,6,15,8],[17,13,15,15],[17,14,15,16],[17,15,15,17],[18,4,16,4],[19,4,17,4,"constructor"],[19,15,17,15,"constructor"],[19,16,17,16,"config"],[19,22,17,22],[19,24,17,24],[20,6,18,8],[20,10,18,12],[20,11,18,13,"config"],[20,17,18,19],[20,20,18,22,"config"],[20,26,18,28],[21,6,19,8],[21,10,19,12,"config"],[21,16,19,18],[21,17,19,19,"id"],[21,19,19,21],[21,21,19,23],[22,8,20,12],[22,12,20,16],[22,13,20,17,"id"],[22,15,20,19],[22,18,20,22,"config"],[22,24,20,28],[22,25,20,29,"id"],[22,27,20,31],[23,6,21,8],[24,6,22,8],[24,10,22,12],[24,11,22,13],[24,15,22,17],[24,16,22,18,"id"],[24,18,22,20],[24,20,22,22],[25,8,23,12],[25,12,23,16],[25,13,23,17,"id"],[25,15,23,19],[25,18,23,22],[25,21,23,25],[25,25,23,29],[25,26,23,30,"type"],[25,30,23,34],[25,34,23,38,"Date"],[25,38,23,42],[25,39,23,43,"now"],[25,42,23,46],[25,43,23,47],[25,44,23,48],[25,48,23,52,"Math"],[25,52,23,56],[25,53,23,57,"round"],[25,58,23,62],[25,59,23,63,"Math"],[25,63,23,67],[25,64,23,68,"random"],[25,70,23,74],[25,71,23,75],[25,72,23,76],[25,75,23,79,"Number"],[25,81,23,85],[25,82,23,86,"MAX_SAFE_INTEGER"],[25,98,23,102],[25,99,23,103],[25,101,23,105],[26,6,24,8],[27,6,25,8],[27,12,25,14,"eventMap"],[27,20,25,22],[27,23,25,25],[28,8,26,12,"barButtonPressed"],[28,24,26,28],[28,26,26,30],[28,46,26,50],[29,8,27,12,"didAppear"],[29,17,27,21],[29,19,27,23],[29,32,27,36],[30,8,28,12,"didDisappear"],[30,20,28,24],[30,22,28,26],[30,38,28,42],[31,8,29,12,"willAppear"],[31,18,29,22],[31,20,29,24],[31,34,29,38],[32,8,30,12,"willDisappear"],[32,21,30,25],[32,23,30,27],[32,40,30,44],[33,8,31,12,"poppedToRoot"],[33,20,31,24],[33,22,31,26],[33,38,31,42],[34,8,32,12],[34,12,32,16],[34,16,32,20],[34,17,32,21,"eventMap"],[34,25,32,29],[34,29,32,33],[34,30,32,34],[34,31,32,35],[35,6,33,8],[35,7,33,9],[36,6,34,8,"Object"],[36,12,34,14],[36,13,34,15,"entries"],[36,20,34,22],[36,21,34,23,"eventMap"],[36,29,34,31],[36,30,34,32],[36,31,34,33,"forEach"],[36,38,34,40],[36,39,34,41],[36,40,34,42],[36,41,34,43,"eventName"],[36,50,34,52],[36,52,34,54,"callbackName"],[36,64,34,66],[36,65,34,67],[36,70,34,72],[37,8,35,12],[37,14,35,18,"subscription"],[37,26,35,30],[37,29,35,33,"CarPlay_1"],[37,38,35,42],[37,39,35,43,"CarPlay"],[37,46,35,50],[37,47,35,51,"emitter"],[37,54,35,58],[37,55,35,59,"addListener"],[37,66,35,70],[37,67,35,71,"eventName"],[37,76,35,80],[37,78,35,82,"e"],[37,79,35,83],[37,83,35,87],[38,10,36,16],[39,10,37,16],[39,16,37,22,"isStateChangedEvent"],[39,35,37,41],[39,38,37,44,"eventName"],[39,47,37,53],[39,52,37,58],[39,68,37,74],[40,10,38,16],[40,14,38,20,"isStateChangedEvent"],[40,33,38,39],[40,35,38,41],[41,12,39,20,"e"],[41,13,39,21],[41,16,39,24,"e"],[41,17,39,25],[41,18,39,26,"isVisible"],[41,27,39,35],[42,10,40,16],[43,10,41,16],[43,16,41,22,"isAlertDismissedEvent"],[43,37,41,43],[43,40,41,46,"eventName"],[43,49,41,55],[43,54,41,60],[43,81,41,87],[43,85,41,91,"eventName"],[43,94,41,100],[43,99,41,105],[43,124,41,130],[44,10,42,16],[44,16,42,22,"callback"],[44,24,42,30],[44,27,42,33],[44,28,42,34,"e"],[44,29,42,35],[44,30,42,36,"templateId"],[44,40,42,46],[44,45,42,51],[44,49,42,55],[44,50,42,56,"id"],[44,52,42,58],[44,56,42,62,"isStateChangedEvent"],[44,75,42,81],[44,79,42,85,"isAlertDismissedEvent"],[44,100,42,106],[44,105,42,111,"callbackName"],[44,117,42,123],[44,121,42,127,"config"],[44,127,42,133],[44,130,43,22,"config"],[44,136,43,28],[44,137,43,29,"callbackName"],[44,149,43,41],[44,150,43,42],[44,153,44,22],[44,157,44,26],[45,10,45,16],[45,14,45,20,"callback"],[45,22,45,28],[45,26,45,32],[45,30,45,36],[45,34,45,40],[45,41,45,47,"callback"],[45,49,45,55],[45,54,45,60],[45,64,45,70],[45,66,45,72],[46,12,46,20],[47,10,47,16],[48,10,48,16,"callback"],[48,18,48,24],[48,19,48,25,"e"],[48,20,48,26],[48,21,48,27],[49,8,49,12],[49,9,49,13],[49,10,49,14],[50,8,50,12],[50,12,50,16],[50,13,50,17,"listenerSubscriptions"],[50,34,50,38],[50,35,50,39,"push"],[50,39,50,43],[50,40,50,44,"subscription"],[50,52,50,56],[50,53,50,57],[51,6,51,8],[51,7,51,9],[51,8,51,10],[52,6,52,8],[53,6,53,8],[53,12,53,14,"types"],[53,17,53,19],[53,20,53,22,"Object"],[53,26,53,28],[53,27,53,29,"values"],[53,33,53,35],[53,34,53,36,"AndroidRenderTemplates_1"],[53,58,53,60],[53,59,53,61,"AndroidRenderTemplates"],[53,81,53,83],[53,82,53,84],[53,83,53,85,"concat"],[53,89,53,91],[53,90,53,92],[53,91,53,93],[53,97,53,99],[53,99,53,101],[53,107,53,109],[53,109,53,111],[53,118,53,120],[53,119,53,121],[53,120,53,122],[54,6,54,8],[54,10,54,12],[54,11,54,13,"types"],[54,16,54,18],[54,17,54,19,"includes"],[54,25,54,27],[54,26,54,28],[54,30,54,32],[54,31,54,33,"type"],[54,35,54,37],[54,36,54,38],[54,38,54,40],[55,8,55,12],[55,14,55,18,"callbackFn"],[55,24,55,28],[55,27,55,31,"react_native_1"],[55,41,55,45],[55,42,55,46,"Platform"],[55,50,55,54],[55,51,55,55,"select"],[55,57,55,61],[55,58,55,62],[56,10,56,16,"android"],[56,17,56,23],[56,19,56,25,"android"],[56,20,56,26],[57,12,56,28,"error"],[58,10,56,34],[58,11,56,35],[58,14,56,38],[58,15,56,39],[58,16,56,40],[58,21,56,45],[59,12,57,20,"error"],[59,17,57,25],[59,21,57,29,"console"],[59,28,57,36],[59,29,57,37,"error"],[59,34,57,42],[59,35,57,43,"error"],[59,40,57,48],[59,41,57,49],[60,10,58,16],[61,8,59,12],[61,9,59,13],[61,10,59,14],[62,8,60,12,"CarPlay_1"],[62,17,60,21],[62,18,60,22,"CarPlay"],[62,25,60,29],[62,26,60,30,"bridge"],[62,32,60,36],[62,33,60,37,"createTemplate"],[62,47,60,51],[62,48,60,52],[62,52,60,56],[62,53,60,57,"id"],[62,55,60,59],[62,57,60,61],[62,61,60,65],[62,62,60,66,"parseConfig"],[62,73,60,77],[62,74,60,78],[63,10,60,80,"type"],[63,14,60,84],[63,16,60,86],[63,20,60,90],[63,21,60,91,"type"],[63,25,60,95],[64,10,60,97],[64,13,60,100,"config"],[65,8,60,107],[65,9,60,108],[65,10,60,109],[65,12,60,111,"callbackFn"],[65,22,60,121],[65,23,60,122],[66,6,61,8],[67,4,62,4],[68,4,63,4,"updateTemplate"],[68,18,63,18],[68,21,63,22,"config"],[68,27,63,28],[68,31,63,33],[69,6,64,8],[69,10,64,12],[69,11,64,13,"config"],[69,17,64,19],[69,20,64,22],[69,24,64,26],[69,25,64,27,"parseConfig"],[69,36,64,38],[69,37,64,39],[70,8,64,41,"type"],[70,12,64,45],[70,14,64,47],[70,18,64,51],[70,19,64,52,"type"],[70,23,64,56],[71,8,64,58],[71,11,64,61,"config"],[72,6,64,68],[72,7,64,69],[72,8,64,70],[73,6,65,8,"CarPlay_1"],[73,15,65,17],[73,16,65,18,"CarPlay"],[73,23,65,25],[73,24,65,26,"bridge"],[73,30,65,32],[73,31,65,33,"updateTemplate"],[73,45,65,47],[73,46,65,48],[73,50,65,52],[73,51,65,53,"id"],[73,53,65,55],[73,55,65,57],[73,59,65,61],[73,60,65,62,"config"],[73,66,65,68],[73,67,65,69],[74,4,66,4],[74,5,66,5],[75,4,67,4],[76,4,68,4,"parseConfig"],[76,15,68,15,"parseConfig"],[76,16,68,16,"config"],[76,22,68,22],[76,24,68,24],[77,6,69,8],[78,6,70,8],[78,15,70,17,"traverse"],[78,23,70,25,"traverse"],[78,24,70,26,"obj"],[78,27,70,29],[78,29,70,31],[79,8,71,12],[79,13,71,17],[79,19,71,23,"key"],[79,22,71,26],[79,26,71,30,"obj"],[79,29,71,33],[79,31,71,35],[80,10,72,16],[80,14,72,20,"obj"],[80,17,72,23],[80,18,72,24,"key"],[80,21,72,27],[80,22,72,28],[80,26,72,32],[80,30,72,36],[80,34,72,40],[80,41,72,47,"obj"],[80,44,72,50],[80,45,72,51,"key"],[80,48,72,54],[80,49,72,55],[80,54,72,60],[80,62,72,68],[80,64,72,70],[81,12,73,20,"traverse"],[81,20,73,28],[81,21,73,29,"obj"],[81,24,73,32],[81,25,73,33,"key"],[81,28,73,36],[81,29,73,37],[81,30,73,38],[82,10,74,16],[83,10,75,16],[83,14,75,20,"key"],[83,17,75,23],[83,22,75,28],[83,29,75,35],[83,31,75,37],[84,12,76,20],[85,12,77,20,"obj"],[85,15,77,23],[85,16,77,24,"key"],[85,19,77,27],[85,20,77,28],[85,23,77,31,"react_native_1"],[85,37,77,45],[85,38,77,46,"Image"],[85,43,77,51],[85,44,77,52,"resolveAssetSource"],[85,62,77,70],[85,63,77,71,"obj"],[85,66,77,74],[85,67,77,75,"key"],[85,70,77,78],[85,71,77,79],[85,72,77,80],[86,10,78,16],[87,8,79,12],[88,6,80,8],[89,6,81,8],[89,12,81,14,"result"],[89,18,81,20],[89,21,81,23,"JSON"],[89,25,81,27],[89,26,81,28,"parse"],[89,31,81,33],[89,32,81,34,"JSON"],[89,36,81,38],[89,37,81,39,"stringify"],[89,46,81,48],[89,47,81,49,"config"],[89,53,81,55],[89,54,81,56],[89,55,81,57],[90,6,82,8,"traverse"],[90,14,82,16],[90,15,82,17,"result"],[90,21,82,23],[90,22,82,24],[91,6,83,8],[91,13,83,15,"result"],[91,19,83,21],[92,4,84,4],[93,4,85,4,"destroy"],[93,11,85,11,"destroy"],[93,12,85,11],[93,14,85,14],[94,6,86,8],[94,10,86,12],[94,11,86,13,"listenerSubscriptions"],[94,32,86,34],[94,33,86,35,"forEach"],[94,40,86,42],[94,41,86,43,"listener"],[94,49,86,51],[94,53,86,55,"listener"],[94,61,86,63],[94,62,86,64,"remove"],[94,68,86,70],[94,69,86,71],[94,70,86,72],[94,71,86,73],[95,6,87,8],[95,10,87,12],[95,11,87,13,"listenerSubscriptions"],[95,32,87,34],[95,35,87,37],[95,37,87,39],[96,4,88,4],[97,2,89,0],[98,2,90,0,"exports"],[98,9,90,7],[98,10,90,8,"Template"],[98,18,90,16],[98,21,90,19,"Template"],[98,29,90,27],[99,0,90,28],[99,3]],"functionMap":{"names":["<global>","Template","get__type","get__eventMap","constructor","Object.entries.forEach$argument_0","CarPlay_1.CarPlay.emitter.addListener$argument_1","react_native_1.Platform.select$argument_0.android","updateTemplate","parseConfig","traverse","destroy","listenerSubscriptions.forEach$argument_0"],"mappings":"AAA;ACM;ICE;KDE;IEG;KFE;IGC;yCCiB;kFCC;aDc;SDE;yBGK;iBHE;KHI;qBOC;KPG;IQE;QCE;SDU;KRI;IUC;2CCC,6BD;KVE;CDC"},"hasCjsExports":true},"type":"js/module"}]}