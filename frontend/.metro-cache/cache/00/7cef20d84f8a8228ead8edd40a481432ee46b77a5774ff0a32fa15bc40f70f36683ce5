{"dependencies":[{"name":"./Player","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":34,"index":34}}],"key":"2uojkyF8VVkbvR+eWg1R2nA9H4w=","exportNames":["*"],"imports":1}},{"name":"./RepeatMode","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":35},"end":{"line":2,"column":42,"index":77}}],"key":"kPr9IueacPlV51+YHc1JZLGwFhU=","exportNames":["*"],"imports":1}},{"name":"../../src","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":78},"end":{"line":3,"column":34,"index":112}}],"key":"V5qSWYGokvkXleAWO+K4UWT3EEQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,\"PlaylistPlayer\",{enumerable:!0,get:function(){return o}});var t=r(d[0]),s=r(d[1]),n=r(d[2]);class o extends t.Player{playlist=[];repeatMode=s.RepeatMode.Off;async onStateUpdate(t){super.onStateUpdate(t),t===n.State.Ended&&await this.onTrackEnded()}async onTrackEnded(){switch(this.repeatMode){case s.RepeatMode.Track:void 0!==this.currentIndex&&await this.goToIndex(this.currentIndex);break;case s.RepeatMode.Playlist:this.currentIndex===this.playlist.length-1?await this.goToIndex(0):await this.skipToNext();break;default:try{await this.skipToNext()}catch(t){if('playlist_exhausted'!==t.message)throw t;this.onPlaylistEnded()}}}onPlaylistEnded(){}get currentIndex(){return this._currentIndex}set currentIndex(t){this.lastIndex=this.currentIndex,this._currentIndex=t}async goToIndex(t,s){const n=this.playlist[t];if(!n)throw new Error('playlist_exhausted');this.currentIndex!==t&&(this.currentIndex=t,await this.load(n)),s&&this.seekTo(s),this.playWhenReady&&await this.play()}async add(t,s){-1!==s&&void 0!==s?this.playlist.splice(s,0,...t):this.playlist.push(...t),void 0===this.currentIndex&&await this.goToIndex(0)}async skip(t,s){if(void 0===this.playlist[t])throw new Error('index out of bounds');await this.goToIndex(t,s)}async skipToNext(t){if(void 0===this.currentIndex)return;const s=this.currentIndex+1;await this.goToIndex(s,t)}async skipToPrevious(t){if(void 0===this.currentIndex)return;const s=this.currentIndex-1;await this.goToIndex(s,t)}getTrack(t){return this.playlist[t]||null}setRepeatMode(t){this.repeatMode=t}getRepeatMode(){return this.repeatMode}async remove(t){const s=t.reduce((t,s)=>(t[s]=!0,t),{});let n=!1;if(this.playlist=this.playlist.filter((t,o)=>{const h=!s[o];return h||o!==this.currentIndex||(n=!0),h}),void 0===this.currentIndex)return;const o=this.playlist.length>0;n&&o?await this.goToIndex(this.currentIndex%this.playlist.length):n&&await this.stop()}async stop(){await super.stop(),this.currentIndex=void 0}async reset(){await this.stop(),this.playlist=[]}async removeUpcomingTracks(){void 0!==this.currentIndex&&(this.playlist=this.playlist.slice(0,this.currentIndex+1))}async move(t,s){if(!this.playlist[t])throw new Error('index out of bounds');if(this.currentIndex===t)throw new Error('you cannot move the currently playing track');if(this.currentIndex===s)throw new Error('you cannot replace the currently playing track');let n;this.currentIndex&&(t<this.currentIndex&&s>this.currentIndex?n=-1:t>this.currentIndex&&s<this.currentIndex&&(n=1));const o=this.playlist[t];this.playlist.splice(t,1),this.playlist.splice(s,0,o),this.currentIndex&&n&&(this.currentIndex=this.currentIndex+n)}updateMetadataForTrack(t,s){}clearNowPlayingMetadata(){}updateNowPlayingMetadata(t){}}});","lineCount":1,"map":[[1,90,4,0,"Object"],[1,97,4,0,"defineProperty"],[1,112,4,0,"e"],[1,114,4,0],[1,132,4,0,"enumerable"],[1,144,4,0],[1,146,4,0,"get"],[1,150,4,0],[1,168,4,0,"PlaylistPlayer"],[1,169,4,0],[1,173,1,0],[1,177,1,0,"_Player"],[1,179,1,0,"r"],[1,181,1,0,"d"],[1,183,1,0],[1,187,2,0,"_RepeatMode"],[1,189,2,0,"r"],[1,191,2,0,"d"],[1,193,2,0],[1,197,3,0,"_src"],[1,199,3,0,"r"],[1,201,3,0,"d"],[1,203,3,0],[1,207,4,7],[1,213,4,13,"PlaylistPlayer"],[1,223,4,36,"Player"],[1,225,4,42,"Player"],[1,232,6,4,"playlist"],[1,241,6,15],[1,244,9,4,"repeatMode"],[1,255,9,17,"RepeatMode"],[1,257,9,27,"RepeatMode"],[1,268,9,28,"Off"],[1,272,10,4],[1,291,10,10,"onStateUpdate"],[1,292,10,24,"state"],[1,295,11,8,"super"],[1,301,11,14,"onStateUpdate"],[1,315,11,28,"state"],[1,318,12,12,"state"],[1,322,12,22,"State"],[1,324,12,27,"State"],[1,330,12,28,"Ended"],[1,343,13,18,"this"],[1,348,13,23,"onTrackEnded"],[1,362,15,4],[1,363,16,4],[1,381,16,10,"onTrackEnded"],[1,384,17,8],[1,391,17,16,"this"],[1,396,17,21,"repeatMode"],[1,408,18,12],[1,413,18,17,"RepeatMode"],[1,415,18,27,"RepeatMode"],[1,426,18,28,"Track"],[1,437,19,42,"undefined"],[1,441,19,20,"this"],[1,446,19,25,"currentIndex"],[1,466,20,26,"this"],[1,471,20,31,"goToIndex"],[1,481,20,41,"this"],[1,486,20,46,"currentIndex"],[1,500,22,16],[1,506,23,12],[1,511,23,17,"RepeatMode"],[1,513,23,27,"RepeatMode"],[1,524,23,28,"Playlist"],[1,533,24,20,"this"],[1,538,24,25,"currentIndex"],[1,553,24,42,"this"],[1,558,24,47,"playlist"],[1,567,24,56,"length"],[1,574,24,65],[1,582,25,26,"this"],[1,587,25,31,"goToIndex"],[1,597,25,41],[1,606,28,26,"this"],[1,611,28,31,"skipToNext"],[1,624,30,16],[1,630,31,12],[1,638,32,16],[1,648,33,26,"this"],[1,653,33,31,"skipToNext"],[1,665,34,16],[1,666,35,16],[1,672,35,23,"err"],[1,675,36,20],[1,678,36,40],[1,701,36,24,"err"],[1,703,36,28,"message"],[1,711,37,24],[1,717,37,30,"err"],[1,719,39,20,"this"],[1,724,39,25,"onPlaylistEnded"],[1,741,40,16],[1,743,43,4],[1,744,45,4,"onPlaylistEnded"],[1,762,45,24],[1,763,46,4],[1,779,46,8,"currentIndex"],[1,782,47,8],[1,789,47,15,"this"],[1,794,47,20,"_currentIndex"],[1,807,48,4],[1,808,49,4],[1,824,49,8,"currentIndex"],[1,825,49,21,"current"],[1,828,50,8,"this"],[1,833,50,13,"lastIndex"],[1,843,50,25,"this"],[1,848,50,30,"currentIndex"],[1,861,51,8,"this"],[1,866,51,13,"_currentIndex"],[1,880,51,29,"current"],[1,881,52,4],[1,882,53,4],[1,897,53,10,"goToIndex"],[1,898,53,20,"index"],[1,900,53,27,"initialPosition"],[1,903,54,8],[1,909,54,14,"track"],[1,911,54,22,"this"],[1,916,54,27,"playlist"],[1,925,54,36,"index"],[1,928,55,8],[1,932,55,13,"track"],[1,934,56,12],[1,940,56,18],[1,944,56,22,"Error"],[1,950,56,28],[1,972,58,12,"this"],[1,977,58,17,"currentIndex"],[1,992,58,34,"index"],[1,996,59,12,"this"],[1,1001,59,17,"currentIndex"],[1,1014,59,32,"index"],[1,1022,60,18,"this"],[1,1027,60,23,"load"],[1,1032,60,28,"track"],[1,1036,62,12,"initialPosition"],[1,1039,63,12,"this"],[1,1044,63,17,"seekTo"],[1,1051,63,24,"initialPosition"],[1,1054,65,12,"this"],[1,1059,65,17,"playWhenReady"],[1,1080,66,18,"this"],[1,1085,66,23,"play"],[1,1091,68,4],[1,1092,69,4],[1,1101,69,10,"add"],[1,1102,69,14,"tracks"],[1,1104,69,22,"insertBeforeIndex"],[1,1108,70,29],[1,1112,70,12,"insertBeforeIndex"],[1,1120,70,62,"undefined"],[1,1124,70,40,"insertBeforeIndex"],[1,1126,71,12,"this"],[1,1131,71,17,"playlist"],[1,1140,71,26,"splice"],[1,1147,71,33,"insertBeforeIndex"],[1,1149,71,52],[1,1154,71,58,"tracks"],[1,1157,74,12,"this"],[1,1162,74,17,"playlist"],[1,1171,74,26,"push"],[1,1179,74,34,"tracks"],[1,1187,76,34,"undefined"],[1,1191,76,12,"this"],[1,1196,76,17,"currentIndex"],[1,1216,77,18,"this"],[1,1221,77,23,"goToIndex"],[1,1231,77,33],[1,1233,79,4],[1,1234,80,4],[1,1244,80,10,"skip"],[1,1245,80,15,"index"],[1,1247,80,22,"initialPosition"],[1,1250,82,8],[1,1258,82,22,"undefined"],[1,1262,81,22,"this"],[1,1267,81,27,"playlist"],[1,1276,81,36,"index"],[1,1279,83,12],[1,1285,83,18],[1,1289,83,22,"Error"],[1,1295,83,28],[1,1324,85,14,"this"],[1,1329,85,19,"goToIndex"],[1,1339,85,29,"index"],[1,1341,85,36,"initialPosition"],[1,1343,86,4],[1,1344,87,4],[1,1360,87,10,"skipToNext"],[1,1361,87,21,"initialPosition"],[1,1364,88,8],[1,1372,88,34,"undefined"],[1,1376,88,12,"this"],[1,1381,88,17,"currentIndex"],[1,1394,89,12],[1,1401,90,8],[1,1407,90,14,"index"],[1,1409,90,22,"this"],[1,1414,90,27,"currentIndex"],[1,1427,90,42],[1,1435,91,14,"this"],[1,1440,91,19,"goToIndex"],[1,1450,91,29,"index"],[1,1452,91,36,"initialPosition"],[1,1454,92,4],[1,1455,93,4],[1,1475,93,10,"skipToPrevious"],[1,1476,93,25,"initialPosition"],[1,1479,94,8],[1,1487,94,34,"undefined"],[1,1491,94,12,"this"],[1,1496,94,17,"currentIndex"],[1,1509,95,12],[1,1516,96,8],[1,1522,96,14,"index"],[1,1524,96,22,"this"],[1,1529,96,27,"currentIndex"],[1,1542,96,42],[1,1550,97,14,"this"],[1,1555,97,19,"goToIndex"],[1,1565,97,29,"index"],[1,1567,97,36,"initialPosition"],[1,1569,98,4],[1,1570,99,4,"getTrack"],[1,1579,99,13,"index"],[1,1582,101,8],[1,1589,100,22,"this"],[1,1594,100,27,"playlist"],[1,1603,100,36,"index"],[1,1607,101,24],[1,1611,102,4],[1,1612,103,4,"setRepeatMode"],[1,1626,103,18,"mode"],[1,1629,104,8,"this"],[1,1634,104,13,"repeatMode"],[1,1645,104,26,"mode"],[1,1646,105,4],[1,1647,106,4,"getRepeatMode"],[1,1663,107,8],[1,1670,107,15,"this"],[1,1675,107,20,"repeatMode"],[1,1685,108,4],[1,1686,109,4],[1,1698,109,10,"remove"],[1,1699,109,17,"indexes"],[1,1702,110,8],[1,1708,110,14,"idxMap"],[1,1710,110,23,"indexes"],[1,1712,110,31,"reduce"],[1,1719,110,38],[1,1720,110,39,"acc"],[1,1722,110,44,"elem"],[1,1727,111,12,"acc"],[1,1729,111,16,"elem"],[1,1733,111,24],[1,1735,112,19,"acc"],[1,1738,113,11],[1,1739,113,12],[1,1742,114,8],[1,1746,114,12,"isCurrentRemoved"],[1,1749,114,31],[1,1751,122,8],[1,1754,115,8,"this"],[1,1759,115,13,"playlist"],[1,1768,115,24,"this"],[1,1773,115,29,"playlist"],[1,1782,115,38,"filter"],[1,1789,115,45],[1,1790,115,46,"_track"],[1,1792,115,54,"idx"],[1,1797,116,12],[1,1803,116,18,"keep"],[1,1806,116,26,"idxMap"],[1,1808,116,33,"idx"],[1,1811,120,12],[1,1818,117,17,"keep"],[1,1821,117,25,"idx"],[1,1825,117,33,"this"],[1,1830,117,38,"currentIndex"],[1,1845,118,16,"isCurrentRemoved"],[1,1848,118,35],[1,1851,120,19,"keep"],[1,1860,122,34,"undefined"],[1,1864,122,12,"this"],[1,1869,122,17,"currentIndex"],[1,1882,123,12],[1,1889,125,8],[1,1895,125,14,"hasItems"],[1,1897,125,25,"this"],[1,1902,125,30,"playlist"],[1,1911,125,39,"length"],[1,1918,125,48],[1,1920,126,12,"isCurrentRemoved"],[1,1923,126,32,"hasItems"],[1,1931,127,18,"this"],[1,1936,127,23,"goToIndex"],[1,1946,127,33,"this"],[1,1951,127,38,"currentIndex"],[1,1964,127,53,"this"],[1,1969,127,58,"playlist"],[1,1978,127,67,"length"],[1,1986,129,17,"isCurrentRemoved"],[1,1995,130,18,"this"],[1,2000,130,23,"stop"],[1,2006,132,4],[1,2007,133,4],[1,2017,133,10,"stop"],[1,2026,134,14,"super"],[1,2032,134,20,"stop"],[1,2039,135,8,"this"],[1,2044,135,13,"currentIndex"],[1,2062,135,28,"undefined"],[1,2063,136,4],[1,2064,137,4],[1,2075,137,10,"reset"],[1,2084,138,14,"this"],[1,2089,138,19,"stop"],[1,2096,139,8,"this"],[1,2101,139,13,"playlist"],[1,2110,139,24],[1,2112,140,4],[1,2113,141,4],[1,2139,141,10,"removeUpcomingTracks"],[1,2147,142,34,"undefined"],[1,2151,142,12,"this"],[1,2156,142,17,"currentIndex"],[1,2171,144,8,"this"],[1,2176,144,13,"playlist"],[1,2185,144,24,"this"],[1,2190,144,29,"playlist"],[1,2199,144,38,"slice"],[1,2205,144,44],[1,2207,144,47,"this"],[1,2212,144,52,"currentIndex"],[1,2225,144,67],[1,2228,145,4],[1,2229,146,4],[1,2239,146,10,"move"],[1,2240,146,15,"fromIndex"],[1,2242,146,26,"toIndex"],[1,2245,147,8],[1,2249,147,13,"this"],[1,2254,147,18,"playlist"],[1,2263,147,27,"fromIndex"],[1,2266,148,12],[1,2272,148,18],[1,2276,148,22,"Error"],[1,2282,148,28],[1,2305,150,8],[1,2308,150,12,"this"],[1,2313,150,17,"currentIndex"],[1,2328,150,34,"fromIndex"],[1,2330,151,12],[1,2336,151,18],[1,2340,151,22,"Error"],[1,2346,151,28],[1,2393,153,8],[1,2396,153,12,"this"],[1,2401,153,17,"currentIndex"],[1,2416,153,34,"toIndex"],[1,2418,154,12],[1,2424,154,18],[1,2428,154,22,"Error"],[1,2434,154,28],[1,2484,157,8],[1,2488,157,12,"shift"],[1,2490,158,12,"this"],[1,2495,158,17,"currentIndex"],[1,2510,159,16,"fromIndex"],[1,2512,159,28,"this"],[1,2517,159,33,"currentIndex"],[1,2531,159,49,"toIndex"],[1,2533,159,59,"this"],[1,2538,159,64,"currentIndex"],[1,2551,160,16,"shift"],[1,2554,160,21],[1,2556,162,21,"fromIndex"],[1,2558,162,33,"this"],[1,2563,162,38,"currentIndex"],[1,2577,162,54,"toIndex"],[1,2579,162,64,"this"],[1,2584,162,69,"currentIndex"],[1,2599,163,16,"shift"],[1,2601,163,21],[1,2605,167,8],[1,2611,167,14,"fromItem"],[1,2613,167,25,"this"],[1,2618,167,30,"playlist"],[1,2627,167,39,"fromIndex"],[1,2630,168,8,"this"],[1,2635,168,13,"playlist"],[1,2644,168,22,"splice"],[1,2651,168,29,"fromIndex"],[1,2653,168,40],[1,2656,169,8,"this"],[1,2661,169,13,"playlist"],[1,2670,169,22,"splice"],[1,2677,169,29,"toIndex"],[1,2679,169,38],[1,2681,169,41,"fromItem"],[1,2684,170,12,"this"],[1,2689,170,17,"currentIndex"],[1,2703,170,33,"shift"],[1,2707,171,12,"this"],[1,2712,171,17,"currentIndex"],[1,2725,171,32,"this"],[1,2730,171,37,"currentIndex"],[1,2743,171,52,"shift"],[1,2745,173,4],[1,2746,176,4,"updateMetadataForTrack"],[1,2769,176,27,"index"],[1,2771,176,34,"metadata"],[1,2774,176,46],[1,2775,178,4,"clearNowPlayingMetadata"],[1,2801,178,32],[1,2802,180,4,"updateNowPlayingMetadata"],[1,2827,180,29,"metadata"],[1,2830,180,41],[1,2832,181,1],[1,2835]],"functionMap":{"names":["<global>","PlaylistPlayer","onStateUpdate","onTrackEnded","onPlaylistEnded","get__currentIndex","set__currentIndex","goToIndex","add","skip","skipToNext","skipToPrevious","getTrack","setRepeatMode","getRepeatMode","remove","indexes.reduce$argument_0","playlist.filter$argument_0","stop","reset","removeUpcomingTracks","move","updateMetadataForTrack","clearNowPlayingMetadata","updateNowPlayingMetadata"],"mappings":"AAA;OCG;ICM;KDK;IEC;KF2B;IGE,qBH;IIC;KJE;IKC;KLG;IMC;KNe;IOC;KPU;IQC;KRM;ISC;KTK;IUC;KVK;IWC;KXG;IYC;KZE;IaC;KbE;IcC;sCCC;SDG;6CEE;SFM;KdW;IiBC;KjBG;IkBC;KlBG;ImBC;KnBI;IoBC;KpB2B;IqBG,2CrB;IsBE,6BtB;IuBE,sCvB;CDC"},"hasCjsExports":false},"type":"js/module"}]}