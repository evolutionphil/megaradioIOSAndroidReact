{"dependencies":[{"name":"./polling.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":21,"index":122},"end":{"line":4,"column":44,"index":145}}],"key":"5ARmW/cSyTo7fOBnPh7VTK1e8ec=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Fetch=void 0;const t=r(d[0]);class o extends t.Polling{doPoll(){this._fetch().then(t=>{if(!t.ok)return this.onError(\"fetch read error\",t.status,t);t.text().then(t=>this.onData(t))}).catch(t=>{this.onError(\"fetch read error\",t)})}doWrite(t,o){this._fetch(t).then(t=>{if(!t.ok)return this.onError(\"fetch write error\",t.status,t);o()}).catch(t=>{this.onError(\"fetch write error\",t)})}_fetch(t){var o;const s=void 0!==t,h=new Headers(this.opts.extraHeaders);return s&&h.set(\"content-type\",\"text/plain;charset=UTF-8\"),null===(o=this.socket._cookieJar)||void 0===o||o.appendCookies(h),fetch(this.uri(),{method:s?\"POST\":\"GET\",body:s?t:null,headers:h,credentials:this.opts.withCredentials?\"include\":\"omit\"}).then(t=>{var o;return null===(o=this.socket._cookieJar)||void 0===o||o.parseCookies(t.headers.getSetCookie()),t})}}e.Fetch=o});","lineCount":1,"map":[[1,28,1,0],[1,41,2,0,"Object"],[1,48,2,7,"defineProperty"],[1,63,2,22,"exports"],[1,65,2,31],[1,78,2,45],[1,79,2,47,"value"],[1,86,2,54],[1,90,3,0,"exports"],[1,92,3,8,"Fetch"],[1,103,3,13,"undefined"],[1,105,4,0],[1,111,4,6,"polling_js_1"],[1,113,4,21,"require"],[1,115,4,28,"d"],[1,117,4,28],[1,121,14,0],[1,127,14,6,"Fetch"],[1,137,14,20,"polling_js_1"],[1,139,14,33,"Polling"],[1,147,15,4,"doPoll"],[1,156,16,8,"this"],[1,161,16,13,"_fetch"],[1,170,17,13,"then"],[1,175,17,19,"res"],[1,179,18,12],[1,183,18,17,"res"],[1,185,18,21,"ok"],[1,188,19,16],[1,195,19,23,"this"],[1,200,19,28,"onError"],[1,208,19,36],[1,227,19,56,"res"],[1,229,19,60,"status"],[1,236,19,68,"res"],[1,239,21,12,"res"],[1,241,21,16,"text"],[1,248,21,23,"then"],[1,253,21,29,"data"],[1,256,21,38,"this"],[1,261,21,43,"onData"],[1,268,21,50,"data"],[1,274,23,13,"catch"],[1,280,23,20,"err"],[1,284,24,12,"this"],[1,289,24,17,"onError"],[1,297,24,25],[1,316,24,45,"err"],[1,320,26,4],[1,321,27,4,"doWrite"],[1,329,27,12,"data"],[1,331,27,18,"callback"],[1,334,28,8,"this"],[1,339,28,13,"_fetch"],[1,346,28,20,"data"],[1,349,29,13,"then"],[1,354,29,19,"res"],[1,358,30,12],[1,362,30,17,"res"],[1,364,30,21,"ok"],[1,367,31,16],[1,374,31,23,"this"],[1,379,31,28,"onError"],[1,387,31,36],[1,407,31,57,"res"],[1,409,31,61,"status"],[1,416,31,69,"res"],[1,419,33,12,"callback"],[1,425,35,13,"catch"],[1,431,35,20,"err"],[1,435,36,12,"this"],[1,440,36,17,"onError"],[1,448,36,25],[1,468,36,46,"err"],[1,472,38,4],[1,473,39,4,"_fetch"],[1,480,39,11,"data"],[1,483,40,8],[1,487,40,12,"_a"],[1,489,41,8],[1,495,41,14,"isPost"],[1,502,41,32,"undefined"],[1,506,41,23,"data"],[1,508,42,14,"headers"],[1,510,42,24],[1,514,42,28,"Headers"],[1,522,42,36,"this"],[1,527,42,41,"opts"],[1,532,42,46,"extraHeaders"],[1,546,47,8],[1,553,43,12,"isPost"],[1,556,44,12,"headers"],[1,558,44,20,"set"],[1,562,44,24],[1,577,44,40],[1,605,46,42],[1,613,46,9,"_a"],[1,615,46,14,"this"],[1,620,46,19,"socket"],[1,627,46,26,"_cookieJar"],[1,645,46,52,"undefined"],[1,649,46,50,"_a"],[1,652,46,75,"_a"],[1,654,46,78,"appendCookies"],[1,668,46,92,"headers"],[1,671,47,15,"fetch"],[1,677,47,21,"this"],[1,682,47,26,"uri"],[1,688,47,33],[1,689,48,12,"method"],[1,696,48,20,"isPost"],[1,698,48,29],[1,705,48,38],[1,711,49,12,"body"],[1,716,49,18,"isPost"],[1,718,49,27,"data"],[1,720,49,34],[1,725,50,12,"headers"],[1,735,51,12,"credentials"],[1,747,51,25,"this"],[1,752,51,30,"opts"],[1,757,51,35,"withCredentials"],[1,773,51,53],[1,783,51,65],[1,792,52,11,"then"],[1,797,52,17,"res"],[1,801,53,12],[1,805,53,16,"_a"],[1,807,56,12],[1,814,55,46],[1,822,55,13,"_a"],[1,824,55,18,"this"],[1,829,55,23,"socket"],[1,836,55,30,"_cookieJar"],[1,854,55,56,"undefined"],[1,858,55,54,"_a"],[1,861,55,79,"_a"],[1,863,55,82,"parseCookies"],[1,876,55,95,"res"],[1,878,55,99,"headers"],[1,886,55,107,"getSetCookie"],[1,902,56,19,"res"],[1,905,58,4],[1,907,60,0,"exports"],[1,909,60,8,"Fetch"],[1,915,60,16,"Fetch"],[1,916,60,22],[1,919]],"functionMap":{"names":["<global>","Fetch","Fetch#doPoll","_fetch.then$argument_0","res.text.then$argument_0","_fetch.then._catch$argument_0","Fetch#doWrite","Fetch#_fetch","fetch.then$argument_0"],"mappings":"AAA;ACa;ICC;kBCE;4BCI,2BD;SDC;mBGC;SHE;KDC;IKC;kBHE;SGK;mBDC;SCE;KLC;IMC;gBCa;SDK;KNC;CDC"},"hasCjsExports":true},"type":"js/module"}]}