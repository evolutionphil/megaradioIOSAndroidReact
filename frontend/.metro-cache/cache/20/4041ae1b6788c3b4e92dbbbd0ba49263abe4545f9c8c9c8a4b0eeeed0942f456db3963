{"dependencies":[{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":69,"index":69}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return S}}),Object.defineProperty(_e,\"statsService\",{enumerable:!0,get:function(){return y}});var t,e=r(d[0]),s=(t=e)&&t.__esModule?t:{default:t};const n='listening_stats',o='listening_history',c='last_listening_session',u='unique_stations_set',l={totalMinutes:0,totalStations:136e3,musicPlayed:0,uniqueStationsListened:0,lastUpdated:(new Date).toISOString()},y={async getStats(){try{const t=await s.default.getItem(n);return t?JSON.parse(t):l}catch(t){return console.error('Failed to load stats:',t),l}},async saveStats(t){try{await s.default.setItem(n,JSON.stringify({...t,lastUpdated:(new Date).toISOString()}))}catch(t){console.error('Failed to save stats:',t)}},async startSession(t,e,n){const o={stationId:t,stationName:e,stationLogo:n,startTime:Date.now(),durationMinutes:0};try{await s.default.setItem(c,JSON.stringify(o))}catch(t){console.error('Failed to start session:',t)}},async endSession(){try{const t=await s.default.getItem(c);if(!t)return;const e=JSON.parse(t),n=Date.now(),o=n-e.startTime,u=Math.floor(o/6e4);if(u>=1){e.endTime=n,e.durationMinutes=u;const t=await this.getStats();t.totalMinutes+=u,t.musicPlayed+=1,await this.saveStats(t),await this.addToHistory(e)}await s.default.removeItem(c)}catch(t){console.error('Failed to end session:',t)}},async addToHistory(t){try{const e=await s.default.getItem(o),n=e?JSON.parse(e):[];n.unshift(t);const c=n.slice(0,100);await s.default.setItem(o,JSON.stringify(c))}catch(t){console.error('Failed to add to history:',t)}},async getHistory(){try{const t=await s.default.getItem(o);return t?JSON.parse(t):[]}catch(t){return console.error('Failed to get history:',t),[]}},async updateListeningTime(){try{const t=await s.default.getItem(c);if(!t)return;const e=JSON.parse(t),n=Date.now(),o=n-e.startTime;if(Math.floor(o/6e4)>=1){const t=await this.getStats();t.totalMinutes+=1,await this.saveStats(t),e.startTime=n,await s.default.setItem(c,JSON.stringify(e))}}catch(t){console.error('Failed to update listening time:',t)}},async getUniqueStationsCount(){try{const t=await this.getHistory();return new Set(t.map(t=>t.stationId)).size}catch(t){return 0}},async resetStats(){try{await s.default.multiRemove([n,o,c])}catch(t){console.error('Failed to reset stats:',t)}},async incrementMusicPlayed(){try{const t=await this.getStats();t.musicPlayed+=1,await this.saveStats(t)}catch(t){console.error('Failed to increment music played:',t)}},async trackUniqueStation(t){try{const e=await s.default.getItem(u),n=e?JSON.parse(e):[];if(n.includes(t))return!1;n.push(t),await s.default.setItem(u,JSON.stringify(n));const o=await this.getStats();return o.uniqueStationsListened=n.length,await this.saveStats(o),console.log('[StatsService] New unique station tracked:',t,'Total:',n.length),!0}catch(t){return console.error('Failed to track unique station:',t),!1}},async getUniqueStationsListened(){try{const t=await s.default.getItem(u),e=t?JSON.parse(t):[],n=await this.getHistory(),o=new Set(n.map(t=>t.stationId));return new Set([...e,...Array.from(o)]).size}catch(t){return console.error('Failed to get unique stations listened:',t),0}}};var S=y});","lineCount":1,"map":[[1,92,283,0,"Object"],[1,99,283,0,"defineProperty"],[1,114,283,0,"_e"],[1,117,283,0],[1,128,283,0,"enumerable"],[1,140,283,0],[1,142,283,0,"get"],[1,146,283,0],[1,164,283,0,"_default"],[1,165,283,0],[1,169,36,0,"Object"],[1,176,36,0,"defineProperty"],[1,191,36,0,"_e"],[1,194,36,0],[1,210,36,0,"enumerable"],[1,222,36,0],[1,224,36,0,"get"],[1,228,36,0],[1,246,36,0,"statsService"],[1,247,36,0],[1,251,1,0],[1,255],[1,257,1,0,"_reactNativeAsyncStorageAsyncStorage"],[1,259,1,0,"r"],[1,261,1,0,"d"],[1,263,1,0],[1,267,1,0,"AsyncStorage"],[1,270],[1,272,1,0,"_reactNativeAsyncStorageAsyncStorage"],[1,276],[1,303,3,0],[1,309,3,6,"STATS_KEY"],[1,311,3,18],[1,329,4,6,"HISTORY_KEY"],[1,331,4,20],[1,351,5,6,"LAST_SESSION_KEY"],[1,353,5,25],[1,378,6,6,"UNIQUE_STATIONS_KEY"],[1,380,6,28],[1,402,25,6,"defaultStats"],[1,404,25,37],[1,405,26,2,"totalMinutes"],[1,418,26,16],[1,420,27,2,"totalStations"],[1,434,27,17],[1,440,28,2,"musicPlayed"],[1,452,28,15],[1,454,29,2,"uniqueStationsListened"],[1,477,29,26],[1,479,30,2,"lastUpdated"],[1,492,30,15],[1,496,30,19,"Date"],[1,502,30,26,"toISOString"],[1,517,36,13,"statsService"],[1,519,36,28],[1,520,40,2],[1,534,40,8,"getStats"],[1,537,41,4],[1,541,42,6],[1,547,42,12,"stored"],[1,555,42,27,"AsyncStorage"],[1,557,42,39,"default"],[1,565,42,40,"getItem"],[1,573,42,48,"STATS_KEY"],[1,576,43,6],[1,583,43,10,"stored"],[1,585,44,15,"JSON"],[1,590,44,20,"parse"],[1,596,44,26,"stored"],[1,599,46,13,"defaultStats"],[1,600,47,4],[1,601,47,6],[1,607,47,13,"error"],[1,610,49,6],[1,617,48,6,"console"],[1,625,48,14,"error"],[1,631,48,20],[1,655,48,45,"error"],[1,658,49,13,"defaultStats"],[1,659,50,4],[1,660,51,2],[1,662,56,2],[1,677,56,8,"saveStats"],[1,678,56,18,"stats"],[1,681,57,4],[1,691,58,12,"AsyncStorage"],[1,693,58,24,"default"],[1,701,58,25,"setItem"],[1,709,58,33,"STATS_KEY"],[1,711,58,44,"JSON"],[1,716,58,49,"stringify"],[1,726,58,59],[1,730,59,11,"stats"],[1,732,60,8,"lastUpdated"],[1,745,60,21],[1,749,60,25,"Date"],[1,755,60,32,"toISOString"],[1,771,62,4],[1,772,62,6],[1,778,62,13,"error"],[1,781,63,6,"console"],[1,789,63,14,"error"],[1,795,63,20],[1,819,63,45,"error"],[1,821,64,4],[1,822,65,2],[1,824,71,2],[1,842,71,8,"startSession"],[1,843,71,21,"stationId"],[1,845,71,40,"stationName"],[1,847,71,61,"stationLogo"],[1,850,72,4],[1,856,72,10,"session"],[1,858,72,38],[1,859,73,6,"stationId"],[1,871,74,6,"stationName"],[1,885,75,6,"stationLogo"],[1,899,76,6,"startTime"],[1,909,76,17,"Date"],[1,914,76,22,"now"],[1,920,77,6,"durationMinutes"],[1,936,77,23],[1,939,80,4],[1,949,81,12,"AsyncStorage"],[1,951,81,24,"default"],[1,959,81,25,"setItem"],[1,967,81,33,"LAST_SESSION_KEY"],[1,969,81,51,"JSON"],[1,974,81,56,"stringify"],[1,984,81,66,"session"],[1,987,82,4],[1,988,82,6],[1,994,82,13,"error"],[1,997,83,6,"console"],[1,1005,83,14,"error"],[1,1011,83,20],[1,1038,83,48,"error"],[1,1040,84,4],[1,1041,85,2],[1,1043,91,2],[1,1059,91,8,"endSession"],[1,1062,92,4],[1,1066,93,6],[1,1072,93,12,"sessionStr"],[1,1080,93,31,"AsyncStorage"],[1,1082,93,43,"default"],[1,1090,93,44,"getItem"],[1,1098,93,52,"LAST_SESSION_KEY"],[1,1101,94,6],[1,1105,94,11,"sessionStr"],[1,1107,94,23],[1,1114,96,6],[1,1120,96,12,"session"],[1,1122,96,40,"JSON"],[1,1127,96,45,"parse"],[1,1133,96,51,"sessionStr"],[1,1136,97,12,"endTime"],[1,1138,97,22,"Date"],[1,1143,97,27,"now"],[1,1149,98,12,"durationMs"],[1,1151,98,25,"endTime"],[1,1153,98,35,"session"],[1,1155,98,43,"startTime"],[1,1165,99,12,"durationMinutes"],[1,1167,99,30,"Math"],[1,1172,99,35,"floor"],[1,1178,99,41,"durationMs"],[1,1180,99,54],[1,1185,102,6],[1,1188,102,10,"durationMinutes"],[1,1191,102,29],[1,1193,102,32],[1,1194,104,8,"session"],[1,1196,104,16,"endTime"],[1,1204,104,26,"endTime"],[1,1206,105,8,"session"],[1,1208,105,16,"durationMinutes"],[1,1224,105,34,"durationMinutes"],[1,1226,108,8],[1,1232,108,14,"stats"],[1,1240,108,28,"this"],[1,1245,108,33,"getStats"],[1,1256,109,8,"stats"],[1,1258,109,14,"totalMinutes"],[1,1272,109,30,"durationMinutes"],[1,1274,110,8,"stats"],[1,1276,110,14,"musicPlayed"],[1,1289,110,29],[1,1297,111,14,"this"],[1,1302,111,19,"saveStats"],[1,1312,111,29,"stats"],[1,1321,114,14,"this"],[1,1326,114,19,"addToHistory"],[1,1339,114,32,"session"],[1,1341,115,6],[1,1348,118,12,"AsyncStorage"],[1,1350,118,24,"default"],[1,1358,118,25,"removeItem"],[1,1369,118,36,"LAST_SESSION_KEY"],[1,1371,119,4],[1,1372,119,6],[1,1378,119,13,"error"],[1,1381,120,6,"console"],[1,1389,120,14,"error"],[1,1395,120,20],[1,1420,120,46,"error"],[1,1422,121,4],[1,1423,122,2],[1,1425,127,2],[1,1443,127,8,"addToHistory"],[1,1444,127,21,"session"],[1,1447,128,4],[1,1451,129,6],[1,1457,129,12,"historyStr"],[1,1465,129,31,"AsyncStorage"],[1,1467,129,43,"default"],[1,1475,129,44,"getItem"],[1,1483,129,52,"HISTORY_KEY"],[1,1486,130,12,"history"],[1,1488,130,42,"historyStr"],[1,1490,130,55,"JSON"],[1,1495,130,60,"parse"],[1,1501,130,66,"historyStr"],[1,1504,130,80],[1,1507,133,6,"history"],[1,1509,133,14,"unshift"],[1,1517,133,22,"session"],[1,1520,136,6],[1,1526,136,12,"trimmedHistory"],[1,1528,136,29,"history"],[1,1530,136,37,"slice"],[1,1536,136,43],[1,1538,136,46],[1,1549,138,12,"AsyncStorage"],[1,1551,138,24,"default"],[1,1559,138,25,"setItem"],[1,1567,138,33,"HISTORY_KEY"],[1,1569,138,46,"JSON"],[1,1574,138,51,"stringify"],[1,1584,138,61,"trimmedHistory"],[1,1587,139,4],[1,1588,139,6],[1,1594,139,13,"error"],[1,1597,140,6,"console"],[1,1605,140,14,"error"],[1,1611,140,20],[1,1639,140,49,"error"],[1,1641,141,4],[1,1642,142,2],[1,1644,147,2],[1,1660,147,8,"getHistory"],[1,1663,148,4],[1,1667,149,6],[1,1673,149,12,"historyStr"],[1,1681,149,31,"AsyncStorage"],[1,1683,149,43,"default"],[1,1691,149,44,"getItem"],[1,1699,149,52,"HISTORY_KEY"],[1,1702,150,6],[1,1709,150,13,"historyStr"],[1,1711,150,26,"JSON"],[1,1716,150,31,"parse"],[1,1722,150,37,"historyStr"],[1,1725,150,51],[1,1727,151,4],[1,1728,151,6],[1,1734,151,13,"error"],[1,1737,153,6],[1,1744,152,6,"console"],[1,1752,152,14,"error"],[1,1758,152,20],[1,1783,152,46,"error"],[1,1786,153,13],[1,1788,154,4],[1,1789,155,2],[1,1791,161,2],[1,1816,161,8,"updateListeningTime"],[1,1819,162,4],[1,1823,163,6],[1,1829,163,12,"sessionStr"],[1,1837,163,31,"AsyncStorage"],[1,1839,163,43,"default"],[1,1847,163,44,"getItem"],[1,1855,163,52,"LAST_SESSION_KEY"],[1,1858,164,6],[1,1862,164,11,"sessionStr"],[1,1864,164,23],[1,1871,166,6],[1,1877,166,12,"session"],[1,1879,166,40,"JSON"],[1,1884,166,45,"parse"],[1,1890,166,51,"sessionStr"],[1,1893,167,12,"currentTime"],[1,1895,167,26,"Date"],[1,1900,167,31,"now"],[1,1906,168,12,"durationMs"],[1,1908,168,25,"currentTime"],[1,1910,168,39,"session"],[1,1912,168,47,"startTime"],[1,1922,172,6],[1,1925,169,30,"Math"],[1,1930,169,35,"floor"],[1,1936,169,41,"durationMs"],[1,1938,169,54],[1,1944,172,29],[1,1946,172,32],[1,1947,174,8],[1,1953,174,14,"stats"],[1,1961,174,28,"this"],[1,1966,174,33,"getStats"],[1,1977,175,8,"stats"],[1,1979,175,14,"totalMinutes"],[1,1993,175,30],[1,2001,176,14,"this"],[1,2006,176,19,"saveStats"],[1,2016,176,29,"stats"],[1,2019,179,8,"session"],[1,2021,179,16,"startTime"],[1,2031,179,28,"currentTime"],[1,2039,180,14,"AsyncStorage"],[1,2041,180,26,"default"],[1,2049,180,27,"setItem"],[1,2057,180,35,"LAST_SESSION_KEY"],[1,2059,180,53,"JSON"],[1,2064,180,58,"stringify"],[1,2074,180,68,"session"],[1,2077,181,6],[1,2078,182,4],[1,2079,182,6],[1,2085,182,13,"error"],[1,2088,183,6,"console"],[1,2096,183,14,"error"],[1,2102,183,20],[1,2137,183,56,"error"],[1,2139,184,4],[1,2140,185,2],[1,2142,190,2],[1,2170,190,8,"getUniqueStationsCount"],[1,2173,191,4],[1,2177,192,6],[1,2183,192,12,"history"],[1,2191,192,28,"this"],[1,2196,192,33,"getHistory"],[1,2209,194,6],[1,2216,193,29],[1,2220,193,33,"Set"],[1,2224,193,37,"history"],[1,2226,193,45,"map"],[1,2230,193,49,"s"],[1,2233,193,54,"s"],[1,2235,193,56,"stationId"],[1,2247,194,28,"size"],[1,2251,195,4],[1,2252,195,6],[1,2258,195,13,"error"],[1,2261,196,6],[1,2268,196,13],[1,2269,197,4],[1,2270,198,2],[1,2272,203,2],[1,2288,203,8,"resetStats"],[1,2291,204,4],[1,2301,205,12,"AsyncStorage"],[1,2303,205,24,"default"],[1,2311,205,25,"multiRemove"],[1,2323,205,37],[1,2324,205,38,"STATS_KEY"],[1,2326,205,49,"HISTORY_KEY"],[1,2328,205,62,"LAST_SESSION_KEY"],[1,2331,206,4],[1,2332,206,6],[1,2338,206,13,"error"],[1,2341,207,6,"console"],[1,2349,207,14,"error"],[1,2355,207,20],[1,2380,207,46,"error"],[1,2382,208,4],[1,2383,209,2],[1,2385,215,2],[1,2411,215,8,"incrementMusicPlayed"],[1,2414,216,4],[1,2418,217,6],[1,2424,217,12,"stats"],[1,2432,217,26,"this"],[1,2437,217,31,"getStats"],[1,2448,218,6,"stats"],[1,2450,218,12,"musicPlayed"],[1,2463,218,27],[1,2471,219,12,"this"],[1,2476,219,17,"saveStats"],[1,2486,219,27,"stats"],[1,2488,220,4],[1,2489,220,6],[1,2495,220,13,"error"],[1,2498,221,6,"console"],[1,2506,221,14,"error"],[1,2512,221,20],[1,2548,221,57,"error"],[1,2550,222,4],[1,2551,223,2],[1,2553,230,2],[1,2577,230,8,"trackUniqueStation"],[1,2578,230,27,"stationId"],[1,2581,231,4],[1,2585,233,6],[1,2591,233,12,"storedSet"],[1,2599,233,30,"AsyncStorage"],[1,2601,233,42,"default"],[1,2609,233,43,"getItem"],[1,2617,233,51,"UNIQUE_STATIONS_KEY"],[1,2620,234,12,"uniqueStations"],[1,2622,234,39,"storedSet"],[1,2624,234,51,"JSON"],[1,2629,234,56,"parse"],[1,2635,234,62,"storedSet"],[1,2638,234,75],[1,2641,237,6],[1,2644,237,10,"uniqueStations"],[1,2646,237,25,"includes"],[1,2655,237,34,"stationId"],[1,2658,238,8],[1,2665,238,15],[1,2667,242,6,"uniqueStations"],[1,2669,242,21,"push"],[1,2674,242,26,"stationId"],[1,2683,243,12,"AsyncStorage"],[1,2685,243,24,"default"],[1,2693,243,25,"setItem"],[1,2701,243,33,"UNIQUE_STATIONS_KEY"],[1,2703,243,54,"JSON"],[1,2708,243,59,"stringify"],[1,2718,243,69,"uniqueStations"],[1,2722,246,6],[1,2728,246,12,"stats"],[1,2736,246,26,"this"],[1,2741,246,31,"getStats"],[1,2752,251,6],[1,2759,247,6,"stats"],[1,2761,247,12,"uniqueStationsListened"],[1,2784,247,37,"uniqueStations"],[1,2786,247,52,"length"],[1,2799,248,12,"this"],[1,2804,248,17,"saveStats"],[1,2814,248,27,"stats"],[1,2817,250,6,"console"],[1,2825,250,14,"log"],[1,2829,250,18],[1,2874,250,64,"stationId"],[1,2876,250,75],[1,2885,250,85,"uniqueStations"],[1,2887,250,100,"length"],[1,2896,251,13],[1,2897,252,4],[1,2898,252,6],[1,2904,252,13,"error"],[1,2907,254,6],[1,2914,253,6,"console"],[1,2922,253,14,"error"],[1,2928,253,20],[1,2962,253,55,"error"],[1,2966,254,13],[1,2967,255,4],[1,2968,256,2],[1,2970,262,2],[1,3001,262,8,"getUniqueStationsListened"],[1,3004,263,4],[1,3008,265,6],[1,3014,265,12,"storedSet"],[1,3022,265,30,"AsyncStorage"],[1,3024,265,42,"default"],[1,3032,265,43,"getItem"],[1,3040,265,51,"UNIQUE_STATIONS_KEY"],[1,3043,266,12,"uniqueStations"],[1,3045,266,39,"storedSet"],[1,3047,266,51,"JSON"],[1,3052,266,56,"parse"],[1,3058,266,62,"storedSet"],[1,3061,266,75],[1,3064,269,12,"history"],[1,3072,269,28,"this"],[1,3077,269,33,"getHistory"],[1,3090,270,12,"historyStations"],[1,3092,270,30],[1,3096,270,34,"Set"],[1,3100,270,38,"history"],[1,3102,270,46,"map"],[1,3106,270,50,"s"],[1,3109,270,55,"s"],[1,3111,270,57,"stationId"],[1,3123,275,6],[1,3130,273,24],[1,3134,273,28,"Set"],[1,3138,273,32],[1,3142,273,36,"uniqueStations"],[1,3147,273,55,"Array"],[1,3153,273,61,"from"],[1,3158,273,66,"historyStations"],[1,3163,275,23,"size"],[1,3167,276,4],[1,3168,276,6],[1,3174,276,13,"error"],[1,3177,278,6],[1,3184,277,6,"console"],[1,3192,277,14,"error"],[1,3198,277,20],[1,3240,277,63,"error"],[1,3243,278,13],[1,3244,279,4],[1,3245,280,2],[1,3248,283,0],[1,3252,283,0,"_default"],[1,3254,283,15,"statsService"],[1,3255,283,28],[1,3258]],"functionMap":{"names":["<global>","getStats","saveStats","startSession","endSession","addToHistory","getHistory","updateListeningTime","getUniqueStationsCount","history.map$argument_0","resetStats","incrementMusicPlayed","trackUniqueStation","getUniqueStationsListened"],"mappings":"AAA;ECuC;GDW;EEK;GFS;EGM;GHc;EIM;GJ+B;EKK;GLe;EMK;GNQ;EOM;GPwB;EQK;iDCG,gBD;GRK;EUK;GVM;EWM;GXQ;EYO;GZ0B;EaM;kDJQ,gBI;GbU"},"hasCjsExports":false},"type":"js/module"}]}