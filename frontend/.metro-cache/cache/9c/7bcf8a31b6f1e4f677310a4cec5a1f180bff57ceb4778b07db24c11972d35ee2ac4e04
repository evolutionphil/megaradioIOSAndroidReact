{"dependencies":[{"name":"@babel/runtime/helpers/objectWithoutPropertiesLoose","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"HFkXuFcBAqfzGtqyPj8g62MKT0M=","exportNames":["*"],"imports":1}},{"name":"../../CarPlay","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":18,"index":129},"end":{"line":4,"column":42,"index":153}}],"key":"uc2kOoCX5UbWXNsaU+LfHNXTg38=","exportNames":["*"],"imports":1}},{"name":"../../interfaces/Action","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":17,"index":172},"end":{"line":5,"column":51,"index":206}}],"key":"Ao+0Xukmz3+PXcgXLZaVbmT2Jnw=","exportNames":["*"],"imports":1}},{"name":"../Template","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":19,"index":227},"end":{"line":6,"column":41,"index":249}}],"key":"87imF7mdjJJbCUkE5RafmdJ6RBg=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/index","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"55efhPHw3gz2FoQtoN2yI1VuhbM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _objectWithoutPropertiesLoose = require(_dependencyMap[0], \"@babel/runtime/helpers/objectWithoutPropertiesLoose\");\n  const _excluded = [\"actions\"],\n    _excluded2 = [\"onPress\"];\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.MessageTemplate = void 0;\n  const CarPlay_1 = require(_dependencyMap[1], \"../../CarPlay\");\n  const Action_1 = require(_dependencyMap[2], \"../../interfaces/Action\");\n  const Template_1 = require(_dependencyMap[3], \"../Template\");\n  const react_native_1 = require(_dependencyMap[4], \"react-native-web/dist/index\");\n  class MessageTemplate extends Template_1.Template {\n    pressableCallbacks = {};\n    get type() {\n      return 'message';\n    }\n    constructor(config) {\n      super(config);\n      this.config = config;\n      const subscription = CarPlay_1.CarPlay.emitter.addListener('buttonPressed', ({\n        buttonId,\n        templateId\n      }) => {\n        if (templateId !== this.id) {\n          return;\n        }\n        const callback = this.pressableCallbacks[buttonId];\n        if (callback == null || typeof callback !== 'function') {\n          return;\n        }\n        callback();\n      });\n      this.listenerSubscriptions.push(subscription);\n      const callbackFn = react_native_1.Platform.select({\n        android: ({\n          error\n        } = {}) => {\n          error && console.error(error);\n        }\n      });\n      this.config = this.parseConfig(Object.assign({\n        type: this.type\n      }, config));\n      CarPlay_1.CarPlay.bridge.createTemplate(this.id, this.config, callbackFn);\n    }\n    parseConfig(config) {\n      const {\n          actions\n        } = config,\n        rest = _objectWithoutPropertiesLoose(config, _excluded);\n      const updatedConfig = rest;\n      const callbackIds = [];\n      if (actions != null) {\n        updatedConfig.actions = actions.map(action => {\n          const id = 'id' in action ? action.id : (0, Action_1.getCallbackActionId)();\n          if (id == null) {\n            return action;\n          }\n          callbackIds.push(id);\n          if (!('onPress' in action)) {\n            return action;\n          }\n          const {\n              onPress\n            } = action,\n            actionRest = _objectWithoutPropertiesLoose(action, _excluded2);\n          this.pressableCallbacks[id] = onPress;\n          return Object.assign({}, actionRest, {\n            id\n          });\n        });\n      }\n      this.pressableCallbacks = Object.fromEntries(Object.entries(this.pressableCallbacks).filter(([id]) => callbackIds.includes(id)));\n      return super.parseConfig(updatedConfig);\n    }\n  }\n  exports.MessageTemplate = MessageTemplate;\n});","lineCount":81,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_objectWithoutPropertiesLoose"],[4,35,1,13],[4,38,1,13,"require"],[4,45,1,13],[4,46,1,13,"_dependencyMap"],[4,60,1,13],[5,2,1,13],[5,8,1,13,"_excluded"],[5,17,1,13],[6,4,1,13,"_excluded2"],[6,14,1,13],[7,2,2,0,"Object"],[7,8,2,6],[7,9,2,7,"defineProperty"],[7,23,2,21],[7,24,2,22,"exports"],[7,31,2,29],[7,33,2,31],[7,45,2,43],[7,47,2,45],[8,4,2,47,"value"],[8,9,2,52],[8,11,2,54],[9,2,2,59],[9,3,2,60],[9,4,2,61],[10,2,3,0,"exports"],[10,9,3,7],[10,10,3,8,"MessageTemplate"],[10,25,3,23],[10,28,3,26],[10,33,3,31],[10,34,3,32],[11,2,4,0],[11,8,4,6,"CarPlay_1"],[11,17,4,15],[11,20,4,18,"require"],[11,27,4,25],[11,28,4,25,"_dependencyMap"],[11,42,4,25],[11,62,4,41],[11,63,4,42],[12,2,5,0],[12,8,5,6,"Action_1"],[12,16,5,14],[12,19,5,17,"require"],[12,26,5,24],[12,27,5,24,"_dependencyMap"],[12,41,5,24],[12,71,5,50],[12,72,5,51],[13,2,6,0],[13,8,6,6,"Template_1"],[13,18,6,16],[13,21,6,19,"require"],[13,28,6,26],[13,29,6,26,"_dependencyMap"],[13,43,6,26],[13,61,6,40],[13,62,6,41],[14,2,6,42],[14,8,6,42,"react_native_1"],[14,22,6,42],[14,25,6,42,"require"],[14,32,6,42],[14,33,6,42,"_dependencyMap"],[14,47,6,42],[15,2,8,0],[15,8,8,6,"MessageTemplate"],[15,23,8,21],[15,32,8,30,"Template_1"],[15,42,8,40],[15,43,8,41,"Template"],[15,51,8,49],[15,52,8,50],[16,4,10,4,"pressableCallbacks"],[16,22,10,22],[16,25,10,25],[16,26,10,26],[16,27,10,27],[17,4,11,4],[17,8,11,8,"type"],[17,12,11,12,"type"],[17,13,11,12],[17,15,11,15],[18,6,12,8],[18,13,12,15],[18,22,12,24],[19,4,13,4],[20,4,14,4,"constructor"],[20,15,14,15,"constructor"],[20,16,14,16,"config"],[20,22,14,22],[20,24,14,24],[21,6,15,8],[21,11,15,13],[21,12,15,14,"config"],[21,18,15,20],[21,19,15,21],[22,6,16,8],[22,10,16,12],[22,11,16,13,"config"],[22,17,16,19],[22,20,16,22,"config"],[22,26,16,28],[23,6,17,8],[23,12,17,14,"subscription"],[23,24,17,26],[23,27,17,29,"CarPlay_1"],[23,36,17,38],[23,37,17,39,"CarPlay"],[23,44,17,46],[23,45,17,47,"emitter"],[23,52,17,54],[23,53,17,55,"addListener"],[23,64,17,66],[23,65,17,67],[23,80,17,82],[23,82,17,84],[23,83,17,85],[24,8,17,87,"buttonId"],[24,16,17,95],[25,8,17,97,"templateId"],[26,6,17,108],[26,7,17,109],[26,12,17,114],[27,8,18,12],[27,12,18,16,"templateId"],[27,22,18,26],[27,27,18,31],[27,31,18,35],[27,32,18,36,"id"],[27,34,18,38],[27,36,18,40],[28,10,19,16],[29,8,20,12],[30,8,21,12],[30,14,21,18,"callback"],[30,22,21,26],[30,25,21,29],[30,29,21,33],[30,30,21,34,"pressableCallbacks"],[30,48,21,52],[30,49,21,53,"buttonId"],[30,57,21,61],[30,58,21,62],[31,8,22,12],[31,12,22,16,"callback"],[31,20,22,24],[31,24,22,28],[31,28,22,32],[31,32,22,36],[31,39,22,43,"callback"],[31,47,22,51],[31,52,22,56],[31,62,22,66],[31,64,22,68],[32,10,23,16],[33,8,24,12],[34,8,25,12,"callback"],[34,16,25,20],[34,17,25,21],[34,18,25,22],[35,6,26,8],[35,7,26,9],[35,8,26,10],[36,6,27,8],[36,10,27,12],[36,11,27,13,"listenerSubscriptions"],[36,32,27,34],[36,33,27,35,"push"],[36,37,27,39],[36,38,27,40,"subscription"],[36,50,27,52],[36,51,27,53],[37,6,28,8],[37,12,28,14,"callbackFn"],[37,22,28,24],[37,25,28,27,"react_native_1"],[37,39,28,41],[37,40,28,42,"Platform"],[37,48,28,50],[37,49,28,51,"select"],[37,55,28,57],[37,56,28,58],[38,8,29,12,"android"],[38,15,29,19],[38,17,29,21,"android"],[38,18,29,22],[39,10,29,24,"error"],[40,8,29,30],[40,9,29,31],[40,12,29,34],[40,13,29,35],[40,14,29,36],[40,19,29,41],[41,10,30,16,"error"],[41,15,30,21],[41,19,30,25,"console"],[41,26,30,32],[41,27,30,33,"error"],[41,32,30,38],[41,33,30,39,"error"],[41,38,30,44],[41,39,30,45],[42,8,31,12],[43,6,32,8],[43,7,32,9],[43,8,32,10],[44,6,33,8],[44,10,33,12],[44,11,33,13,"config"],[44,17,33,19],[44,20,33,22],[44,24,33,26],[44,25,33,27,"parseConfig"],[44,36,33,38],[44,37,33,38,"Object"],[44,43,33,38],[44,44,33,38,"assign"],[44,50,33,38],[45,8,33,41,"type"],[45,12,33,45],[45,14,33,47],[45,18,33,51],[45,19,33,52,"type"],[46,6,33,56],[46,9,33,61,"config"],[46,15,33,67],[46,16,33,69],[46,17,33,70],[47,6,34,8,"CarPlay_1"],[47,15,34,17],[47,16,34,18,"CarPlay"],[47,23,34,25],[47,24,34,26,"bridge"],[47,30,34,32],[47,31,34,33,"createTemplate"],[47,45,34,47],[47,46,34,48],[47,50,34,52],[47,51,34,53,"id"],[47,53,34,55],[47,55,34,57],[47,59,34,61],[47,60,34,62,"config"],[47,66,34,68],[47,68,34,70,"callbackFn"],[47,78,34,80],[47,79,34,81],[48,4,35,4],[49,4,36,4,"parseConfig"],[49,15,36,15,"parseConfig"],[49,16,36,16,"config"],[49,22,36,22],[49,24,36,24],[50,6,37,8],[50,12,37,14],[51,10,37,16,"actions"],[52,8,37,33],[52,9,37,34],[52,12,37,37,"config"],[52,18,37,43],[53,8,37,28,"rest"],[53,12,37,32],[53,15,37,32,"_objectWithoutPropertiesLoose"],[53,44,37,32],[53,45,37,37,"config"],[53,51,37,43],[53,53,37,43,"_excluded"],[53,62,37,43],[54,6,38,8],[54,12,38,14,"updatedConfig"],[54,25,38,27],[54,28,38,30,"rest"],[54,32,38,34],[55,6,39,8],[55,12,39,14,"callbackIds"],[55,23,39,25],[55,26,39,28],[55,28,39,30],[56,6,40,8],[56,10,40,12,"actions"],[56,17,40,19],[56,21,40,23],[56,25,40,27],[56,27,40,29],[57,8,41,12,"updatedConfig"],[57,21,41,25],[57,22,41,26,"actions"],[57,29,41,33],[57,32,41,36,"actions"],[57,39,41,43],[57,40,41,44,"map"],[57,43,41,47],[57,44,41,48,"action"],[57,50,41,54],[57,54,41,58],[58,10,42,16],[58,16,42,22,"id"],[58,18,42,24],[58,21,42,27],[58,25,42,31],[58,29,42,35,"action"],[58,35,42,41],[58,38,42,44,"action"],[58,44,42,50],[58,45,42,51,"id"],[58,47,42,53],[58,50,42,56],[58,51,42,57],[58,52,42,58],[58,54,42,60,"Action_1"],[58,62,42,68],[58,63,42,69,"getCallbackActionId"],[58,82,42,88],[58,84,42,90],[58,85,42,91],[59,10,43,16],[59,14,43,20,"id"],[59,16,43,22],[59,20,43,26],[59,24,43,30],[59,26,43,32],[60,12,44,20],[60,19,44,27,"action"],[60,25,44,33],[61,10,45,16],[62,10,46,16,"callbackIds"],[62,21,46,27],[62,22,46,28,"push"],[62,26,46,32],[62,27,46,33,"id"],[62,29,46,35],[62,30,46,36],[63,10,47,16],[63,14,47,20],[63,16,47,22],[63,25,47,31],[63,29,47,35,"action"],[63,35,47,41],[63,36,47,42],[63,38,47,44],[64,12,48,20],[64,19,48,27,"action"],[64,25,48,33],[65,10,49,16],[66,10,50,16],[66,16,50,22],[67,14,50,24,"onPress"],[68,12,50,47],[68,13,50,48],[68,16,50,51,"action"],[68,22,50,57],[69,12,50,36,"actionRest"],[69,22,50,46],[69,25,50,46,"_objectWithoutPropertiesLoose"],[69,54,50,46],[69,55,50,51,"action"],[69,61,50,57],[69,63,50,57,"_excluded2"],[69,73,50,57],[70,10,51,16],[70,14,51,20],[70,15,51,21,"pressableCallbacks"],[70,33,51,39],[70,34,51,40,"id"],[70,36,51,42],[70,37,51,43],[70,40,51,46,"onPress"],[70,47,51,53],[71,10,52,16],[71,17,52,16,"Object"],[71,23,52,16],[71,24,52,16,"assign"],[71,30,52,16],[71,35,52,28,"actionRest"],[71,45,52,38],[72,12,52,40,"id"],[73,10,52,42],[74,8,53,12],[74,9,53,13],[74,10,53,14],[75,6,54,8],[76,6,55,8],[76,10,55,12],[76,11,55,13,"pressableCallbacks"],[76,29,55,31],[76,32,55,34,"Object"],[76,38,55,40],[76,39,55,41,"fromEntries"],[76,50,55,52],[76,51,55,53,"Object"],[76,57,55,59],[76,58,55,60,"entries"],[76,65,55,67],[76,66,55,68],[76,70,55,72],[76,71,55,73,"pressableCallbacks"],[76,89,55,91],[76,90,55,92],[76,91,55,93,"filter"],[76,97,55,99],[76,98,55,100],[76,99,55,101],[76,100,55,102,"id"],[76,102,55,104],[76,103,55,105],[76,108,55,110,"callbackIds"],[76,119,55,121],[76,120,55,122,"includes"],[76,128,55,130],[76,129,55,131,"id"],[76,131,55,133],[76,132,55,134],[76,133,55,135],[76,134,55,136],[77,6,56,8],[77,13,56,15],[77,18,56,20],[77,19,56,21,"parseConfig"],[77,30,56,32],[77,31,56,33,"updatedConfig"],[77,44,56,46],[77,45,56,47],[78,4,57,4],[79,2,58,0],[80,2,59,0,"exports"],[80,9,59,7],[80,10,59,8,"MessageTemplate"],[80,25,59,23],[80,28,59,26,"MessageTemplate"],[80,43,59,41],[81,0,59,42],[81,3]],"functionMap":{"names":["<global>","MessageTemplate","get__type","constructor","CarPlay_1.CarPlay.emitter.addListener$argument_1","react_native_1.Platform.select$argument_0.android","parseConfig","actions.map$argument_0","Object.entries.filter$argument_0"],"mappings":"AAA;ACO;ICG;KDE;IEC;oFCG;SDS;qBEG;aFE;KFI;IKC;gDCK;aDY;oGEE,kCF;KLE;CDC"},"hasCjsExports":true},"type":"js/module"}]}